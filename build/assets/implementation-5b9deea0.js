import{c as g,_ as j,e as J}from"./index-eb73e870.js";import{R as r,r as v}from"./index-2c36b58a.js";import{u as V}from"./use-container-query-60e26c9e.js";import"./ResizeObserver-6fd345a6.js";import{a as D}from"./index-47bb06f7.js";import{g as T}from"./attributes-9cbf7bc1.js";import{i as Z,I as ee}from"./internal-1d1af924.js";import{I as M,s as te}from"./internal-605c76be.js";import{u as re}from"./context-d1fbdd85.js";import{I as R}from"./internal-67a4bdad.js";import{i as ae,f as E}from"./index-491afaa4.js";import{u as ne}from"./index-33af1cce.js";import{c as se}from"./check-safe-url-87d46dc3.js";import{c as oe}from"./index-9e4101f5.js";import{D as O,j as P,o as $}from"./selectors-2871d9bb.js";const m={"breadcrumb-group":"awsui_breadcrumb-group_d19fg_1p3cd_145","breadcrumb-group-list":"awsui_breadcrumb-group-list_d19fg_1p3cd_180",ghost:"awsui_ghost_d19fg_1p3cd_191",item:"awsui_item_d19fg_1p3cd_196","ghost-item":"awsui_ghost-item_d19fg_1p3cd_197",ellipsis:"awsui_ellipsis_d19fg_1p3cd_198",hide:"awsui_hide_d19fg_1p3cd_209",visible:"awsui_visible_d19fg_1p3cd_215",icon:"awsui_icon_d19fg_1p3cd_219","breadcrumbs-skeleton":"awsui_breadcrumbs-skeleton_d19fg_1p3cd_225","collapsed-button":"awsui_collapsed-button_d19fg_1p3cd_229","button-icon":"awsui_button-icon_d19fg_1p3cd_311","button-icon-open":"awsui_button-icon-open_d19fg_1p3cd_325",hidden:"awsui_hidden_d19fg_1p3cd_329"},le={[O]:"true"},ie=({items:e,onItemClick:t,onItemFollow:o})=>{var l;return r.createElement(r.Fragment,null,r.createElement(M,{items:e.map((s,a)=>{const c=a===e.length-1;return{id:a.toString(),text:s.text,href:c?void 0:s.href,isCurrentBreadcrumb:c}}),customTriggerBuilder:ce((l=e[e.length-1])===null||l===void 0?void 0:l.text),linkStyle:!0,fullWidth:!0,onItemClick:t,onItemFollow:o,analyticsMetadataTransformer:s=>{var a,c;return!((a=s.detail)===null||a===void 0)&&a.id&&delete s.detail.id,!((c=s.detail)===null||c===void 0)&&c.position&&(s.detail.position=`${parseInt(s.detail.position,10)+1}`),s}}),e.length>1&&r.createElement("span",Object.assign({className:m.hidden},le),e[1].text))},ce=e=>({ariaLabel:t,triggerRef:o,testUtilsClass:l,isOpen:s,onClick:a})=>{const c={[P]:$};return r.createElement("button",Object.assign({ref:o},c,{className:g(m["collapsed-button"],l),onClick:u=>{u.preventDefault(),a()},"aria-expanded":s,"aria-haspopup":!0,"aria-label":t,formAction:"none"}),r.createElement(R,{name:"caret-down-filled",className:te(m,"button-icon",s)}),r.createElement("span",null,e))};let I=[],x=!1;const q=e=>{e.key==="Escape"&&I.forEach(t=>t())},ue=e=>(I.forEach(t=>t()),I.push(e),x||(x=!0,document.addEventListener("keydown",q)),()=>{me(e)}),me=e=>{I=I.filter(t=>t!==e),x&&I.length===0&&(x=!1,document.removeEventListener("keydown",q))},w=e=>({item:e,text:e.text,href:e.href}),de=70,pe=50,fe=(e,t)=>{const o=[...e];return o[e.length-1]=Math.min(e[e.length-1],de),{collapsed:_e(o,t)}},_e=(e,t)=>{if(typeof t!="number")return 0;let o=e.reduce((s,a)=>s+a,0),l=0;for(;l<e.length-1&&!(o<=t);)l+=1,o=o-e[l],l===1&&(o+=pe);return l};const U={"breadcrumb-item":"awsui_breadcrumb-item_1c68o_b6unx_5"},W=r.forwardRef(({className:e,text:t,itemIndex:o,totalCount:l,disableAnalytics:s},a)=>{const c={};return s||(o===l-1&&(c[P]=$),o===1&&(c[O]="true")),r.createElement("span",Object.assign({},c,{className:g(e,!s&&U["breadcrumb-item"]),ref:a}),t)});const b={link:"awsui_link_1kosq_x3lvk_145",breadcrumb:"awsui_breadcrumb_1kosq_x3lvk_149","ghost-breadcrumb":"awsui_ghost-breadcrumb_1kosq_x3lvk_150",icon:"awsui_icon_1kosq_x3lvk_153",anchor:"awsui_anchor_1kosq_x3lvk_159",text:"awsui_text_1kosq_x3lvk_206",last:"awsui_last_1kosq_x3lvk_225"},be=({item:e,isLast:t,anchorAttributes:o,children:l})=>{const[s,a]=v.useState(!1),c=v.useRef(null),u=r.createElement(Z,{trackRef:c,value:e.text,size:"medium"});return v.useEffect(()=>{if(s)return ue(()=>{a(!1)})},[s]),r.createElement(r.Fragment,null,r.createElement(z,Object.assign({ref:c,isLast:t,onFocus:()=>{a(!0)},onBlur:()=>a(!1),onMouseEnter:()=>{a(!0)},onMouseLeave:()=>a(!1),anchorAttributes:o},t?{tabIndex:0}:{}),l),s&&u)},z=r.forwardRef((e,t)=>{var{anchorAttributes:o,children:l,isLast:s}=e,a=j(e,["anchorAttributes","children","isLast"]);return s?r.createElement("span",Object.assign({ref:t,className:b.anchor},a),l):r.createElement("a",Object.assign({ref:t,className:b.anchor},a,o),l)});function S({item:e,itemIndex:t,totalCount:o,onClick:l,onFollow:s,isGhost:a=!1,isTruncated:c=!1}){const u=t===o-1,f=_=>_.preventDefault(),p=_=>{ae(_)&&E(s,w(e),_),E(l,w(e),_)},h={href:e.href||"#",onClick:u?f:p};a&&(h.tabIndex=-1);const N=r.createElement(W,{className:b.text,itemIndex:t,totalCount:o,text:e.text,disableAnalytics:a});return r.createElement("div",{className:g(!a&&b.breadcrumb,a&&b["ghost-breadcrumb"],u&&b.last)},c&&!a?r.createElement(be,{item:e,isLast:u,anchorAttributes:h},N):r.createElement(z,{isLast:u,anchorAttributes:h},N),u?null:r.createElement("span",{className:b.icon},r.createElement(R,{name:"angle-right"})))}const ge=r.forwardRef(({items:e},t)=>r.createElement("div",{ref:t,className:m["breadcrumbs-skeleton"]},e.map((o,l)=>r.createElement(W,{itemIndex:l,totalCount:e.length,text:o.text,key:l})))),he="Show path",Ee=({ariaLabel:e,triggerRef:t,testUtilsClass:o,isOpen:l,onClick:s})=>r.createElement(ee,{ref:t,className:o,onClick:a=>{a.preventDefault(),s()},ariaExpanded:l,"aria-haspopup":!0,ariaLabel:e,variant:"breadcrumb-group",formAction:"none"},"..."),we=({ariaLabel:e,dropdownItems:t,onDropdownItemClick:o,onDropdownItemFollow:l,visible:s})=>{var a;const c=re("breadcrumb-group");return r.createElement("li",{className:g(m.ellipsis,s&&m.visible)},r.createElement(M,{ariaLabel:(a=c("expandAriaLabel",e))!==null&&a!==void 0?a:he,items:t,onItemClick:o,onItemFollow:l,customTriggerBuilder:Ee,linkStyle:!0,analyticsMetadataTransformer:u=>{var f,p;return!((f=u.detail)===null||f===void 0)&&f.id&&delete u.detail.id,!((p=u.detail)===null||p===void 0)&&p.position&&(u.detail.position=`${parseInt(u.detail.position,10)+1}`),u}}),r.createElement("span",{className:m.icon},r.createElement(R,{name:"angle-right"})))},F=(e,t)=>e.length!==t.length?!1:e.every((o,l)=>o===t[l]);function ve(e){var{items:t=[],ariaLabel:o,expandAriaLabel:l,onClick:s,onFollow:a,__internalRootRef:c,__injectAnalyticsComponentMetadata:u}=e,f=j(e,["items","ariaLabel","expandAriaLabel","onClick","onFollow","__internalRootRef","__injectAnalyticsComponentMetadata"]);for(const i of t)se("BreadcrumbGroup",i.href);const p=J(f),[h,N]=V(i=>i.borderBoxWidth),_=ne(N,c),k=v.useRef({ghost:{},real:{}}),B=(i,n,d)=>{d?k.current[i][n]=d:delete k.current[i][n]},[C,H]=v.useState({ghost:[],real:[]});v.useEffect(()=>{if(k.current){const i={ghost:[],real:[]};for(const n of Object.values(k.current.ghost)){const d=D(n).inlineSize;i.ghost.push(d)}for(const n of Object.values(k.current.real)){const d=D(n).inlineSize;i.real.push(d)}H(n=>!F(i.ghost,n.ghost)||!F(i.real,n.real)?i:n)}},[t,h]);const{collapsed:A}=fe(C.ghost,h);let y=t.map((i,n)=>{const d=n===t.length-1,G=n===0||n>A,Q={action:"click",detail:{position:`${n+1}`,label:`.${U["breadcrumb-item"]}`,href:i.href||""}};return r.createElement("li",Object.assign({className:g(m.item,!G&&m.hide),key:n},d?{}:T(Q),{ref:X=>B("real",`${n}`,X)}),r.createElement(S,{item:i,onClick:s,onFollow:a,itemIndex:n,totalCount:t.length,isTruncated:C.ghost[n]-C.real[n]>0}))});const K=t.map((i,n)=>r.createElement("li",{className:m["ghost-item"],key:n,ref:d=>B("ghost",`${n}`,d)},r.createElement(S,{item:i,itemIndex:n,totalCount:t.length,isGhost:!0}))),L=i=>{const{id:n}=i.detail;return t[parseInt(n)]};if(y.length>=2){const i=t.slice(1,1+A).map((n,d)=>({id:(d+1).toString(),text:n.text,href:n.href||"#"}));y=[y[0],r.createElement(we,{key:"ellipsis",visible:A>0,ariaLabel:l,dropdownItems:i,onDropdownItemClick:n=>E(s,w(L(n)),n),onDropdownItemFollow:n=>E(a,w(L(n)),n)}),...y.slice(1)]}const Y={name:"awsui.BreadcrumbGroup",label:{root:"self"}};return r.createElement("nav",Object.assign({},p,{className:g(m["breadcrumb-group"],p.className),"aria-label":o||void 0,ref:_},u?Object.assign({},T({component:Y})):{}),A>0&&A===t.length-1?r.createElement(ie,{items:t,onItemClick:i=>i.detail.id!==(t.length-1).toString()&&E(s,w(L(i)),i),onItemFollow:i=>i.detail.id!==(t.length-1).toString()&&E(a,w(L(i)),i)}):r.createElement("ol",{className:m["breadcrumb-group-list"]},y),r.createElement("ol",{className:g(m["breadcrumb-group-list"],m.ghost),"aria-hidden":!0,tabIndex:-1},K))}const Me=oe(ve,ge);export{ve as B,ge as a,Me as c,ue as r};
