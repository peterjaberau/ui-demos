import{f as w}from"./index-eb73e870.js";import{r as t}from"./index-2c36b58a.js";import{n as O}from"./node-belongs-c9e88748.js";import{g as D,f as U,h,a as I}from"./selectors-2871d9bb.js";const j=t.createContext({funnelInteractionId:void 0,funnelNameSelector:D(),setFunnelInteractionId:()=>{},funnelType:"single-page",optionalStepNumbers:[],totalFunnelSteps:0,funnelSubmit:()=>{},funnelCancel:()=>{},submissionAttempt:0,funnelNextOrSubmitAttempt:()=>{},funnelState:{current:"default"},errorCount:{current:0},loadingButtonCount:{current:0},latestFocusCleanupFunction:{current:void 0},isInFunnel:!1,wizardCount:{current:0}}),y=t.createContext({stepNameSelector:"",stepNumber:0,subStepCount:{current:0},isInStep:!1,funnelInteractionId:void 0,onStepChange:()=>{},subStepConfiguration:{current:new Map}}),L=t.createContext({subStepId:"",subStepSelector:"",subStepNameSelector:"",subStepRef:{current:null},isNestedSubStep:!1,mousePressed:{current:!1},isFocusedSubStep:{current:!1},focusCleanupFunction:{current:void 0}}),z=t.createContext(void 0),X=()=>{const e=t.useContext(L),{funnelInteractionId:u,funnelIdentifier:k,funnelState:b,latestFocusCleanupFunction:l}=M(),{stepNumber:F,stepIdentifier:q,stepNameSelector:N,subStepConfiguration:C}=H(),{subStepIdentifier:G,subStepId:a,subStepSelector:J,subStepNameSelector:g,subStepRef:v,isNestedSubStep:_,mousePressed:T,isFocusedSubStep:i,focusCleanupFunction:o}=e;if(_)return e;const A=s=>w(void 0,void 0,void 0,function*(){var n,d,f,p;const R=s.target;if(yield new Promise(c=>setTimeout(c,1)),document.activeElement===R&&!i.current&&(i.current=!0,u&&a)){(n=l.current)===null||n===void 0||n.call(l);const c=I(g);I(N),(p=(f=(d=C.current)===null||d===void 0?void 0:d.get(F))===null||f===void 0?void 0:f.find(r=>r.name===c))===null||p===void 0||p.number;let x=!1;o.current=()=>{var r,S,m;x||(x=!0,(m=(S=(r=C.current)===null||r===void 0?void 0:r.get(F))===null||S===void 0?void 0:S.find(B=>B.name===c))===null||m===void 0||m.number,b.current)},l.current=o.current}}),E=s=>{var n;T.current||(!v.current||!s.relatedTarget||!O(v.current,s.relatedTarget))&&(i.current=!1,u&&a&&b.current!=="cancelled"&&((n=o.current)===null||n===void 0||n.call(o)))},P=u?{[h]:a,onFocus:A,onBlur:E}:{};return Object.assign({funnelSubStepProps:P},e)},H=()=>t.useContext(y),M=()=>{const e=t.useContext(j),u=e.funnelInteractionId?{[U]:e.funnelInteractionId}:{};return Object.assign({funnelProps:u},e)},Y=()=>t.useContext(z);export{j as F,H as a,y as b,L as c,X as d,Y as e,z as f,M as u};
