import{c as C,_ as ge,e as Ye}from"./index-eb73e870.js";import{R as n,r as v}from"./index-2c36b58a.js";import"./ResizeObserver-6fd345a6.js";import{g as L}from"./attributes-9cbf7bc1.js";import{I as ke}from"./internal-fb301464.js";import{P as Ze,a as et,A as tt,b as nt,u as pe,I as le}from"./internal-1d1af924.js";import{u as at}from"./use-funnel-f65631cb.js";import{D as Oe,u as rt}from"./index-aa0176b5.js";import{O as ot}from"./index-039e8e61.js";import{u as st}from"./index-e97f25e5.js";import{u as $e}from"./index-1b07c59a.js";import{u as ce}from"./index-5c04613c.js";import{c as Ce}from"./check-safe-url-87d46dc3.js";import{I as X}from"./internal-67a4bdad.js";import{c as it}from"./index-47bb06f7.js";import{u as lt}from"./index-67c045b5.js";import{u as ct}from"./use-open-state-f9537631.js";import{i as dt,f as De}from"./index-491afaa4.js";import{K}from"./keycode-5e563e63.js";const ut=(e,t,r)=>C(e[t],r&&e[`${t}-open`]);const d={header:"awsui_header_16mm3_1azb2_145",disabled:"awsui_disabled_16mm3_1azb2_160","expandable-header":"awsui_expandable-header_16mm3_1azb2_164","rolled-down":"awsui_rolled-down_16mm3_1azb2_175",highlighted:"awsui_highlighted_16mm3_1azb2_178","is-focused":"awsui_is-focused_16mm3_1azb2_196",category:"awsui_category_16mm3_1azb2_201",expandable:"awsui_expandable_16mm3_1azb2_164","variant-navigation":"awsui_variant-navigation_16mm3_1azb2_216","expand-icon":"awsui_expand-icon_16mm3_1azb2_223","expand-icon-up":"awsui_expand-icon-up_16mm3_1azb2_240","expand-icon-right":"awsui_expand-icon-right_16mm3_1azb2_243","items-list-container":"awsui_items-list-container_16mm3_1azb2_251","in-dropdown":"awsui_in-dropdown_16mm3_1azb2_260"},gt=({item:e,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:i,highlightItem:l,disabled:u,variant:g,position:y})=>n.createElement("li",{className:C(d.category,d[`variant-${g}`],u&&d.disabled),role:"presentation","aria-disabled":u?"true":void 0},e.text&&n.createElement("p",{className:C(d.header,{[d.disabled]:u}),"aria-hidden":"true"},e.text),n.createElement("ul",{className:d["items-list-container"],role:"group","aria-label":e.text},e.items&&n.createElement(ae,{items:e.items,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:i,highlightItem:l,categoryDisabled:u,hasCategoryHeader:!!e.text,variant:g,position:y}))),pt=gt,mt=120;function me({children:e,content:t,position:r="right",className:s}){const a=v.useRef(null),o=it(a),{open:c,triggerProps:i}=ft(o?0:mt),l=lt(a);return n.createElement("span",Object.assign({ref:a},i,{className:s}),e,c&&n.createElement(Ze,null,n.createElement("span",{className:l},n.createElement(et,{size:"small",fixedWidth:!1,position:r,trackRef:a,arrow:u=>n.createElement(tt,{position:u}),renderWithPortal:!0,zIndex:7e3},n.createElement(nt,{dismissButton:!1,dismissAriaLabel:void 0,header:null,onDismiss:()=>{},overflowVisible:"both"},n.createElement("span",{"data-testid":"button-dropdown-disabled-reason",role:"tooltip"},t))))))}function ft(e){const t=v.useRef(),[r,s]=v.useState(!1),a=()=>{clearTimeout(t.current),s(!1)},o=()=>s(!0);return{open:r,triggerProps:{onBlur:a,onFocus:()=>{t.current=setTimeout(o,e)},onKeyDown:g=>{r&&_t(g.key)&&(g.preventDefault(),g.stopPropagation(),a())}}}}const _t=e=>e==="Escape"||e==="Esc",fe=({disabled:e,parent:t,expanded:r})=>({role:"menuitem","aria-disabled":e?"true":void 0,"aria-haspopup":t?"true":void 0,"aria-expanded":r?"true":t?"false":void 0}),ht=({disabled:e,checked:t})=>({role:"menuitemcheckbox","aria-disabled":e?"true":void 0,"aria-checked":t?"true":"false"}),bt=({item:e,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:i,highlightItem:l,disabled:u,expandToViewport:g,variant:y,position:w})=>{const f=a(e),E=c(e),b=o(e),k=n.useRef(null),$=v.useRef(null);v.useEffect(()=>{k.current&&f&&!E&&k.current.focus()},[E,f]);const O=H=>{var A;u||(H.preventDefault(),r(e,H),(A=k.current)===null||A===void 0||A.focus())},m=()=>{l(e)},I=!!e.disabledReason&&e.disabled,{targetProps:N,descriptionEl:h}=pe(e.disabledReason),x=e.text&&n.createElement("span",Object.assign({className:C(d.header,d["expandable-header"],d[`variant-${y}`],{[d.disabled]:u,[d.highlighted]:f,[d["is-focused"]]:b}),tabIndex:f?0:-1,ref:k},fe({parent:!0,expanded:E,disabled:u}),I?N:{},L(u?{}:{action:"expand",detail:{position:w||"0",label:{root:"self"},id:e.id||"",expanded:`${!E}`}})),e.text,n.createElement("span",{className:C(d["expand-icon"],d["expand-icon-right"])},n.createElement(X,{name:"caret-down-filled"})));let D;return I?D=n.createElement(me,{content:e.disabledReason},x,h):u?D=x:D=n.createElement(Oe,{open:E,stretchWidth:!1,interior:!0,expandToViewport:g,trigger:x},e.items&&E&&n.createElement("ul",{role:"menu","aria-label":e.text,className:C(d["items-list-container"],d["in-dropdown"])},n.createElement(ae,{items:e.items,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:i,highlightItem:l,variant:y,position:w}))),n.createElement("li",{className:C(d.category,d[`variant-${y}`],d.expandable,{[d.expanded]:E,[d.disabled]:u,[d.highlighted]:f}),role:"presentation","data-testid":e.id,ref:$,onClick:O,onMouseEnter:m,onTouchStart:m},D)},xt=bt;const ee={root:"awsui_root_14cnr_13zum_145",trigger:"awsui_trigger_14cnr_13zum_179",dropdown:"awsui_dropdown_14cnr_13zum_182",nowrap:"awsui_nowrap_14cnr_13zum_193",open:"awsui_open_14cnr_13zum_196"},wt=({children:e,trigger:t,open:r})=>n.createElement("div",{className:ee.root},n.createElement("div",{className:ee.trigger},t),n.createElement("div",{className:C(ee.dropdown,{[ee.open]:r}),"data-open":r},e)),vt=wt,Et=({item:e,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:i,highlightItem:l,disabled:u,variant:g,position:y})=>{const w=a(e),f=c(e),E=o(e),b=n.useRef(null);v.useEffect(()=>{b.current&&w&&!f&&b.current.focus()},[f,w]);const k=x=>{u||(x.preventDefault(),r(e,x))},$=()=>{l(e)},O=!!e.disabledReason&&e.disabled,{targetProps:m,descriptionEl:I}=pe(e.disabledReason),N=e.text&&n.createElement("span",Object.assign({className:C(d.header,d["expandable-header"],d[`variant-${g}`],{[d.highlighted]:w,[d["rolled-down"]]:f,[d.disabled]:u,[d["is-focused"]]:E}),tabIndex:w?0:-1,ref:b},fe({parent:!0,disabled:u,expanded:f}),O?m:{},L(u?{}:{action:"expand",detail:{position:y||"0",label:{root:"self"},id:e.id||"",expanded:`${!f}`}})),e.text,n.createElement("span",{className:C(d["expand-icon"],{[d["expand-icon-up"]]:f})},n.createElement(X,{name:"caret-down-filled"})));let h;return O?h=n.createElement(n.Fragment,null,I,n.createElement(me,{content:e.disabledReason},N)):u?h=N:h=n.createElement(vt,{open:f,trigger:N},e.items&&f&&n.createElement("ul",{role:"menu","aria-label":e.text,className:d["items-list-container"]},n.createElement(ae,{items:e.items,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:i,highlightItem:l,hasCategoryHeader:!0,variant:g,position:y}))),n.createElement("li",{className:C(d.category,d[`variant-${g}`],d.expandable,{[d.expanded]:f,[d.disabled]:u,[d.highlighted]:w||f,[d.expandable]:!0}),role:"presentation",onClick:k,onMouseEnter:$,onTouchStart:$,"data-testid":e.id},h)},It=Et;function yt(e){const t=new Map,r=new Map,s=[];return te(e,(a,o)=>{const c=de(o);t.set(a,c),r.set(c,a),s.push(c)}),{getItem:a=>{const o=de(a);return r.get(o)||null},getItemIndex:a=>{const o=t.get(a);if(!o)throw new Error("Invariant violation: item is not found.");return ue(o)},getSequentialIndex:(a,o)=>{const c=de(a),i=s.indexOf(c),l=s[i+o];return l?ue(l):null},getParentIndex:a=>{const o=t.get(a);if(!o)throw new Error("Invariant violation: item is not found.");const c=ue(o);return c.length===1?null:c.slice(0,c.length-1)}}}function te(e,t,r=[]){e.forEach((s,a)=>{const o=[...r,a];t(s,o),W(s)&&te(s.items,t,o)})}function de(e){return e.join("-")}function ue(e){return e.split("-").map(t=>parseInt(t))}const W=e=>e&&e.items!==void 0,F=e=>e&&e.href!==void 0,ne=e=>e&&e.itemType==="checkbox",Te=e=>e.external?"_blank":void 0;function Ne(e,t){for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function _e(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function an(e){let t=!1;return te(e,r=>{r.itemType==="checkbox"&&(t=!0)}),t}function rn(e){let t=!1;return te(e,r=>{r.disabledReason&&(t=!0)}),t}const Q={"trigger-label":"awsui_trigger-label_q2oen_w271r_5","menu-item":"awsui_menu-item_q2oen_w271r_6","main-action-label":"awsui_main-action-label_q2oen_w271r_7"};const M={"item-element":"awsui_item-element_93a1u_1tevh_145",disabled:"awsui_disabled_93a1u_1tevh_157","show-divider":"awsui_show-divider_93a1u_1tevh_164",highlighted:"awsui_highlighted_93a1u_1tevh_167","is-focused":"awsui_is-focused_93a1u_1tevh_182","menu-item":"awsui_menu-item_93a1u_1tevh_187","link-style":"awsui_link-style_93a1u_1tevh_199","current-breadcrumb":"awsui_current-breadcrumb_93a1u_1tevh_235","has-category-header":"awsui_has-category-header_93a1u_1tevh_246","item-tooltip-wrapper":"awsui_item-tooltip-wrapper_93a1u_1tevh_246","has-checkmark":"awsui_has-checkmark_93a1u_1tevh_246",icon:"awsui_icon_93a1u_1tevh_250",checkmark:"awsui_checkmark_93a1u_1tevh_254","external-icon":"awsui_external-icon_93a1u_1tevh_261"},kt=({position:e="1",item:t,disabled:r,onItemActivate:s,highlighted:a,highlightItem:o,showDivider:c,hasCategoryHeader:i,isKeyboardHighlighted:l=!1,analyticsMetadataTransformer:u=w=>w,variant:g="normal",linkStyle:y})=>{const w=F(t),f=ne(t),E=k=>{k.stopPropagation(),w||k.preventDefault(),r||s(t,k)},b=()=>{o(t)};return n.createElement("li",Object.assign({className:C(M["item-element"],M[`variant-${g}`],{[M.highlighted]:a,[M.disabled]:r,[M["has-category-header"]]:i,[M["has-checkmark"]]:f,[M["show-divider"]]:c,[M["is-focused"]]:l}),role:"presentation","data-testid":t.id,"data-description":t.description,onClick:E,onMouseEnter:b,onTouchStart:b},L(r?{}:u({action:"click",detail:{position:e,id:t.id,label:`.${Q["menu-item"]}`,href:t.href||""}}))),n.createElement(Ct,{item:t,disabled:r,highlighted:a,linkStyle:y}))};function Ct({item:e,disabled:t,highlighted:r,linkStyle:s}){const a=v.useRef(null),o=ne(e),c=!o&&e.isCurrentBreadcrumb;v.useEffect(()=>{r&&a.current&&a.current.focus()},[r]);const i=t&&e.disabledReason,{targetProps:l,descriptionEl:u}=pe(e.disabledReason),g=Object.assign(Object.assign({"aria-label":e.ariaLabel,className:C(M["menu-item"],Q["menu-item"],s&&M["link-style"],c&&M["current-breadcrumb"]),"aria-current":c,lang:e.lang,ref:a,tabIndex:r?0:-1},o?ht({disabled:t,checked:e.checked}):fe({disabled:t})),i?l:{}),y=F(e)?n.createElement("a",Object.assign({},g,{href:t?void 0:e.href,target:Te(e),rel:e.external?"noopener noreferrer":void 0}),n.createElement(Me,{item:e,disabled:t})):n.createElement("span",Object.assign({},g),n.createElement(Me,{item:e,disabled:t})),{position:w}=rt(),f=w==="bottom-left"||w==="top-left"?"left":"right";return i?n.createElement(me,{content:e.disabledReason,position:f,className:M["item-tooltip-wrapper"]},y,u):y}const Me=({item:e,disabled:t})=>{const r=!!(e.iconName||e.iconUrl||e.iconSvg),s=F(e)&&e.external,a=ne(e);return n.createElement(n.Fragment,null,a&&n.createElement(Nt,{checked:e.checked,disabled:t}),r&&n.createElement(Dt,{name:e.iconName,url:e.iconUrl,svg:e.iconSvg,alt:e.iconAlt,badge:e.badge}),e.text,s&&n.createElement(Mt,{disabled:t,ariaLabel:e.externalIconAriaLabel}))},Dt=e=>n.createElement("span",{className:M.icon},n.createElement(X,Object.assign({},e))),Nt=({disabled:e,checked:t})=>{const r=n.createElement(X,{variant:e?"disabled":"normal",name:"check"});return n.createElement("span",{className:C(M.icon,M.checkmark,{[M.disabled]:e}),"aria-hidden":"true",style:{visibility:t?"visible":"hidden"}},r)},Mt=({disabled:e,ariaLabel:t})=>{const r=n.createElement(X,{variant:e?"disabled":"normal",name:"external"});return n.createElement("span",{className:M["external-icon"],role:t?"img":void 0,"aria-label":t},r)},Ot=kt;function ae({items:e,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:i,highlightItem:l,categoryDisabled:u=!1,hasExpandableGroups:g=!1,hasCategoryHeader:y=!1,expandToViewport:w=!1,variant:f="normal",analyticsMetadataTransformer:E,position:b,linkStyle:k}){const $=$e(),O=e.map((m,I)=>{var N,h,x,D;if(!W(m)){const H=I===e.length-1&&!i||W(e[I+1]);return n.createElement(Ot,{key:I,item:m,onItemActivate:t,disabled:(N=m.disabled)!==null&&N!==void 0?N:u,highlighted:a(m),isKeyboardHighlighted:o(m),highlightItem:l,showDivider:H,hasCategoryHeader:y,variant:f,position:`${b?`${b},`:""}${I+1}`,analyticsMetadataTransformer:E,linkStyle:k})}return g?m.text?$?n.createElement(It,{key:I,item:m,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:i&&I===e.length-1,highlightItem:l,disabled:(h=m.disabled)!==null&&h!==void 0?h:!1,variant:f,position:`${b?`${b},`:""}${I+1}`}):n.createElement(xt,{key:I,item:m,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:!0,highlightItem:l,disabled:(x=m.disabled)!==null&&x!==void 0?x:!1,expandToViewport:w,variant:f,position:`${b?`${b},`:""}${I+1}`}):null:n.createElement(pt,{key:I,item:m,onItemActivate:t,onGroupToggle:r,targetItem:s,isHighlighted:a,isKeyboardHighlight:o,isExpanded:c,lastInDropdown:i&&I===e.length-1,highlightItem:l,disabled:(D=m.disabled)!==null&&D!==void 0?D:!1,variant:f,position:`${b?`${b},`:""}${I+1}`})});return n.createElement(n.Fragment,null,O)}function $t({startIndex:e,expandedIndex:t,getNext:r,hasExpandableGroups:s,isInRestrictedView:a}){const o=c=>{var i;const l=r(c);return l?!((i=l.parent)===null||i===void 0)&&i.disabled&&s||W(l.item)&&!s||s&&!a&&!Tt(e,l.index)||s&&a&&!At(l.index,t)&&!Rt(t,l.index)?o(l.index):l.index:null};return o(e)}function Tt(e,t){return _e(e.slice(0,-1),t.slice(0,-1))}function At(e,t){return e.length===t.length}function Rt(e,t){return _e(e,t.slice(0,-1))}function Pt({items:e,hasExpandableGroups:t,isInRestrictedView:r=!1}){const[s,a]=v.useState([]),[o,c]=v.useState([]),[i,l]=v.useState(!0),{getItem:u,getItemIndex:g,getSequentialIndex:y,getParentIndex:w}=v.useMemo(()=>yt(e),[e]),f=v.useMemo(()=>u(s),[s,u]),E=v.useCallback(h=>{const x=g(h);return Ne(x,s)},[s,g]),b=v.useCallback(h=>{const x=g(h);return!i&&_e(x,s)},[s,g,i]),k=v.useCallback(h=>{const x=g(h);return Ne(x,o)},[o,g]),$=v.useCallback(h=>{const D=$t({startIndex:s,expandedIndex:o,getNext:H=>{const A=y(H,h),S=u(A||[-1]);if(!A||!S)return null;const B=w(S),R=B&&u(B);return{index:A,item:S,parent:R||void 0}},hasExpandableGroups:t,isInRestrictedView:r});D&&a(D)},[s,o,u,y,w,t,r]),O=v.useCallback(h=>{a(g(h))},[g]),m=v.useCallback(h=>{const x=h?g(h):s,D=[...x,0];a(r?x:D),c(x)},[s,g,r]),I=v.useCallback(()=>{o.length>0&&(a(o),c(o.slice(0,-1)))},[o]),N=v.useCallback(()=>{a([]),c([])},[]);return{targetItem:f,isHighlighted:E,isKeyboardHighlight:b,isExpanded:k,moveHighlight:$,highlightItem:O,expandGroup:m,collapseGroup:I,reset:N,setIsUsingMouse:l}}function Ht({items:e,onItemClick:t,onItemFollow:r,onReturnFocus:s,hasExpandableGroups:a,isInRestrictedView:o=!1,expandToViewport:c=!1}){const{targetItem:i,isHighlighted:l,isKeyboardHighlight:u,isExpanded:g,highlightItem:y,moveHighlight:w,expandGroup:f,collapseGroup:E,reset:b,setIsUsingMouse:k}=Pt({items:e,hasExpandableGroups:a,isInRestrictedView:o}),$=ct({onClose:b}),{isOpen:O,closeDropdown:m}=$,I=ge($,["isOpen","closeDropdown"]),N=(p={})=>{var P;const G=(P=p.moveHighlightOnOpen)!==null&&P!==void 0?P:!0;!O&&G&&w(1),I.toggleDropdown()},h=p=>g(p)?E():f(p),x=(p,P)=>{const G=ne(p),j=F(p),Y={id:p.id||"undefined",href:j?p.href:void 0,external:j?p.external:void 0,target:j?Te(p):void 0,checked:G?!p.checked:void 0};r&&j&&dt(P)&&De(r,Y,P),t&&De(t,Y,P),s(),m()},D=p=>{O&&w(p)},H=p=>{N(),p.preventDefault()},A=p=>{i?W(i)?h(i):x(i,p):O&&!o?N():H(p)},S=(p,P)=>{k(!1),!(i&&F(i)&&P)&&(p.preventDefault(),A(p))};return{isOpen:O,targetItem:i,isHighlighted:l,isKeyboardHighlight:u,isExpanded:g,highlightItem:y,onKeyDown:p=>{switch(k(!1),p.keyCode){case K.down:{D(1),p.preventDefault();break}case K.up:{D(-1),p.preventDefault();break}case K.space:{p.preventDefault();break}case K.enter:{i!=null&&i.disabled||S(p,!0);break}case K.left:case K.right:{i&&!i.disabled&&W(i)&&!g(i)?f():a&&E(),p.preventDefault();break}case K.escape:{s(),m(),p.preventDefault(),O&&p.stopPropagation();break}case K.tab:{c&&s(),m();break}}},onKeyUp:p=>{p.keyCode===K.space&&!(i!=null&&i.disabled)&&S(p)},onItemActivate:x,onGroupToggle:h,toggleDropdown:N,closeDropdown:m,setIsUsingMouse:k}}const _={"button-dropdown":"awsui_button-dropdown_sne0l_1r0xx_145","full-width":"awsui_full-width_sne0l_1r0xx_148","items-list-container":"awsui_items-list-container_sne0l_1r0xx_153","awsui-motion-fade-in-0":"awsui_awsui-motion-fade-in-0_sne0l_1r0xx_1",rotate:"awsui_rotate_sne0l_1r0xx_172","rotate-open":"awsui_rotate-open_sne0l_1r0xx_186",header:"awsui_header_sne0l_1r0xx_190",title:"awsui_title_sne0l_1r0xx_201",description:"awsui_description_sne0l_1r0xx_202","trigger-button":"awsui_trigger-button_sne0l_1r0xx_206",loading:"awsui_loading_sne0l_1r0xx_210","split-trigger-wrapper":"awsui_split-trigger-wrapper_sne0l_1r0xx_214","trigger-item":"awsui_trigger-item_sne0l_1r0xx_217","has-no-text":"awsui_has-no-text_sne0l_1r0xx_226","visual-refresh":"awsui_visual-refresh_sne0l_1r0xx_229","variant-normal":"awsui_variant-normal_sne0l_1r0xx_240","split-trigger":"awsui_split-trigger_sne0l_1r0xx_214","dropdown-trigger":"awsui_dropdown-trigger_sne0l_1r0xx_251","main-action-full-width":"awsui_main-action-full-width_sne0l_1r0xx_255","main-action-trigger-full-width":"awsui_main-action-trigger-full-width_sne0l_1r0xx_260","test-utils-button-trigger":"awsui_test-utils-button-trigger_sne0l_1r0xx_264"},St=n.forwardRef((e,t)=>{var r,{items:s,variant:a="normal",loading:o=!1,loadingText:c,disabled:i=!1,disabledReason:l,expandableGroups:u=!1,children:g,onItemClick:y,onItemFollow:w,customTriggerBuilder:f,expandToViewport:E,ariaLabel:b,title:k,description:$,preferCenter:O,mainAction:m,showMainActionOnly:I,__internalRootRef:N,analyticsMetadataTransformer:h,linkStyle:x,fullWidth:D}=e,H=ge(e,["items","variant","loading","loadingText","disabled","disabledReason","expandableGroups","children","onItemClick","onItemFollow","customTriggerBuilder","expandToViewport","ariaLabel","title","description","preferCenter","mainAction","showMainActionOnly","__internalRootRef","analyticsMetadataTransformer","linkStyle","fullWidth"]);const A=$e(),S=ce("dropdown");for(const T of s)F(T)&&Ce("ButtonDropdown",T.href);m&&Ce("ButtonDropdown",m.href);const B=m&&(a==="primary"||a==="normal"),{isOpen:R,targetItem:p,isHighlighted:P,isKeyboardHighlight:G,isExpanded:j,highlightItem:Y,onKeyDown:Ae,onKeyUp:Re,onItemActivate:Pe,onGroupToggle:He,toggleDropdown:he,closeDropdown:Se,setIsUsingMouse:Ke}=Ht({items:s,onItemClick:y,onItemFollow:w,onReturnFocus:()=>{var T;return(T=q.current)===null||T===void 0?void 0:T.focus({preventScroll:!0})},expandToViewport:E,hasExpandableGroups:u,isInRestrictedView:A}),be=()=>{Ke(!0)},xe=Ye(H),we=v.useRef(null),q=v.useRef(null);st(t,B?we:q);const ve=()=>{!o&&!i&&he({moveHighlightOnOpen:!A})},V=!o&&!i,J=!!D&&(a==="primary"||a==="normal"),ze=a==="navigation"?void 0:a==="inline-icon"?"inline-icon":a,Le=a==="icon"||a==="inline-icon"?{iconName:"ellipsis"}:{iconName:"caret-down-filled",iconAlign:"right",__iconClass:ut(_,"rotate",V&&R)},U=Object.assign(Object.assign({className:C(_["trigger-button"],_["test-utils-button-trigger"],Q["trigger-label"])},Le),{variant:ze,loading:o,loadingText:c,disabled:i,disabledReason:l,onClick:T=>{T.preventDefault(),ve()},ariaLabel:b,ariaExpanded:V&&R,formAction:"none",__nativeAttributes:{"aria-haspopup":!0}}),Ee=ce("awsui-button-dropdown__trigger"),Be=()=>{const T=s.flatMap(z=>"items"in z?z.items:z);return a==="icon"&&!!(T!=null&&T.find(z=>{if("badge"in z)return z.badge}))};let Z=null;const re=i?{}:{action:"expand",detail:{expanded:`${!R}`,label:`.${Q["trigger-label"]}`}};if(f)Z=n.createElement("div",Object.assign({className:_["dropdown-trigger"]},L(re)),f({testUtilsClass:_["test-utils-button-trigger"],ariaExpanded:V&&R,onClick:ve,triggerRef:q,ariaLabel:b,disabled:i,disabledReason:l,isOpen:R}));else if(B){const{text:T,iconName:z,iconAlt:Ue,iconSvg:We,iconUrl:Fe,external:Ge,externalIconAriaLabel:qe}=m,se=ge(m,["text","iconName","iconAlt","iconSvg","iconUrl","external","externalIconAriaLabel"]),Ve=Ge?{iconName:"external",iconAlign:"right"}:{iconName:z,iconAlt:Ue,iconSvg:We,iconUrl:Fe},Je=qe?`${(r=m.ariaLabel)!==null&&r!==void 0?r:m.text} ${m.externalIconAriaLabel}`:m.ariaLabel,Qe=!T,Xe=n.createElement(le,Object.assign({ref:we},se,Ve,{className:C(_["trigger-button"],Qe&&_["has-no-text"],_["visual-refresh"],J&&_["main-action-full-width"]),variant:a,ariaLabel:Je,formAction:"none"}),T);Z=n.createElement("div",{role:"group","aria-label":b,className:_["split-trigger-wrapper"]},n.createElement("div",Object.assign({className:C(_["trigger-item"],_["split-trigger"],_[`variant-${a}`],se.disabled&&_.disabled,se.loading&&_.loading),onClick:Se,onKeyDown:ie=>ie.stopPropagation(),onKeyUp:ie=>ie.stopPropagation()},L({action:"click",detail:{label:`.${Q["main-action-label"]}`}})),Xe),!I&&n.createElement("div",Object.assign({className:C(_["trigger-item"],_["dropdown-trigger"],_["visual-refresh"],_[`variant-${a}`],U.disabled&&_.disabled,U.loading&&_.loading)},L(re)),n.createElement(le,Object.assign({ref:q},U,{className:C(U.className,{[_["main-action-trigger-full-width"]]:J}),__emitPerformanceMarks:!1}),g)))}else Z=n.createElement("div",Object.assign({className:_["dropdown-trigger"]},L(re)),n.createElement(le,Object.assign({ref:q,id:Ee},U,{className:C(U.className,{[_["full-width"]]:J,[_.loading]:J&&!!o}),badge:Be(),fullWidth:D}),g));const Ie=k||$,ye=ce("awsui-button-dropdown__header"),je=!b&&!m&&a!=="icon"&&a!=="inline-icon",{loadingButtonCount:oe}=at();return v.useEffect(()=>{if(o)return oe.current++,()=>{oe.current--}},[o,oe]),n.createElement("div",Object.assign({},xe,{onKeyDown:Ae,onKeyUp:Re,onMouseDown:be,onMouseMove:be,className:C(_["button-dropdown"],_[`variant-${a}`],J&&_["full-width"],xe.className),"aria-owns":E&&R?S:void 0,ref:N}),n.createElement(Oe,{open:V&&R,stretchWidth:!1,stretchTriggerHeight:a==="navigation",expandToViewport:E,preferCenter:O,onDropdownClose:()=>he(),trigger:Z,dropdownId:S},Ie&&n.createElement("div",{className:_.header,id:ye},k&&n.createElement("div",{className:_.title},n.createElement(ke,{fontSize:"heading-s",fontWeight:"bold",color:"inherit",tagOverride:"h2",margin:{vertical:"n",horizontal:"n"}},k)),$&&n.createElement(ke,{fontSize:"body-s"},n.createElement("span",{className:_.description},$))),n.createElement(ot,{open:V&&R,position:"static",role:"menu",decreaseBlockMargin:!0,ariaLabel:b,ariaLabelledby:Ie?ye:je?Ee:void 0,statusType:"finished"},n.createElement(ae,{items:s,onItemActivate:Pe,onGroupToggle:He,hasExpandableGroups:u,targetItem:p,isHighlighted:P,isKeyboardHighlight:G,isExpanded:j,lastInDropdown:!0,highlightItem:Y,expandToViewport:E,variant:a,analyticsMetadataTransformer:h,linkStyle:x}))))}),on=St;export{on as I,rn as a,Q as b,_ as c,an as h,F as i,ut as s};
