import{_ as M,e as se,c as m,b as ce,d as ie}from"./index-eb73e870.js";import{R as a,r as p}from"./index-2c36b58a.js";import"./ResizeObserver-6fd345a6.js";import{u as le}from"./index-47bb06f7.js";import{c as ue}from"./internal-1d1af924.js";import{c as de}from"./utils-e7109a95.js";import{u as _e}from"./form-field-context-fcff921e.js";import{a as z,b as y}from"./index-491afaa4.js";import{a0 as me,a1 as pe,a2 as ye}from"./tokens-4068cfaf.js";const t={root:"awsui_root_55fkh_1cygr_146","textarea-readonly":"awsui_textarea-readonly_55fkh_1cygr_185",disabled:"awsui_disabled_55fkh_1cygr_190","textarea-invalid":"awsui_textarea-invalid_55fkh_1cygr_198","textarea-warning":"awsui_textarea-warning_55fkh_1cygr_223",textarea:"awsui_textarea_55fkh_1cygr_185",invalid:"awsui_invalid_55fkh_1cygr_323",warning:"awsui_warning_55fkh_1cygr_323","textarea-wrapper":"awsui_textarea-wrapper_55fkh_1cygr_342",button:"awsui_button_55fkh_1cygr_346","action-button":"awsui_action-button_55fkh_1cygr_351","secondary-content":"awsui_secondary-content_55fkh_1cygr_376","with-paddings":"awsui_with-paddings_55fkh_1cygr_411","secondary-actions":"awsui_secondary-actions_55fkh_1cygr_421"};const w={root:"awsui_root_nr3gs_n93je_5",textarea:"awsui_textarea_nr3gs_n93je_9","action-button":"awsui_action-button_nr3gs_n93je_13","secondary-actions":"awsui_secondary-actions_nr3gs_n93je_17","secondary-content":"awsui_secondary-content_nr3gs_n93je_21"},we=a.forwardRef((s,C)=>{var{value:n,actionButtonAriaLabel:g,actionButtonIconName:c,actionButtonIconUrl:i,actionButtonIconSvg:l,actionButtonIconAlt:f,ariaLabel:u,autoComplete:b,autoFocus:h,disableActionButton:I,disableBrowserAutocorrect:A,disabled:k,maxRows:x=3,minRows:G,name:X,onAction:$,onBlur:D,onChange:q,onFocus:F,onKeyDown:S,onKeyUp:j,placeholder:J,readOnly:v,spellcheck:Q,secondaryActions:R,secondaryContent:H,disableSecondaryActionsPaddings:V,disableSecondaryContentPaddings:W,__internalRootRef:Y=null}=s,K=M(s,["value","actionButtonAriaLabel","actionButtonIconName","actionButtonIconUrl","actionButtonIconSvg","actionButtonIconAlt","ariaLabel","autoComplete","autoFocus","disableActionButton","disableBrowserAutocorrect","disabled","maxRows","minRows","name","onAction","onBlur","onChange","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","spellcheck","secondaryActions","secondaryContent","disableSecondaryActionsPaddings","disableSecondaryContentPaddings","__internalRootRef"]);const{ariaLabelledby:Z,ariaDescribedby:ee,controlId:te,invalid:r,warning:B}=_e(K),L=se(K),o=p.useRef(null),ae=le(o)==="compact",E=me,N=pe;p.useImperativeHandle(C,()=>({focus(...e){var _;(_=o.current)===null||_===void 0||_.focus(...e)},select(){var e;(e=o.current)===null||e===void 0||e.select()}}),[o]);const oe=e=>{S&&z(S,e),e.key==="Enter"&&!e.shiftKey&&("form"in e.target&&e.target.form!==null&&!e.isDefaultPrevented()&&e.target.form.requestSubmit(),e.preventDefault(),y($,{value:n}))},ne=e=>{y(q,{value:e.target.value}),d()},O=c||l||i,d=p.useCallback(()=>{if(o.current){o.current.style.height="auto";const e=`calc(${x<=0?3:x} * (${N} + ${E} / 2) + ${E})`,_=`calc(${o.current.scrollHeight}px)`,re=`calc(${N} +  ${ye} * 2)`;o.current.style.height=`min(max(${_}, ${re}), ${e})`}},[x,N,E]);p.useEffect(()=>{const e=()=>{d()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[d]),p.useEffect(()=>{d()},[n,d,x,ae]);const P={"aria-label":u,"aria-labelledby":Z,"aria-describedby":ee,"aria-invalid":r?"true":void 0,name:X,placeholder:J,autoFocus:h,className:m(t.textarea,w.textarea,{[t.invalid]:r,[t.warning]:B}),autoComplete:de(b),spellCheck:Q,disabled:k,readOnly:v?!0:void 0,rows:G||1,onKeyDown:oe,onKeyUp:j&&(e=>z(j,e)),value:n||"",onChange:ne,onBlur:D&&(()=>y(D)),onFocus:F&&(()=>y(F))};A&&(P.autoCorrect="off",P.autoCapitalize="off");const U=a.createElement("div",{className:t.button},a.createElement(ue,{className:m(t["action-button"],w["action-button"]),ariaLabel:g,disabled:k||v||I,__focusable:v,iconName:c,iconUrl:i,iconSvg:l,iconAlt:f,onClick:()=>y($,{value:n}),variant:"icon"}));return a.createElement("div",Object.assign({},L,{"aria-label":u,className:m(t.root,w.root,L.className,{[t["textarea-readonly"]]:v,[t["textarea-invalid"]]:r,[t["textarea-warning"]]:B&&!r,[t.disabled]:k}),ref:Y,role:"region"}),H&&a.createElement("div",{className:m(t["secondary-content"],w["secondary-content"],{[t["with-paddings"]]:!W,[t.invalid]:r,[t.warning]:B})},H),a.createElement("div",{className:t["textarea-wrapper"]},a.createElement("textarea",Object.assign({ref:o,id:te},P)),O&&!R&&U),R&&a.createElement("div",{className:m(t["secondary-actions"],w["secondary-actions"],{[t["with-paddings"]]:!V,[t.invalid]:r,[t.warning]:B})},R,O&&U))}),ge=we,T=a.forwardRef((s,C)=>{var{autoComplete:n,autoFocus:g,disableBrowserAutocorrect:c,disableActionButton:i,spellcheck:l,readOnly:f,actionButtonIconName:u,minRows:b,maxRows:h}=s,I=M(s,["autoComplete","autoFocus","disableBrowserAutocorrect","disableActionButton","spellcheck","readOnly","actionButtonIconName","minRows","maxRows"]);const A=ce("PromptInput",{props:{readOnly:f,autoComplete:n,autoFocus:g,disableBrowserAutocorrect:c,disableActionButton:i,spellcheck:l,actionButtonIconName:u,minRows:b,maxRows:h}});return a.createElement(ge,Object.assign({readOnly:f,autoComplete:n,autoFocus:g,disableBrowserAutocorrect:c,disableActionButton:i,spellcheck:l,actionButtonIconName:u,minRows:b,maxRows:h},I,A,{ref:C}))});ie(T,"PromptInput");const ke=T;export{ke as P};
