import{_ as B,e as Z,c as ee,b as ie,d as oe}from"./index-eb73e870.js";import{R as o,r as z}from"./index-2c36b58a.js";import{g as ne}from"./external-props-f3440ca2.js";import"./ResizeObserver-6fd345a6.js";import{I as le}from"./internal-fb301464.js";import{u as te,I as re}from"./use-files-dragging-996beeef.js";import{f as ae,I as se}from"./internal-a8e67a02.js";import{I as de}from"./internal-b6a002fb.js";import{F as me,b as ce,C as ue}from"./internal-4ec290ce.js";import{u as fe}from"./context-d1fbdd85.js";import{b as C}from"./index-491afaa4.js";import{u as pe,t as y}from"./dismiss-button-daa4f835.js";import{u as ve}from"./index-33af1cce.js";import{u as S}from"./index-5c04613c.js";import{I as Fe}from"./internal-90218b53.js";import{u as ge}from"./form-field-context-fcff921e.js";import{j as he}from"./join-strings-170e7968.js";const k={root:"awsui_root_1ubbm_1iir1_9",hints:"awsui_hints_1ubbm_1iir1_10"},we=o.forwardRef(be);function be(f,w){var s,d,m,{accept:p,ariaRequired:v,multiple:n=!1,onChange:F,value:r,tokenLimit:P,showFileSize:U,showFileLastModified:$,showFileThumbnail:N,i18nStrings:e,__internalRootRef:j=null,constraintText:g,errorText:a,warningText:h,fileErrors:c,fileWarnings:b,fileTokenAlignment:q="vertical"}=f,u=B(f,["accept","ariaRequired","multiple","onChange","value","tokenLimit","showFileSize","showFileLastModified","showFileThumbnail","i18nStrings","__internalRootRef","constraintText","errorText","warningText","fileErrors","fileWarnings","fileTokenAlignment"]);const[W,L]=z.useState(null),V=pe({nextFocusIndex:W,onFocusMoved:i=>{i.focus(),L(null)},listItemSelector:`.${y["list-item"]}`,showMoreSelector:`.${y.toggle}`,fallbackSelector:`.${ae["file-input"]}`}),l=fe("file-upload"),x=Z(u),I={showFileSize:U,showFileLastModified:$,showFileThumbnail:N},T=S("error-"),_=S("warning-"),R=S("constraint-text-"),O=z.useRef(null),G=ve(O,w);!n&&r.length>1;const A=i=>{const t=n?[...r,...i]:i[0]?i.slice(0,1):[...r];C(F,{value:t})},H=i=>{const t=r.filter((Ie,Y)=>Y!==i);C(F,{value:t}),L(i)},{areFilesDragging:J}=te(),E=h&&!a,M=ge(u),K=he((s=u.ariaDescribedby)!==null&&s!==void 0?s:M.ariaDescribedby,a?T:void 0,E?_:void 0,g?R:void 0),Q=!!(a||c!=null&&c.filter(Boolean).length),X=u.invalid||M.invalid||Q;return o.createElement(Fe,Object.assign({},x,{size:"xs",className:ee(x.className,k.root),__internalRootRef:j,ref:V}),o.createElement(le,null,J?o.createElement(re,{onChange:i=>A(i.detail.value)},l("i18nStrings.dropzoneText",(d=e==null?void 0:e.dropzoneText)===null||d===void 0?void 0:d.call(e,n),i=>i({multiple:`${n}`}))):o.createElement(se,{ref:G,accept:p,ariaRequired:v,multiple:n,onChange:i=>A(i.detail.value),value:r,ariaLabelledby:u.ariaLabelledby,controlId:u.controlId,ariaDescribedby:K,invalid:X},l("i18nStrings.uploadButtonText",(m=e==null?void 0:e.uploadButtonText)===null||m===void 0?void 0:m.call(e,n),i=>i({multiple:`${n}`}))),(g||a||h)&&o.createElement("div",{className:k.hints},a&&o.createElement(me,{id:T,errorIconAriaLabel:l("i18nStrings.errorIconAriaLabel",e==null?void 0:e.errorIconAriaLabel)},a),E&&o.createElement(ce,{id:_,warningIconAriaLabel:l("i18nStrings.warningIconAriaLabel",e==null?void 0:e.warningIconAriaLabel)},h),g&&o.createElement(ue,{id:R,hasValidationText:!!a||!!h},g))),r.length>0?o.createElement(de,{limit:P,alignment:q,items:r.map((i,t)=>({file:i,errorText:c==null?void 0:c[t],warningText:b==null?void 0:b[t]})),showFileLastModified:I.showFileLastModified,showFileSize:I.showFileSize,showFileThumbnail:I.showFileThumbnail,i18nStrings:{removeFileAriaLabel:l("i18nStrings.removeFileAriaLabel",e==null?void 0:e.removeFileAriaLabel,i=>t=>i({fileIndex:t+1})),limitShowFewer:l("i18nStrings.limitShowFewer",e==null?void 0:e.limitShowFewer),limitShowMore:l("i18nStrings.limitShowMore",e==null?void 0:e.limitShowMore),formatFileSize:e==null?void 0:e.formatFileSize,formatFileLastModified:e==null?void 0:e.formatFileLastModified,errorIconAriaLabel:l("i18nStrings.errorIconAriaLabel",e==null?void 0:e.errorIconAriaLabel),warningIconAriaLabel:l("i18nStrings.warningIconAriaLabel",e==null?void 0:e.warningIconAriaLabel)},onDismiss:i=>H(i.detail.fileIndex)}):null)}const D=o.forwardRef((f,w)=>{var{multiple:s,showFileSize:d,showFileLastModified:m,showFileThumbnail:p}=f,v=B(f,["multiple","showFileSize","showFileLastModified","showFileThumbnail"]);const n=ie("FileUpload",{props:{multiple:s,showFileLastModified:m,showFileSize:d,showFileThumbnail:p,tokenLimit:v.tokenLimit}}),F=ne(v);return o.createElement(we,Object.assign({ref:w,multiple:s,showFileSize:d,showFileLastModified:m,showFileThumbnail:p},F,n))});oe(D,"FileUpload");const $e=D;export{$e as F};
