import{c as R,_ as D,e as K,b as J,d as Q}from"./index-eb73e870.js";import{r as p,R as t}from"./index-2c36b58a.js";import{g as W}from"./external-props-f3440ca2.js";import"./ResizeObserver-6fd345a6.js";import{b as X}from"./utils-06561385.js";import{S as Y}from"./single-tab-stop-navigation-context-cd355dd7.js";import{f as x,h as Z}from"./index-491afaa4.js";import{u as ee}from"./index-33af1cce.js";import{K as T}from"./keycode-5e563e63.js";import{c as $}from"./circle-index-ff7c6070.js";import{h as ne}from"./handle-key-f035cd81.js";import{n as oe}from"./node-belongs-c9e88748.js";import{I as te}from"./internal-a8e67a02.js";import{i as L,I as ae,c as re}from"./internal-1d1af924.js";import{w as P}from"./logging-3d6eeea4.js";import{I as A}from"./internal-4584f44c.js";import{I as se}from"./internal-41d01643.js";import{I as ie}from"./internal-605c76be.js";const l={"button-group":"awsui_button-group_1v2mg_1s3dt_5","button-group-item":"awsui_button-group-item_1v2mg_1s3dt_9","button-group-tooltip":"awsui_button-group-tooltip_1v2mg_1s3dt_13",item:"awsui_item_1v2mg_1s3dt_17",tooltip:"awsui_tooltip_1v2mg_1s3dt_21"},ce=p.forwardRef(({item:e,showTooltip:v,onFilesChange:n},i)=>{const[b,d]=p.useState([]),f=t.useRef(null),s=!!v;return t.createElement("div",{ref:f},t.createElement(te,{className:R(l["button-group-item"]),ref:i,variant:"icon",ariaLabel:e.text,accept:e.accept,multiple:e.multiple,value:b,onChange:u=>{x(n,{id:e.id,files:u.detail.value}),d(u.detail.value)},"data-testid":e.id,__inputNativeAttributes:{"data-itemid":e.id},__inputClassName:l.item}),s&&t.createElement(L,{trackRef:f,trackKey:e.id,value:e.text,className:R(l.tooltip,l["button-group-tooltip"])}))}),le=ce,de=p.forwardRef(({item:e,showTooltip:v,showFeedback:n,onItemClick:i},b)=>{const d=t.useRef(null),f=e.iconName||e.iconUrl||e.iconSvg;f||P("ButtonGroup",`Missing icon for item with id: ${e.id}`);const s=!!(v&&!e.disabled&&!e.loading),u=!!(v&&n&&e.popoverFeedback);return t.createElement("div",{ref:d},t.createElement(ae,{variant:"icon",loading:e.loading,loadingText:e.loadingText,disabled:e.disabled,__focusable:u,iconName:f?e.iconName:"close",iconUrl:e.iconUrl,iconSvg:e.iconSvg,iconAlt:e.text,ariaLabel:e.text,onClick:w=>x(i,{id:e.id},w),ref:b,"data-testid":e.id,"data-itemid":e.id,className:R(l.item,l["button-group-item"]),__title:""},e.text),(s||u)&&t.createElement(L,{trackRef:d,trackKey:e.id,value:n&&t.createElement(A,{tagName:"span"},e.popoverFeedback)||e.text,className:R(l.tooltip,l["button-group-tooltip"])}))}),ue=de,pe=p.forwardRef(({item:e,showTooltip:v,showFeedback:n,onItemClick:i},b)=>{var d;const f=t.useRef(null),s=e.iconName||e.iconUrl||e.iconSvg,u=e.pressedIconName||e.pressedIconUrl||e.pressedIconSvg;s||P("ButtonGroup",`Missing icon for item with id: ${e.id}`),u||P("ButtonGroup",`Missing pressed icon for item with id: ${e.id}`);const w=e.pressed&&(d=e.pressedPopoverFeedback)!==null&&d!==void 0?d:e.popoverFeedback,k=v&&!e.disabled&&!e.loading,g=v&&n&&w;return t.createElement("div",{ref:f},t.createElement(se,{variant:"icon",pressed:e.pressed,loading:e.loading,loadingText:e.loadingText,disabled:e.disabled,iconName:s?e.iconName:"close",iconUrl:e.iconUrl,iconSvg:e.iconSvg,pressedIconName:s?e.pressedIconName:"close",pressedIconUrl:e.pressedIconUrl,pressedIconSvg:e.pressedIconUrl,ariaLabel:e.text,onChange:E=>x(i,{id:e.id,pressed:E.detail.pressed}),ref:b,"data-testid":e.id,"data-itemid":e.id,className:R(l.item,l["button-group-item"]),__title:""},e.text),(k||g)&&t.createElement(L,{trackRef:f,trackKey:e.id,value:n&&t.createElement(A,{tagName:"span"},w)||e.text,className:R(l.tooltip,l["button-group-tooltip"])}))}),fe=pe,ve=t.forwardRef(({item:e,showTooltip:v,onItemClick:n,expandToViewport:i},b)=>{const d=t.useRef(null),f=s=>{x(n,{id:s.detail.id,checked:s.detail.checked},s)};return t.createElement(ie,{ref:b,variant:"icon",items:e.items,onItemClick:f,expandToViewport:i,ariaLabel:e.text,className:l["button-group-item"],"data-testid":e.id,customTriggerBuilder:({onClick:s,isOpen:u,triggerRef:w,ariaLabel:k,ariaExpanded:g,testUtilsClass:E})=>t.createElement("div",{ref:d},!u&&v&&!e.disabled&&!e.loading&&t.createElement(L,{trackRef:d,trackKey:e.id,value:e.text,className:R(l.tooltip,l["button-group-tooltip"])}),t.createElement(re,{ref:w,variant:"icon",ariaLabel:k,"data-itemid":e.id,ariaExpanded:g,className:R(l.item,E),iconName:"ellipsis",loading:e.loading,loadingText:e.loadingText,disabled:e.disabled,onClick:s,__title:""}))})}),ge=ve;const S={root:"awsui_root_vdkpj_1lvcy_181","item-wrapper":"awsui_item-wrapper_vdkpj_1lvcy_217",group:"awsui_group_vdkpj_1lvcy_221",divider:"awsui_divider_vdkpj_1lvcy_225"},me=p.forwardRef(({item:e,dropdownExpandToViewport:v,tooltip:n,setTooltip:i,onItemClick:b,onFilesChange:d},f)=>{const s=p.useRef(null),u=p.useRef(null);p.useImperativeHandle(f,()=>({focus:()=>{var r;(r=u.current)===null||r===void 0||r.focus()}})),p.useEffect(()=>{if((n==null?void 0:n.item)!==e.id)return;const r=()=>{i(null)},h=y=>{var F;y.target&&(!((F=s.current)===null||F===void 0)&&F.contains(y.target))||r()},B=y=>{y.key==="Escape"&&r()};return window.addEventListener("pointerdown",h),window.addEventListener("keydown",B),()=>{window.removeEventListener("pointerdown",h),window.removeEventListener("keydown",B)}},[e.id,n,i]);const w=r=>{n!=null&&n.feedback||i(r?{item:e.id,feedback:!1}:null)},k=r=>{!r&&e.id!==(n==null?void 0:n.item)||i(r?{item:e.id,feedback:!1}:null)},g=r=>{"popoverFeedback"in e&&e.popoverFeedback&&i({item:e.id,feedback:!0}),x(b,r.detail,r)},E=r=>{x(d,r.detail,r),i(null)};return t.createElement("div",{key:e.id,className:S["item-wrapper"],ref:s,onPointerEnter:()=>w(!0),onPointerLeave:()=>w(!1),onFocus:r=>{r&&r.relatedTarget&&oe(s.current,r.relatedTarget)||k(!0)},onBlur:()=>k(!1)},e.type==="icon-button"&&t.createElement(ue,{ref:u,item:e,onItemClick:g,showTooltip:(n==null?void 0:n.item)===e.id,showFeedback:!!(n!=null&&n.feedback)}),e.type==="icon-toggle-button"&&t.createElement(fe,{ref:u,item:e,onItemClick:g,showTooltip:(n==null?void 0:n.item)===e.id,showFeedback:!!(n!=null&&n.feedback)}),e.type==="icon-file-input"&&t.createElement(le,{ref:u,item:e,onFilesChange:E,showTooltip:(n==null?void 0:n.item)===e.id}),e.type==="menu-dropdown"&&t.createElement(ge,{ref:u,item:e,showTooltip:(n==null?void 0:n.item)===e.id,onItemClick:g,expandToViewport:v}))}),be=me,_e=p.forwardRef((e,v)=>{var{items:n=[],onItemClick:i,onFilesChange:b,ariaLabel:d,dropdownExpandToViewport:f,__internalRootRef:s=null}=e,u=D(e,["items","onItemClick","onFilesChange","ariaLabel","dropdownExpandToViewport","__internalRootRef"]);const w=K(u),k=p.useRef(null),g=p.useRef(null),E=p.useRef(null),r=ee(E,s),h=p.useRef({}),[B,y]=p.useState(null);p.useImperativeHandle(v,()=>({focus:o=>{var a;(a=h.current[o])===null||a===void 0||a.focus()}}));function F(){var o,a;if(E.current){const m=Array.from(E.current.querySelectorAll(`.${l.item}`)).filter(c=>!c.disabled);return(a=(o=m.find(c=>c.dataset.itemid===k.current))!==null&&o!==void 0?o:m[0])!==null&&a!==void 0?a:null}return null}function M(o){var a;const _=(a=g.current)===null||a===void 0?void 0:a.getFocusTarget();_&&_.dataset.itemid!==o.dataset.itemid&&_.focus()}p.useEffect(()=>{var o;(o=g.current)===null||o===void 0||o.updateFocusTarget()});function V(o){var a;o.target instanceof HTMLElement&&o.target.dataset.itemid&&(k.current=o.target.dataset.itemid),(a=g.current)===null||a===void 0||a.updateFocusTarget()}function j(){var o;(o=g.current)===null||o===void 0||o.updateFocusTarget()}function G(o){var a;const _=(a=g.current)===null||a===void 0?void 0:a.getFocusTarget(),m=[T.right,T.left,T.end,T.home,T.pageUp,T.pageDown];if(Z(o)||m.indexOf(o.keyCode)===-1||!E.current||!_||document.activeElement&&!document.activeElement.matches(`.${l.item}`))return;o.preventDefault();const c=q(E.current),I=c.indexOf(_);ne(o,{onHome:()=>C(c[0]),onEnd:()=>C(c[c.length-1]),onInlineStart:()=>C(c[$(I-1,[0,c.length-1])]),onInlineEnd:()=>C(c[$(I+1,[0,c.length-1])])})}function C(o){o.focus()}function q(o){function a(m){var c,I;return(I=(c=g.current)===null||c===void 0?void 0:c.isRegistered(m))!==null&&I!==void 0?I:!1}function _(m){return m instanceof HTMLButtonElement?m.disabled:!1}return X(o).filter(m=>a(m)&&!_(m))}return t.createElement("div",Object.assign({},w,{className:R(S.root,l["button-group"],w.className),ref:r,role:"toolbar","aria-label":d,onFocus:V,onBlur:j,onKeyDown:G}),t.createElement(Y,{ref:g,navigationActive:!0,getNextFocusTarget:F,onUnregisterActive:M},n.map((o,a)=>{var _;const m=N=>t.createElement(be,{key:N.id,item:N,dropdownExpandToViewport:f,tooltip:B,setTooltip:y,onItemClick:i,onFilesChange:b,ref:z=>h.current[N.id]=z}),c=((_=n[a-1])===null||_===void 0?void 0:_.type)==="group",I=n[a],U=(I==null?void 0:I.type)==="group",O=c||!c&&U&&a!==0;return U&&I.items.length,t.createElement(t.Fragment,{key:o.type==="group"?a:o.id},O&&t.createElement("div",{className:S.divider}),o.type==="group"?t.createElement("div",{key:a,role:"group","aria-label":o.text,className:S.group},o.items.map(N=>m(N))):m(o))})))}),we=_e,H=t.forwardRef((e,v)=>{var{variant:n,dropdownExpandToViewport:i}=e,b=D(e,["variant","dropdownExpandToViewport"]);const d=K(b),f=J("ButtonGroup",{props:{variant:n,dropdownExpandToViewport:i}}),s=W(b);return t.createElement(we,Object.assign({},d,f,s,{ref:v,variant:n,dropdownExpandToViewport:i}))});Q(H,"ButtonGroup");const Ke=H;export{Ke as B};
