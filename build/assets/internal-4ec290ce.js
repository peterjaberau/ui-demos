import{_ as oe,e as le,c as p}from"./index-eb73e870.js";import{r as A,R as e}from"./index-2c36b58a.js";import"./ResizeObserver-6fd345a6.js";import{c as ce}from"./attributes-9cbf7bc1.js";import{I as de}from"./internal-35e701d8.js";import{u as P}from"./context-d1fbdd85.js";import{I as V}from"./internal-67a4bdad.js";import{F as me}from"./index-b7e4292a.js";import{u as _e,a as ue,d as pe}from"./use-funnel-f65631cb.js";import{k as he,l as b,m as fe,a as B,b as be}from"./selectors-2871d9bb.js";import{u as ve,F as j}from"./form-field-context-fcff921e.js";import{I as we}from"./info-link-label-context-b5baf2e5.js";import{u as ge}from"./index-5c04613c.js";import{u as Ee}from"./index-84af6bb2.js";import{I as W}from"./internal-4584f44c.js";import{j as G}from"./join-strings-170e7968.js";function u(r,a,i){if(r)return`${a}-${i}`}function Ie(r,a,i,n,l,s){return{label:u(a,r,"label"),description:u(i,r,"description"),constraint:u(n,r,"constraint"),error:u(l,r,"error"),warning:u(s,r,"warning")}}function Se({error:r,warning:a,description:i,constraint:n}){const l=[r,a,i,n].filter(_=>!!_);return l.length?l.join(" "):void 0}function ye(r,a,i){let n;return r?n=[{colspan:12},{colspan:12}]:i?n=[{colspan:{default:12,xs:8}},{colspan:{default:12,xs:4}}]:n=[{colspan:{default:12,xs:9}},{colspan:{default:12,xs:3}}],a?n:[n[0]]}const xe={label:"awsui_label_aqu00_ocied_5"};const t={"error-icon-shake-wrapper":"awsui_error-icon-shake-wrapper_14mhv_tih1t_153","warning-icon-shake-wrapper":"awsui_warning-icon-shake-wrapper_14mhv_tih1t_154","awsui-motion-shake-horizontally":"awsui_awsui-motion-shake-horizontally_14mhv_tih1t_1","error-icon-scale-wrapper":"awsui_error-icon-scale-wrapper_14mhv_tih1t_184","warning-icon-scale-wrapper":"awsui_warning-icon-scale-wrapper_14mhv_tih1t_185","awsui-motion-scale-popup":"awsui_awsui-motion-scale-popup_14mhv_tih1t_1",warning:"awsui_warning_14mhv_tih1t_154",error:"awsui_error_14mhv_tih1t_153","awsui-motion-fade-in-0":"awsui_awsui-motion-fade-in-0_14mhv_tih1t_1",root:"awsui_root_14mhv_tih1t_236",label:"awsui_label_14mhv_tih1t_269",info:"awsui_info_14mhv_tih1t_283",description:"awsui_description_14mhv_tih1t_289",constraint:"awsui_constraint_14mhv_tih1t_290",hints:"awsui_hints_14mhv_tih1t_297","constraint-has-validation-text":"awsui_constraint-has-validation-text_14mhv_tih1t_298","secondary-control":"awsui_secondary-control_14mhv_tih1t_302",controls:"awsui_controls_14mhv_tih1t_306","label-hidden":"awsui_label-hidden_14mhv_tih1t_306","label-wrapper":"awsui_label-wrapper_14mhv_tih1t_309",control:"awsui_control_14mhv_tih1t_306",error__message:"awsui_error__message_14mhv_tih1t_336",warning__message:"awsui_warning__message_14mhv_tih1t_337","visually-hidden":"awsui_visually-hidden_14mhv_tih1t_341"};function Ne({id:r,children:a,errorIconAriaLabel:i}){const n=P("form-field"),l=A.useRef(null),s=n("i18nStrings.errorIconAriaLabel",i);return e.createElement(e.Fragment,null,e.createElement("div",{id:r,className:t.error},e.createElement("div",{className:t["error-icon-shake-wrapper"]},e.createElement("div",{role:"img","aria-label":s,className:t["error-icon-scale-wrapper"]},e.createElement(V,{name:"status-negative",size:"small"}))),e.createElement("span",{className:t.error__message,ref:l},a)),e.createElement(W,{assertive:!0,tagName:"span",sources:[s,l]}))}function Ae({id:r,children:a,warningIconAriaLabel:i}){const n=P("form-field"),l=A.useRef(null),s=n("i18nStrings.warningIconAriaLabel",i);return e.createElement(e.Fragment,null,e.createElement("div",{id:r,className:t.warning},e.createElement("div",{className:t["warning-icon-shake-wrapper"]},e.createElement("div",{role:"img","aria-label":s,className:t["warning-icon-scale-wrapper"]},e.createElement(V,{name:"status-warning",size:"small"}))),e.createElement("span",{className:t.warning__message,ref:l},a)),e.createElement(W,{assertive:!0,tagName:"span",sources:[s,l]}))}function Fe({id:r,hasValidationText:a,children:i}){return e.createElement("div",{id:r,className:p(t.constraint,a&&t["constraint-has-validation-text"])},i)}function Ue(r){var{controlId:a,stretch:i=!1,label:n,info:l,i18nStrings:s,children:_,secondaryControl:v,description:w,constraintText:h,errorText:c,warningText:d,__hideLabel:g,__internalRootRef:f=null,__disableGutters:$=!1,__analyticsMetadata:m=void 0}=r,F=oe(r,["controlId","stretch","label","info","i18nStrings","children","secondaryControl","description","constraintText","errorText","warningText","__hideLabel","__internalRootRef","__disableGutters","__analyticsMetadata"]);const L=le(F),z=Ee(),M=ge("formField"),E=a||M,q=a||E,{funnelIdentifier:O,funnelInteractionId:I,submissionAttempt:U,funnelState:H,errorCount:S}=_e(),{stepIdentifier:J,stepNumber:K,stepNameSelector:R}=ue(),{subStepErrorContext:Q,subStepIdentifier:X,subStepSelector:Y,subStepNameSelector:T}=pe(),C=d&&!c,o=Ie(q,n,w,h,c,C?d:void 0),Z=Se(o),ee=ye(i,!!v,z),{ariaLabelledby:te,ariaDescribedby:re,invalid:D,warning:ne}=ve({}),k={ariaLabelledby:G(te,o.label)||void 0,ariaDescribedby:G(re,Z)||void 0,invalid:!!c||!!D,warning:!!d&&!c||!!ne&&!D},ae={[he]:o.label?b(o.label):void 0,[fe]:o.error?b(o.error):void 0};return A.useEffect(()=>{var y,x,N;if(I&&c&&H.current!=="complete"){const ie=B(R),se=B(T);return S.current++,((N=(x=(y=f==null?void 0:f.current)===null||y===void 0?void 0:y.getBoundingClientRect())===null||x===void 0?void 0:x.width)!==null&&N!==void 0?N:0)>0&&me.funnelSubStepError({funnelInteractionId:I,funnelIdentifier:O,subStepSelector:Y,subStepName:se,subStepNameSelector:T,subStepIdentifier:X,stepNumber:K,stepName:ie,stepNameSelector:R,stepIdentifier:J,subStepErrorContext:Q,fieldErrorSelector:`${b(o.error)} .${t.error__message}`,fieldLabelSelector:b(o.label),subStepAllSelector:be(),fieldIdentifier:m==null?void 0:m.instanceIdentifier,fieldErrorContext:m==null?void 0:m.errorContext}),()=>{S.current--}}},[I,c,U,S]),e.createElement("div",Object.assign({},L,{className:p(L.className,t.root),ref:f},ae,ce(F)),e.createElement("div",{className:p(t["label-wrapper"],g&&t["visually-hidden"])},n&&e.createElement("label",{className:p(t.label,xe.label),id:o.label,htmlFor:E},n),e.createElement(we.Provider,{value:o.label},!g&&l&&e.createElement("span",{className:t.info},l))),w&&e.createElement("div",{className:t.description,id:o.description},w),e.createElement("div",{className:p(t.controls,g&&t["label-hidden"])},e.createElement(de,{gridDefinition:ee,disableGutters:$},e.createElement(j.Provider,{value:Object.assign({controlId:E},k)},_&&e.createElement("div",{className:t.control},_)),v&&e.createElement(j.Provider,{value:k},e.createElement("div",{className:t["secondary-control"]},v)))),(h||c||d)&&e.createElement("div",{className:t.hints},c&&e.createElement(Ne,{id:o.error,errorIconAriaLabel:s==null?void 0:s.errorIconAriaLabel},c),C&&e.createElement(Ae,{id:o.warning,warningIconAriaLabel:s==null?void 0:s.warningIconAriaLabel},d),h&&e.createElement(Fe,{id:o.constraint,hasValidationText:!!c||!!d},h)))}export{Fe as C,Ne as F,Ue as I,xe as a,Ae as b};
