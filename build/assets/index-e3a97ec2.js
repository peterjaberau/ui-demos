import{_ as ue,b as pe,e as me,c as be,d as fe}from"./index-eb73e870.js";import{R as e,r as b}from"./index-2c36b58a.js";import{I as ge,F as ke}from"./internal-1d1af924.js";import{C as ve}from"./internal-c7b8c8f7.js";import{I as De}from"./internal-e0b4c3d3.js";import{a as _e}from"./context-d1fbdd85.js";import{D as Le}from"./index-aa0176b5.js";import{b as N}from"./index-491afaa4.js";import{u as he}from"./index-e97f25e5.js";import{u as we}from"./use-focus-tracker-83b33065.js";import{u as ye}from"./index-33af1cce.js";import{u as O}from"./index-5c04613c.js";import{K as Re}from"./keycode-5e563e63.js";import{I as Ce}from"./internal-4584f44c.js";import{r as B,g as Ie,a as Ae,n as Ee}from"./index-97bd0353.js";import{u as Fe}from"./form-field-context-fcff921e.js";import{p as xe}from"./parse-date-da8dcbcf.js";function Me({date:o,granularity:t}){const a=t==="month"?/^\d{4}-\d{2}(-\d{2})?$/:/^\d{4}-\d{2}-\d{2}$/;return!!o.match(a)}function qe({date:o,granularity:t,locale:a}){return t==="month"?B(a,o):Ie(a,o)}function Ne({date:o,granularity:t,locale:a}){return t==="month"?Ae(a,o):B(a,o)}const i={root:"awsui_root_145pa_1qkki_145","focus-lock":"awsui_focus-lock_145pa_1qkki_177",calendar:"awsui_calendar_145pa_1qkki_181","date-picker-container":"awsui_date-picker-container_145pa_1qkki_197","date-picker-trigger":"awsui_date-picker-trigger_145pa_1qkki_202","date-picker-input":"awsui_date-picker-input_145pa_1qkki_206","open-calendar-button":"awsui_open-calendar-button_145pa_1qkki_211"},P=e.forwardRef((o,t)=>{var a,g,k,{locale:H="",startOfWeek:V,isDateEnabled:S,dateDisabledReason:L,nextMonthAriaLabel:W,previousMonthAriaLabel:K,todayAriaLabel:T,i18nStrings:n,placeholder:j="",value:s="",readOnly:u=!1,disabled:f=!1,onBlur:$,autoFocus:h=!1,onChange:w,onFocus:z,name:Y,ariaLabel:y,ariaRequired:U,controlId:G,invalid:J,warning:Q,openCalendarAriaLabel:R,expandToViewport:C,granularity:d="day"}=o,I=ue(o,["locale","startOfWeek","isDateEnabled","dateDisabledReason","nextMonthAriaLabel","previousMonthAriaLabel","todayAriaLabel","i18nStrings","placeholder","value","readOnly","disabled","onBlur","autoFocus","onChange","onFocus","name","ariaLabel","ariaRequired","controlId","invalid","warning","openCalendarAriaLabel","expandToViewport","granularity"]);const{__internalRootRef:X}=pe("DatePicker",{props:{autoFocus:h,expandToViewport:C,granularity:d,readOnly:u},metadata:{hasDisabledReasons:!!L}}),Z=_e(),v=Ee("DatePicker",H||Z),D=me(I),[p,c]=b.useState(!1),{ariaLabelledby:A,ariaDescribedby:ee}=Fe(I),E=b.useRef(null),m=b.useRef(null);he(t,E);const F=b.useRef(null),ae=O("calender"),x=O("calendar-description-"),oe=ye(F,X);we({rootRef:F,onBlur:$,onFocus:z});const M=b.useCallback(()=>c(!1),[c]),ne=()=>{p||c(!0)},re=r=>{var l;r.keyCode===Re.escape&&p&&(r.stopPropagation(),(l=m.current)===null||l===void 0||l.focus(),c(!1))},te=r=>{N(w,{value:r.detail.value})},le=()=>{p||c(!1)},_=s&&s.length>=4?xe(s):null,ie=_||new Date,se=Me({date:s,granularity:d}),de=R&&R(se&&_?qe({date:_,granularity:d,locale:v}):null),q=e.createElement("div",{className:i["date-picker-trigger"]},e.createElement("div",{className:i["date-picker-input"]},e.createElement(De,{name:Y,invalid:J,warning:Q,controlId:G,ariaLabelledby:A,ariaDescribedby:ee,ariaLabel:y,ariaRequired:U,value:s,disabled:f,readOnly:u,onChange:te,onBlur:le,placeholder:j,ref:E,autoFocus:h,onFocus:M,granularity:d})),e.createElement("div",null,e.createElement(ge,{iconName:"calendar",className:i["open-calendar-button"],onClick:ne,ref:m,ariaLabel:de,disabled:f||u,formAction:"none"})));D.className=be(D.className,i.root,i["date-picker-container"]);const ce=r=>{r.preventDefault()};return e.createElement("div",Object.assign({},D,{ref:oe,onKeyDown:!f&&!u?re:void 0}),f||u?q:e.createElement(Le,{stretchWidth:!0,stretchHeight:!0,open:p,onDropdownClose:M,onMouseDown:ce,trigger:q,expandToViewport:C,scrollable:!1,dropdownId:ae},p&&e.createElement(ke,{className:i["focus-lock"],autoFocus:!0},e.createElement("div",{tabIndex:0,className:i.calendar,role:"dialog"},e.createElement(ve,{value:s,onChange:r=>{var l;N(w,r.detail),(l=m==null?void 0:m.current)===null||l===void 0||l.focus(),c(!1)},locale:v,startOfWeek:V,ariaDescribedby:x,ariaLabel:y,ariaLabelledby:A,granularity:d,isDateEnabled:S,dateDisabledReason:L,i18nStrings:Object.assign(Object.assign({},n),{todayAriaLabel:(a=n==null?void 0:n.todayAriaLabel)!==null&&a!==void 0?a:T,nextMonthAriaLabel:(g=n==null?void 0:n.nextMonthAriaLabel)!==null&&g!==void 0?g:W,previousMonthAriaLabel:(k=n==null?void 0:n.previousMonthAriaLabel)!==null&&k!==void 0?k:K})}),e.createElement(Ce,{id:x,hidden:!0,tagName:"span"},Ne({date:ie,granularity:d,locale:v}))))))});fe(P,"DatePicker");const Xe=P;export{Xe as D};
