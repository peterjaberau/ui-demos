import{_ as b,e as g,c as h,b as E,d as C}from"./index-eb73e870.js";import{r as o,R as l}from"./index-2c36b58a.js";import{f as N,b as x,i as A}from"./index-491afaa4.js";import{c as H}from"./check-safe-url-87d46dc3.js";const y=typeof window<"u";function S({hrefs:e,scrollSpyOffset:a,activeHref:i}){const[s,c]=o.useState(i),[_,u]=o.useState(!1);o.useEffect(()=>{c(i)},[i]),o.useEffect(()=>{var t;u(y&&!!document.getElementById((t=e[e.length-1])===null||t===void 0?void 0:t.slice(1)))},[e]);const m=o.useCallback(t=>{var n;return(n=document.getElementById(t.slice(1)))===null||n===void 0?void 0:n.getBoundingClientRect()},[]),k=o.useCallback(()=>_&&Math.ceil(window.scrollY)>=Math.floor(document.body.scrollHeight-window.innerHeight),[_]),p=o.useCallback(()=>e.find(t=>{const n=m(t);return n&&n.bottom<=window.innerHeight&&n.top>=a}),[m,a,e]),v=o.useCallback(()=>[...e].reverse().find(t=>{const n=m(t);return n&&n.bottom<=window.innerHeight}),[m,e]),f=o.useCallback(()=>{if(i||!y)return;const{scrollY:t}=window;document.body.scrollHeight>window.innerHeight&&k()?c(e[e.length-1]):c(p()||(t>0?v():void 0))},[i,k,p,v,e]);return o.useEffect(()=>{if(y)return f(),window.addEventListener("scroll",f,{passive:!0}),()=>{window.removeEventListener("scroll",f)}},[f]),s}const r={root:"awsui_root_swimc_y9e12_189","anchor-list":"awsui_anchor-list_swimc_y9e12_221","anchor-item":"awsui_anchor-item_swimc_y9e12_244","anchor-item--active":"awsui_anchor-item--active_swimc_y9e12_264","anchor-link":"awsui_anchor-link_swimc_y9e12_281","anchor-link--active":"awsui_anchor-link--active_swimc_y9e12_323","anchor-link-text":"awsui_anchor-link-text_swimc_y9e12_330","anchor-link-info":"awsui_anchor-link-info_swimc_y9e12_334"};const d={root:"awsui_root_17oho_5eh15_5","anchor-list":"awsui_anchor-list_17oho_5eh15_9","anchor-item--active":"awsui_anchor-item--active_17oho_5eh15_13","anchor-link":"awsui_anchor-link_17oho_5eh15_17","anchor-link-text":"awsui_anchor-link-text_17oho_5eh15_21","anchor-link-info":"awsui_anchor-link-info_17oho_5eh15_25"};function B(e){var{anchors:a,ariaLabelledby:i,onFollow:s,onActiveHrefChange:c,activeHref:_="",__internalRootRef:u=null,scrollSpyOffset:m=0}=e,k=b(e,["anchors","ariaLabelledby","onFollow","onActiveHrefChange","activeHref","__internalRootRef","scrollSpyOffset"]);const p=g(k),v=o.useMemo(()=>a.map(n=>n.href),[a]),f=o.useCallback((n,w)=>{N(s,n,w)},[s]),t=S({hrefs:v,scrollSpyOffset:m,activeHref:_});return o.useEffect(()=>{if(t){const n=a.find(w=>w.href===t);x(c,n)}},[c,a,t]),l.createElement("nav",Object.assign({},p,{ref:u,"aria-labelledby":i,className:h(p.className,r.root,d.root)}),l.createElement("ol",{className:h(r["anchor-list"],d["anchor-list"])},a.map((n,w)=>l.createElement(R,{onFollow:f,isActive:n.href===t,key:w,index:w,anchor:n}))))}const R=({anchor:e,onFollow:a,isActive:i,index:s})=>{H("AnchorNavigation",e.href);const c=o.useCallback(u=>{A(u)&&a(e,u)},[a,e]),_=h(r["anchor-item--active"],d["anchor-item--active"]);return l.createElement("li",{"data-itemid":`anchor-item-${s+1}`,className:h(r["anchor-item"],i&&_)},l.createElement("a",Object.assign({onClick:c,className:h(r["anchor-link"],d["anchor-link"],i&&r["anchor-link--active"])},i?{"aria-current":!0}:{},{href:e.href}),l.createElement("span",{className:h(r["anchor-link-text"],d["anchor-link-text"]),style:{paddingInlineStart:`${e.level*16+2}px`}},e.text),e.info&&l.createElement("span",{className:h(r["anchor-link-info"],d["anchor-link-info"])},e.info)))};function I(e){var{scrollSpyOffset:a=0}=e,i=b(e,["scrollSpyOffset"]);const s=E("AnchorNavigation");return l.createElement(B,Object.assign({scrollSpyOffset:a},i,s))}C(I,"AnchorNavigation");export{I as A};
