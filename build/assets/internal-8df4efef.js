import{_ as pe,e as Pe,c as _e}from"./index-eb73e870.js";import{r as G,R as s}from"./index-2c36b58a.js";import{u as re}from"./context-d1fbdd85.js";import{D as Re}from"./index-aa0176b5.js";import{u as Fe,a as Ce,D as de}from"./use-highlight-option-7a4dfde2.js";import{S as De}from"./index-d8010092.js";import{u as Me}from"./form-field-context-fcff921e.js";import{u as oe}from"./index-5c04613c.js";import{u as Ee,p as Ve,i as je,a as Ne,b as qe,f as B,F as Be,T as Ge,V as Ue,P as We}from"./use-select-0ff13a42.js";import{I as He}from"./internal-ab75ed5f.js";import"./ResizeObserver-6fd345a6.js";import{b as Ke}from"./index-491afaa4.js";import{j as ie}from"./join-strings-170e7968.js";function ze(S){var{options:f,filteringType:d,filteringResultsText:I,disabled:E,statusType:k,empty:U,loadingText:W,finishedText:H,errorText:K,noMatch:h,renderHighlightedAriaLive:V,selectedOptions:u,deselectAriaLabel:g,keepOpen:L,onBlur:z,onFocus:p,onLoadItems:x,onChange:A,controlId:$,ariaLabelId:J,footerId:Q,filteringValue:P,setFilteringValue:X,externalRef:Y,embedded:v}=S,b=pe(S,["options","filteringType","filteringResultsText","disabled","statusType","empty","loadingText","finishedText","errorText","noMatch","renderHighlightedAriaLive","selectedOptions","deselectAriaLabel","keepOpen","onBlur","onFocus","onLoadItems","onChange","controlId","ariaLabelId","footerId","filteringValue","setFilteringValue","externalRef","embedded"]);const _=re("multiselect"),R=re("select"),Z=R("recoveryText",b.recoveryText),F=R("errorIconAriaLabel",b.errorIconAriaLabel),O=R("selectedAriaLabel",b.selectedAriaLabel);b.recoveryText;const{handleLoadMore:T,handleRecoveryClick:C,fireLoadItems:ee}=Ee({onLoadItems:x,options:f,statusType:k}),t=!0,{filteredOptions:r,parentMap:te,totalCount:j,matchesCount:ne}=Ve(f,d,P),N=G.useCallback(e=>{const l=r.filter(n=>n.type!=="parent").map(n=>n.option),c=n=>n.every(i=>B(u,i)>-1||i.disabled),xe=(n,i)=>n.filter(y=>B(i,y)>-1&&!y.disabled),Ae=(n,i)=>n.filter(y=>B(i,y)===-1).concat(i),ae=(n,i)=>Ae(i,n),ce=(n,i)=>i.filter(y=>B(n,y)===-1);let m=[...u];if(je(e)){const n=xe([...e.options],l);m=c(n)?ce(n,m):ae(n,m)}else m=c([e])?ce([e],m):ae([e],m);Ke(A,{selectedOptions:m})},[A,u,r]),D=G.useRef(null),{isOpen:a,highlightType:M,highlightedOption:o,highlightedIndex:q,getTriggerProps:w,getDropdownProps:ge,getFilterProps:be,getMenuProps:me,getOptionProps:fe,highlightOption:he,announceSelected:Le}=Ne({selectedOptions:u,updateSelectedOption:N,options:r,filteringType:d,onFocus:p,onBlur:z,externalRef:Y,keepOpen:L,fireLoadItems:ee,setFilteringValue:X,useInteractiveGroups:t,statusType:k,embedded:v}),ve=qe({isEnabled:d==="none"&&a,options:r,highlightOption:he,highlightedOption:o==null?void 0:o.option,useInteractiveGroups:t}),Oe=!f||f.length===0,Te=r&&r.length===0,le=d!=="none"&&P.length>0&&r&&r.length>0,we=le?I==null?void 0:I(ne,j):void 0,se=Fe({statusType:k,empty:U,loadingText:W,finishedText:H,errorText:K,recoveryText:Z,isEmpty:Oe,isNoMatch:Te,noMatch:h,isFiltered:le,filteringResultsText:we,onRecoveryClick:C,errorIconAriaLabel:F,hasRecoveryCallback:!!x}),ye=Ce({announceSelected:Le,highlightedOption:o,getParent:e=>{var l;return(l=te.get(e))===null||l===void 0?void 0:l.option},selectedAriaLabel:O,renderHighlightedAriaLive:V}),Se=u.map(e=>({label:e.label,disabled:E||e.disabled,labelTag:e.labelTag,description:e.description,iconAlt:e.iconAlt,iconName:e.iconName,iconUrl:e.iconUrl,iconSvg:e.iconSvg,tags:e.tags,dismissLabel:_("deselectAriaLabel",g==null?void 0:g(e),l=>{var c;return l({option__label:(c=e.label)!==null&&c!==void 0?c:""})})}));G.useEffect(()=>{var e;(e=D.current)===null||e===void 0||e.call(D,q)},[q]);const Ie=e=>{e.target!==document.activeElement&&e.preventDefault()},ke=({detail:e})=>{const l=u[e.itemIndex];N(l);const c=w().ref;c.current&&c.current.focus()};return{isOpen:a,tokens:Se,announcement:ye,dropdownStatus:se,filteringValue:P,filteredOptions:r,highlightType:M,scrollToIndex:D,getFilterProps:be,getTriggerProps:w,getMenuProps:()=>Object.assign(Object.assign({},me()),{onLoadMore:T,ariaLabelledby:ie(J,$),ariaDescribedby:se.content?Q:void 0,embedded:v}),getOptionProps:fe,getTokenProps:()=>({onDismiss:ke}),getDropdownProps:()=>Object.assign(Object.assign({},ge()),{onMouseDown:Ie}),getWrapperProps:()=>({onKeyDown:ve})}}const ue={root:"awsui_root_f8g6q_16vhx_145",embedded:"awsui_embedded_f8g6q_16vhx_177",tokens:"awsui_tokens_f8g6q_16vhx_210"},$e=s.forwardRef((S,f)=>{var d,{options:I,filteringType:E,filteringPlaceholder:k,filteringAriaLabel:U,filteringClearAriaLabel:W,ariaRequired:H,placeholder:K,disabled:h,readOnly:V,ariaLabel:u,selectedOptions:g,deselectAriaLabel:L,tokenLimit:z,i18nStrings:p,virtualScroll:x,inlineTokens:A=!1,hideTokens:$,expandToViewport:J,tokenLimitShowFewerAriaLabel:Q,tokenLimitShowMoreAriaLabel:P,__internalRootRef:X=null,autoFocus:Y}=S,v=pe(S,["options","filteringType","filteringPlaceholder","filteringAriaLabel","filteringClearAriaLabel","ariaRequired","placeholder","disabled","readOnly","ariaLabel","selectedOptions","deselectAriaLabel","tokenLimit","i18nStrings","virtualScroll","inlineTokens","hideTokens","expandToViewport","tokenLimitShowFewerAriaLabel","tokenLimitShowMoreAriaLabel","__internalRootRef","autoFocus"]);const b=Pe(v),_=Me(v),R=re("multiselect"),Z=oe("trigger"),F=(d=_.controlId)!==null&&d!==void 0?d:Z,O=oe("multiselect-ariaLabel-"),T=oe("multiselect-footer-"),[C,ee]=G.useState(""),t=ze(Object.assign({options:I,selectedOptions:g,filteringType:E,disabled:h,deselectAriaLabel:L,controlId:F,ariaLabelId:O,footerId:T,filteringValue:C,setFilteringValue:ee,externalRef:f},v)),r=s.createElement(Be,Object.assign({clearAriaLabel:W,filteringType:E,placeholder:k,ariaLabel:U,ariaRequired:H,value:C},t.getFilterProps())),te=s.createElement(Ge,Object.assign({placeholder:K,disabled:h,readOnly:V,triggerProps:t.getTriggerProps(h,Y),selectedOption:null,selectedOptions:g,triggerVariant:A?"tokens":"placeholder",isOpen:t.isOpen},_,{controlId:F,ariaLabelledby:ie(_.ariaLabelledby,O)})),j=g.map(o=>({label:o.label,disabled:h||o.disabled,labelTag:o.labelTag,description:o.description,iconAlt:o.iconAlt,iconName:o.iconName,iconUrl:o.iconUrl,iconSvg:o.iconSvg,tags:o.tags,dismissLabel:R("deselectAriaLabel",L==null?void 0:L(o),q=>{var w;return q({option__label:(w=o.label)!==null&&w!==void 0?w:""})})})),ne=x?Ue:We,N=!$&&!A&&j.length>0,D={limitShowFewer:p==null?void 0:p.tokenLimitShowFewer,limitShowMore:p==null?void 0:p.tokenLimitShowMore},a=t.dropdownStatus,M=t.getDropdownProps();return s.createElement("div",Object.assign({},b,{ref:X,className:_e(ue.root,b.className)},t.getWrapperProps()),s.createElement(Re,Object.assign({},M,{ariaLabelledby:M.dropdownContentRole?ie(O,F):void 0,ariaDescribedby:M.dropdownContentRole&&a.content?T:void 0,open:t.isOpen,trigger:te,header:r,footer:a.isSticky?s.createElement(de,{content:t.isOpen?a.content:null,id:T}):null,expandToViewport:J,stretchBeyondTriggerWidth:!0}),s.createElement(ne,{listBottom:a.isSticky?null:s.createElement(de,{content:t.isOpen?a.content:null,id:T}),menuProps:t.getMenuProps(),getOptionProps:t.getOptionProps,filteredOptions:t.filteredOptions,filteringValue:C,ref:t.scrollToIndex,hasDropdownStatus:a.content!==null,checkboxes:!0,useInteractiveGroups:!0,screenReaderContent:t.announcement,highlightType:t.highlightType})),N&&s.createElement(He,Object.assign({},t.getTokenProps(),{className:ue.tokens,alignment:"horizontal",limit:z,items:j,i18nStrings:D,limitShowMoreAriaLabel:P,limitShowFewerAriaLabel:Q,disableOuterPadding:!0,readOnly:V})),s.createElement(De,{id:O},u))}),at=$e;export{at as I,ue as s,ze as u};
