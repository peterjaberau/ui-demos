import{c as p,_ as R,e as S}from"./index-eb73e870.js";import{R as n,r as I}from"./index-2c36b58a.js";import{I as C}from"./internal-4ec290ce.js";import{b as O}from"./index-491afaa4.js";import{I as E}from"./internal-9b1189e6.js";import{K as y}from"./keycode-5e563e63.js";import{h as N}from"./handle-key-f035cd81.js";import{I as j}from"./internal-67a4bdad.js";import{u as k,i as K}from"./internal-1d1af924.js";import{u as L}from"./index-33af1cce.js";const c={segment:"awsui_segment_8cbea_m0ww2_161",disabled:"awsui_disabled_8cbea_m0ww2_241",selected:"awsui_selected_8cbea_m0ww2_249",icon:"awsui_icon_8cbea_m0ww2_270","with-text":"awsui_with-text_8cbea_m0ww2_274","with-no-text":"awsui_with-no-text_8cbea_m0ww2_280",root:"awsui_root_8cbea_m0ww2_285","segment-part":"awsui_segment-part_8cbea_m0ww2_317",select:"awsui_select_8cbea_m0ww2_249","segment-count-2":"awsui_segment-count-2_8cbea_m0ww2_336","segment-count-3":"awsui_segment-count-3_8cbea_m0ww2_340","segment-count-4":"awsui_segment-count-4_8cbea_m0ww2_344","segment-count-5":"awsui_segment-count-5_8cbea_m0ww2_348","segment-count-6":"awsui_segment-count-6_8cbea_m0ww2_352","disabled-reason-tooltip":"awsui_disabled-reason-tooltip_8cbea_m0ww2_356"},D=n.forwardRef(({disabled:l,disabledReason:a,text:_,iconName:o,iconAlt:i,iconUrl:d,iconSvg:w,isActive:f,onClick:m,onKeyDown:h,tabIndex:e,id:r},s)=>{const t=I.useRef(null),[b,u]=I.useState(!1),g=l&&!!a,{targetProps:v,descriptionEl:x}=k(a);return n.createElement("button",Object.assign({className:p(c.segment,{[c.disabled]:!!l},{[c.selected]:f}),ref:L(s,t),onClick:m,onKeyDown:h,disabled:l&&!a,"aria-disabled":g?"true":void 0,type:"button",tabIndex:e,"aria-pressed":f?"true":"false","aria-label":_?void 0:i,onFocus:g?()=>u(!0):void 0,onBlur:g?()=>u(!1):void 0,onMouseEnter:g?()=>u(!0):void 0,onMouseLeave:g?()=>u(!1):void 0},g?v:{},{"data-testid":r}),(o||d||w)&&n.createElement(j,{className:p(c.icon,_?c["with-text"]:c["with-no-text"]),name:o,url:d,svg:w,alt:i,variant:l?"disabled":"normal"}),n.createElement("span",null,_),g&&n.createElement(n.Fragment,null,x,b&&n.createElement(K,{className:c["disabled-reason-tooltip"],trackRef:t,value:a})))});function F({selectedId:l,options:a,label:_,ariaLabelledby:o,onChange:i}){const d=I.useRef({}),w=(a||[]).filter(e=>e.id===l),f=w.length?w[0]:null,m=(a||[]).filter(e=>!e.disabled||e.disabled&&!!e.disabledReason),h=(e,r)=>{var s;if(e.keyCode!==y.right&&e.keyCode!==y.left)return;let t=r;N(e,{onInlineStart:()=>t=r===0?m.length-1:r-1,onInlineEnd:()=>t=r+1===m.length?0:r+1});const b=m[t].id;(s=d.current[b])===null||s===void 0||s.focus()};return n.createElement("div",{className:p(c["segment-part"],c[`segment-count-${a==null?void 0:a.length}`]),"aria-label":_,"aria-labelledby":o,role:"toolbar"},a&&a.map((e,r)=>{const s=l===e.id,t=m.indexOf(e);let b=s?0:-1;return f===null&&t===0&&(b=0),n.createElement(D,{key:r,id:e.id,disabled:!!e.disabled,disabledReason:e.disabledReason,iconName:e.iconName,iconAlt:e.iconAlt,iconUrl:e.iconUrl,iconSvg:e.iconSvg,text:e.text,isActive:s,tabIndex:b,ref:u=>{u?d.current[e.id]=u:delete d.current[e.id]},onClick:()=>{e.disabled||l!==e.id&&O(i,{selectedId:e.id})},onKeyDown:u=>h(u,t)})}))}function q(l){var{selectedId:a,options:_,label:o,ariaLabelledby:i,onChange:d,__internalRootRef:w=null}=l,f=R(l,["selectedId","options","label","ariaLabelledby","onChange","__internalRootRef"]);const m=S(f),h=(_||[]).map(t=>{const b=t.text||t.iconAlt;return Object.assign(Object.assign({},t),{label:b,value:t.id})}),e=h.filter(t=>t.value===a),r=e.length?e[0]:null,s={options:h,selectedOption:r,triggerVariant:"option",onChange:t=>O(d,{selectedId:t.detail.selectedOption.value})};return n.createElement("div",Object.assign({},m,{className:p(m.className,c.root),ref:w}),n.createElement(F,{selectedId:a,options:_,label:o,ariaLabelledby:i,onChange:d}),n.createElement("div",{className:c.select},i&&n.createElement(E,Object.assign({},s,{ariaLabelledby:i})),!i&&o&&n.createElement(C,{label:o,stretch:!0},n.createElement(E,Object.assign({},s))),!i&&!o&&n.createElement(E,Object.assign({},s))))}export{q as I};
