import{c as L,_ as $,e as M}from"./index-eb73e870.js";import{R as e,r as d}from"./index-2c36b58a.js";import{I as k}from"./internal-fb301464.js";import{I as F}from"./internal-1d1af924.js";import{u as V}from"./index-33af1cce.js";import{u as j}from"./index-8f886a48.js";import{u as O}from"./index-5c04613c.js";import{I as S}from"./internal-4584f44c.js";import{C as H}from"./internal-565898aa.js";import{I as U}from"./internal-4ec290ce.js";import{I as W}from"./internal-35e701d8.js";import{u as z}from"./context-d1fbdd85.js";import{b as J}from"./index-491afaa4.js";import{u as K}from"./use-container-breakpoints-ef827eb4.js";const r={"empty-appear":"awsui_empty-appear_n4qlp_1nsib_153","awsui-motion-fade-in":"awsui_awsui-motion-fade-in_n4qlp_1nsib_1",root:"awsui_root_n4qlp_1nsib_175",empty:"awsui_empty_n4qlp_1nsib_153",row:"awsui_row_n4qlp_1nsib_214","row-control":"awsui_row-control_n4qlp_1nsib_218",field:"awsui_field_n4qlp_1nsib_222","add-button":"awsui_add-button_n4qlp_1nsib_226","remove-button":"awsui_remove-button_n4qlp_1nsib_230","button-container-haslabel":"awsui_button-container-haslabel_n4qlp_1nsib_234","button-container-nolabel":"awsui_button-container-nolabel_n4qlp_1nsib_238",divider:"awsui_divider_n4qlp_1nsib_242","additional-info":"awsui_additional-info_n4qlp_1nsib_246","right-align":"awsui_right-align_n4qlp_1nsib_292"},Q=({children:n,id:o})=>e.createElement(S,{"data-testid":"info-live-region"},e.createElement("div",{id:o,className:r["additional-info"]},n)),X=()=>e.createElement(k,{className:r.divider,padding:{top:"l"}});function w(n,o,t){if(i(t))return t(n,o);return t;function i(a){return typeof a=="function"}}const Y=[{colspan:{default:12,xs:9}}],Z=[{colspan:{default:12,xs:9}},{colspan:{default:12,xs:3}}],ee=e.memo(({breakpoint:n,item:o,definition:t,i18nStrings:i={},index:a,removable:s,removeButtonText:B,removeButtonRefs:A,onRemoveButtonClick:R,removeButtonAriaLabel:_})=>{var f;const l=z("attribute-editor"),b=n==="default"||n==="xxs",y=!b,N=d.useCallback(()=>{J(R,{itemIndex:a})},[R,a]),p=O("first-control-id-");return e.createElement(k,{className:r.row,margin:{bottom:"s"}},e.createElement("div",{role:"group","aria-labelledby":`${p}-label ${p}`},e.createElement(W,{__breakpoint:n,gridDefinition:s?Z:Y},e.createElement(H,{className:r["row-control"],columns:t.length,__breakpoint:n},t.map(({info:u,label:h,constraintText:E,errorText:g,warningText:v,control:q},I)=>e.createElement(U,{key:I,className:r.field,label:h,info:u,constraintText:w(o,a,E),errorText:w(o,a,g),warningText:w(o,a,v),stretch:!0,i18nStrings:{errorIconAriaLabel:i.errorIconAriaLabel,warningIconAriaLabel:i.warningIconAriaLabel},__hideLabel:y&&a>0,controlId:I===0?p:void 0},w(o,a,q)))),s&&e.createElement(te,{index:a,isNarrowViewport:b,hasLabel:t.some(u=>u.label)},e.createElement(F,{className:r["remove-button"],formAction:"none",ref:u=>{A[a]=u??void 0},ariaLabel:(f=_??i.removeButtonAriaLabel)===null||f===void 0?void 0:f(o),onClick:N},l("removeButtonText",B))))),b&&e.createElement(X,null))}),te=({index:n,children:o,isNarrowViewport:t,hasLabel:i})=>e.createElement("div",{className:L({[r["button-container-haslabel"]]:!t&&n===0&&i,[r["button-container-nolabel"]]:!t&&n===0&&!i,[r["right-align"]]:t})},o),ne=e.forwardRef((n,o)=>{var{additionalInfo:t,disableAddButton:i,definition:a,items:s,isItemRemovable:B=()=>!0,empty:A,addButtonText:R,removeButtonText:_,removeButtonAriaLabel:f,i18nStrings:l,onAddButtonClick:b,onRemoveButtonClick:y,__internalRootRef:N=null}=n,p=$(n,["additionalInfo","disableAddButton","definition","items","isItemRemovable","empty","addButtonText","removeButtonText","removeButtonAriaLabel","i18nStrings","onAddButtonClick","onRemoveButtonClick","__internalRootRef"]);const[u,h]=K(["default","xxs","xs"]),E=d.useRef([]),g=d.useRef(null),v=d.useRef(!1),[q,I]=d.useState(""),x=M(p),C=s&&s.length===0;v.current=v.current||!C,d.useImperativeHandle(o,()=>({focusRemoveButton(m){var c;(c=E.current[m])===null||c===void 0||c.focus()},focusAddButton(){var m;(m=g.current)===null||m===void 0||m.focus()}}));const G=V(h,N),P=O("attribute-editor-info"),T=t?P:void 0,D=j(s.length);return e.useEffect(()=>{D&&D>s.length&&(l!=null&&l.itemRemovedAriaLive)?I(l.itemRemovedAriaLive):I("")},[s,l==null?void 0:l.itemRemovedAriaLive]),e.createElement("div",Object.assign({},x,{ref:G,className:L(x.className,r.root)}),e.createElement(k,{margin:{bottom:"l"}},C&&e.createElement("div",{className:L(r.empty,v.current&&r["empty-appear"])},A),s.map((m,c)=>e.createElement(ee,{key:c,index:c,breakpoint:u,item:m,definition:a,i18nStrings:l,removable:B(m),removeButtonText:_,removeButtonRefs:E.current,onRemoveButtonClick:y,removeButtonAriaLabel:f}))),e.createElement(F,{className:r["add-button"],disabled:i,__nativeAttributes:i?{tabIndex:-1}:{},__focusable:!0,onClick:b,formAction:"none",ref:g,ariaDescribedby:T},R),e.createElement(S,{"data-testid":"removal-announcement",tagName:"span",hidden:!0,delay:5,key:s.length},q),!!t&&e.createElement(Q,{id:T},t))}),ve=ne;export{ve as I};
