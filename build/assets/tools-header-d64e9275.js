import{r as N,R as f}from"./index-2c36b58a.js";import"./ResizeObserver-6fd345a6.js";import{c as z,g as J}from"./scrollable-containers-435d5d18.js";import{_ as Q,c as G}from"./index-eb73e870.js";import{g as W}from"./attributes-9cbf7bc1.js";import{I as X}from"./internal-76dde1ac.js";import{a as Z}from"./single-tab-stop-navigation-context-cd355dd7.js";import{u as D}from"./index-5c04613c.js";import{K as q}from"./keycode-5e563e63.js";import{R as A}from"./radio-button-85a94eb4.js";import{f as H}from"./find-up-until-61244faf.js";import{b as P}from"./index-491afaa4.js";import{j as B}from"./join-strings-170e7968.js";import{a as M}from"./index-47bb06f7.js";import{C as L}from"./collection-label-context-b15b8042.js";import{u as ee}from"./use-container-breakpoints-ef827eb4.js";const te=z(e=>{function t(o){e(o.target)}function n(){e(null)}return window.addEventListener("mousedown",t),window.addEventListener("keydown",n),()=>{window.removeEventListener("mousedown",t),window.removeEventListener("keydown",n)}});function Te(){const e=N.useRef(null);return te(t=>{e.current=t}),()=>e.current}const R=(e,t)=>typeof e=="function"?e(t):t[e],ke=(e,t,n)=>e?R(e,t):n,k=(e,t)=>e?R(e,t):t,xe=(e,t)=>e.id||t,Ne=e=>!e||e==="container"?"default":e==="borderless"?"embedded":e;function Me({columnDisplay:e,visibleColumns:t,columnDefinitions:n}){return e?ne({columnDisplay:e,columnDefinitions:n}):t?oe({visibleColumns:t,columnDefinitions:n}):n}function ne({columnDisplay:e,columnDefinitions:t}){const n=t.reduce((o,l)=>l.id===void 0?o:Object.assign(Object.assign({},o),{[l.id]:l}),{});return e.filter(o=>o.visible).map(o=>n[o.id]).filter(Boolean)}function oe({visibleColumns:e,columnDefinitions:t}){const n=new Set(e);return t.filter(({id:o})=>o!==void 0&&n.has(o))}function Oe(e,t){return{[e["sticky-cell"]]:!!t,[e["sticky-cell-pad-inline-start"]]:!!(t!=null&&t.padInlineStart),[e["sticky-cell-last-inline-start"]]:!!(t!=null&&t.lastInsetInlineStart),[e["sticky-cell-last-inline-end"]]:!!(t!=null&&t.lastInsetInlineEnd)}}const y={root:"awsui_root_wih1l_1cend_153",tools:"awsui_tools_wih1l_1cend_164","tools-filtering":"awsui_tools-filtering_wih1l_1cend_172","tools-align-right":"awsui_tools-align-right_wih1l_1cend_186","tools-pagination":"awsui_tools-pagination_wih1l_1cend_190","tools-preferences":"awsui_tools-preferences_wih1l_1cend_190","tools-small":"awsui_tools-small_wih1l_1cend_196",table:"awsui_table_wih1l_1cend_202","table-layout-fixed":"awsui_table-layout-fixed_wih1l_1cend_208",wrapper:"awsui_wrapper_wih1l_1cend_212","variant-stacked":"awsui_variant-stacked_wih1l_1cend_219","wrapper-content-measure":"awsui_wrapper-content-measure_wih1l_1cend_219","variant-container":"awsui_variant-container_wih1l_1cend_219","has-footer":"awsui_has-footer_wih1l_1cend_222","has-header":"awsui_has-header_wih1l_1cend_225","cell-merged":"awsui_cell-merged_wih1l_1cend_242","cell-merged-content":"awsui_cell-merged-content_wih1l_1cend_254",empty:"awsui_empty_wih1l_1cend_270",loading:"awsui_loading_wih1l_1cend_274","selection-control":"awsui_selection-control_wih1l_1cend_283","selection-control-header":"awsui_selection-control-header_wih1l_1cend_290","header-secondary":"awsui_header-secondary_wih1l_1cend_296","variant-full-page":"awsui_variant-full-page_wih1l_1cend_308","table-has-header":"awsui_table-has-header_wih1l_1cend_314","header-controls":"awsui_header-controls_wih1l_1cend_325","variant-embedded":"awsui_variant-embedded_wih1l_1cend_334","variant-borderless":"awsui_variant-borderless_wih1l_1cend_334","footer-wrapper":"awsui_footer-wrapper_wih1l_1cend_339",footer:"awsui_footer_wih1l_1cend_339","footer-with-pagination":"awsui_footer-with-pagination_wih1l_1cend_347","footer-pagination":"awsui_footer-pagination_wih1l_1cend_355","thead-active":"awsui_thead-active_wih1l_1cend_359",row:"awsui_row_wih1l_1cend_360","row-selected":"awsui_row-selected_wih1l_1cend_361"},O="selection-item",le="selection-root";class j{constructor(t,n){this.map=new Map,this.put=o=>this.map.set.call(this.map,k(this.trackBy,o),o),this.has=o=>this.map.has.call(this.map,k(this.trackBy,o)),this.forEach=this.map.forEach.bind(this.map),this.trackBy=t,n.forEach(this.put)}}const De={item:{["data-"+O]:"item"},all:{["data-"+O]:"all"},root:{["data-"+le]:"true"}};const x={root:"awsui_root_1s55x_1sxg8_145",label:"awsui_label_1s55x_1sxg8_149",stud:"awsui_stud_1s55x_1sxg8_163"};function Fe(e){var{selectionType:t,indeterminate:n=!1,onShiftToggle:o,onFocusUp:l,onFocusDown:r,name:_,ariaLabel:c,focusedComponent:a,rowIndex:w,itemKey:s}=e,m=Q(e,["selectionType","indeterminate","onShiftToggle","onFocusUp","onFocusDown","name","ariaLabel","focusedComponent","rowIndex","itemKey"]);const b=D(),p=t==="multi",{navigationActive:v}=N.useContext(Z),g=u=>{p&&o&&o(u.shiftKey)},S=u=>{g(u),p&&u.preventDefault()},F=u=>{g(u),p&&!v&&(u.keyCode===q.up&&(u.preventDefault(),l&&l(u)),u.keyCode===q.down&&(u.preventDefault(),r&&r(u)))},K=u=>{const C=u.currentTarget,I=C.tagName==="INPUT"?C:C.querySelector("input");I==null||I.focus()},E=p?f.createElement(X,Object.assign({},m,{showOutline:a==="selection-control",controlId:b,"data-focus-id":"selection-control",indeterminate:n})):f.createElement(A,Object.assign({},m,{controlId:b,name:_,value:"",label:""}));return f.createElement(f.Fragment,null,f.createElement("label",Object.assign({onKeyDown:F,onKeyUp:g,onMouseDown:S,onMouseUp:g,onClick:K,htmlFor:b,className:G(x.label,x.root),"aria-label":c,title:c},w!==void 0&&!m.disabled?W({detail:{position:`${w+1}`,item:s||""}}):{}),E),f.createElement("span",{className:x.stud,"aria-hidden":!0},"Â "))}function Ke(e,t){if(e!=="multi")return{};function n(r,_,c){let a=_;const w=se(r);for(;a>=-1&&a<t;){a+=c;const s=ie(w,a);if(s&&!s.disabled){s.focus();break}}}const[o,l]=[1,-1].map(r=>_=>{const c=_.currentTarget,a=H(c,s=>s.dataset.selectionItem==="item"),w=Array.prototype.indexOf.call(a.parentElement.children,a);n(c,w,r)});return{moveFocusDown:o,moveFocusUp:l,moveFocus:n}}function ie(e,t){return t===-1?e.querySelector(`[data-${O}="all"] .${x.root} input`):e.querySelectorAll(`[data-${O}="item"] .${x.root} input`)[t]}function se(e){return H(e,t=>t.dataset.selectionRoot==="true")}function Pe(e){const t=re(e),n=ce(e);return e.selectionType==="single"?t:n}function re({ariaLabels:e,isItemDisabled:t=()=>!1,onSelectionChange:n,selectedItems:o=[],selectionType:l,trackBy:r}){const _=D();if(l!=="single")return{isItemSelected:()=>!1};const c=new j(r,o.slice(0,1)),a=c.has.bind(c),w=s=>{!t(s)&&!a(s)&&P(n,{selectedItems:[s]})};return{isItemSelected:a,getItemSelectionProps:s=>{var m;return{name:_,selectionType:"single",disabled:t(s),checked:a(s),onChange:()=>w(s),ariaLabel:B(e==null?void 0:e.selectionGroupLabel,(m=e==null?void 0:e.itemSelectionLabel)===null||m===void 0?void 0:m.call(e,{selectedItems:o},s))}}}}function ce({ariaLabels:e,isItemDisabled:t=()=>!1,items:n,loading:o,onSelectionChange:l,selectedItems:r=[],selectionType:_,trackBy:c}){const a=D(),[w,s]=N.useState(!1),[m,b]=N.useState(null);if(_!=="multi")return{isItemSelected:()=>!1};const p=new j(c,r),v=p.has.bind(p);let g=!0,S=!0;for(const i of n)g=g&&t(i),S=S&&(v(i)||t(i));const F=r.length>0&&S,K=r.length>0&&!S,E=new Map;n.forEach((i,d)=>E.set(k(c,i),d));const u=i=>{const d=m?E.get(k(c,m)):void 0;if(d!==void 0){const h=E.get(k(c,i)),T=Math.min(h,d),V=Math.max(h,d);return n.slice(T,V+1)}return[i]},C=i=>{const d=[...r];return i.forEach(h=>{!v(h)&&!t(h)&&d.push(h)}),d},I=i=>{const d=new j(c,i),h=[];return r.forEach(T=>{(!d.has(T)||t(T))&&h.push(T)}),h},U=()=>{const i=S?I(n):C(n);P(l,{selectedItems:i})},Y=i=>{if(!t(i)){const d=w?u(i):[i],h=v(i)?I(d):C(d);P(l,{selectedItems:h}),b(i)}};return{isItemSelected:v,getSelectAllProps:()=>{var i;return{name:a,selectionType:"multi",disabled:g||!!o,checked:F,indeterminate:K,onChange:U,ariaLabel:B(e==null?void 0:e.selectionGroupLabel,(i=e==null?void 0:e.allItemsSelectionLabel)===null||i===void 0?void 0:i.call(e,{selectedItems:r})),selectionGroupLabel:e==null?void 0:e.selectionGroupLabel}},getItemSelectionProps:i=>{var d;return{name:a,selectionType:"multi",disabled:t(i),checked:v(i),onChange:()=>Y(i),onShiftToggle:h=>s(h),ariaLabel:B(e==null?void 0:e.selectionGroupLabel,(d=e==null?void 0:e.itemSelectionLabel)===null||d===void 0?void 0:d.call(e,{selectedItems:r},i))}}}}function Be(e,t){return{scrollToTop:()=>{if(!e.current||!t.current)return;const l=ae(e.current,t.current);l>0&&$(l,e.current)},scrollToItem:l=>{if(!l||!e.current||!t.current)return;const _=M(t.current).insetBlockEnd-M(l).insetBlockStart;_>0&&$(_,e.current)}}}function ae(e,t){const n=M(t),o=M(e);return n.insetBlockStart-o.insetBlockStart}function $(e,t){const n=J(t);n.length?n[0].scrollTop-=e:window.scrollTo({top:window.pageYOffset-e})}function je({header:e,filter:t,pagination:n,preferences:o,setLastUserAction:l}){const[r,_]=ee(["xs"]),c=typeof e=="string",a=N.useContext(L).assignId,w=D("heading");a!==void 0&&c&&a(w);const s=r==="default",m=t||n||o;return f.createElement(f.Fragment,null,c?f.createElement("span",{id:w},e):e,m&&f.createElement("div",{ref:_,className:G(y.tools,s&&y["tools-small"])},t&&f.createElement("div",{className:y["tools-filtering"],onClickCapture:()=>l==null?void 0:l("filter"),onKeyDownCapture:()=>l==null?void 0:l("filter")},t),f.createElement("div",{className:y["tools-align-right"]},n&&f.createElement("div",{className:y["tools-pagination"],onClickCapture:()=>l==null?void 0:l("pagination")},n),o&&f.createElement("div",{className:y["tools-preferences"],onClickCapture:()=>l==null?void 0:l("preferences")},o))))}export{j as I,Fe as S,je as T,R as a,xe as b,ae as c,$ as d,Be as e,De as f,Oe as g,Me as h,Pe as i,Te as j,ke as k,y as s,Ne as t,Ke as u};
