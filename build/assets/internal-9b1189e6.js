import{_ as Ve,e as Me,c as je}from"./index-eb73e870.js";import{R as t,r as l}from"./index-2c36b58a.js";import"./ResizeObserver-6fd345a6.js";import{u as ke}from"./context-d1fbdd85.js";import{D as Ne}from"./index-aa0176b5.js";import{u as Be,a as qe,D as E}from"./use-highlight-option-7a4dfde2.js";import{u as He,p as Ke,a as Ue,b as We,F as $e,T as ze,V as Ge,P as Je}from"./use-select-0ff13a42.js";import{u as Qe}from"./form-field-context-fcff921e.js";import{b as Xe}from"./index-491afaa4.js";import{u as Ye}from"./index-33af1cce.js";import{u as R}from"./index-5c04613c.js";import{j as I}from"./join-strings-170e7968.js";const Ze={root:"awsui_root_r2vco_d91lo_145"},et=t.forwardRef((P,D)=>{var h,{options:s,filteringType:a="none",filteringPlaceholder:V,filteringAriaLabel:M,filteringClearAriaLabel:j,filteringResultsText:m,inlineLabelText:_,ariaRequired:k,placeholder:N,disabled:w,readOnly:B,ariaLabel:q,statusType:b="finished",empty:H,loadingText:K,finishedText:U,errorText:W,noMatch:$,triggerVariant:z="label",renderHighlightedAriaLive:G,selectedOption:c,onBlur:J,onFocus:Q,onLoadItems:T,onChange:X,virtualScroll:Y,expandToViewport:Z,autoFocus:ee,__inFilteringToken:C,__internalRootRef:te=null}=P,r=Ve(P,["options","filteringType","filteringPlaceholder","filteringAriaLabel","filteringClearAriaLabel","filteringResultsText","inlineLabelText","ariaRequired","placeholder","disabled","readOnly","ariaLabel","statusType","empty","loadingText","finishedText","errorText","noMatch","triggerVariant","renderHighlightedAriaLive","selectedOption","onBlur","onFocus","onLoadItems","onChange","virtualScroll","expandToViewport","autoFocus","__inFilteringToken","__internalRootRef"]);const F=Me(r),L=Qe(r),v=ke("select"),ne=v("errorIconAriaLabel",r.errorIconAriaLabel),oe=v("selectedAriaLabel",r.selectedAriaLabel),re=v("recoveryText",r.recoveryText);r.recoveryText;const{handleLoadMore:ie,handleRecoveryClick:ae,fireLoadItems:le}=He({onLoadItems:T,options:s,statusType:b}),[d,se]=l.useState(""),{filteredOptions:n,parentMap:ce,totalCount:de,matchesCount:ge}=Ke(s,a,d),pe=l.useRef(null),ue=l.useRef(null),fe=R("trigger"),y=(h=L.controlId)!==null&&h!==void 0?h:fe,x=l.useRef(null),{isOpen:i,highlightType:he,highlightedOption:g,highlightedIndex:S,getTriggerProps:me,getDropdownProps:be,getFilterProps:Te,getMenuProps:Le,getOptionProps:ve,highlightOption:ye,selectOption:xe,announceSelected:Oe}=Ue({selectedOptions:c?[c]:[],updateSelectedOption:e=>Xe(X,{selectedOption:e}),options:n,filteringType:a,onBlur:J,onFocus:Q,externalRef:D,fireLoadItems:le,setFilteringValue:se,statusType:b}),Re=We({isEnabled:a==="none",options:n,highlightOption:i?ye:xe,highlightedOption:i?g==null?void 0:g.option:c}),p=R("select-arialabel-"),u=R("footer");l.useEffect(()=>{var e;(e=x.current)===null||e===void 0||e.call(x,S)},[S]);const Ie=t.createElement($e,Object.assign({clearAriaLabel:j,filteringType:a,placeholder:V,ariaLabel:M,ariaRequired:k,value:d},Te())),Pe=t.createElement(ze,Object.assign({ref:ue,placeholder:N,disabled:w,readOnly:B,triggerVariant:z,triggerProps:me(w,ee),selectedOption:c,isOpen:i,inFilteringToken:C,inlineLabelText:_},L,{controlId:y,ariaLabelledby:I(L.ariaLabelledby,p)})),_e=!s||s.length===0,we=n&&n.length===0,A=a!=="none"&&d.length>0&&n&&n.length>0,Ce=A?m==null?void 0:m(ge,de):void 0,o=Be({statusType:b,empty:H,loadingText:K,finishedText:U,errorText:W,recoveryText:re,isEmpty:_e,isNoMatch:we,noMatch:$,isFiltered:A,filteringResultsText:Ce,errorIconAriaLabel:ne,onRecoveryClick:ae,hasRecoveryCallback:!!T}),Fe=Object.assign(Object.assign({},Le()),{onLoadMore:ie,ariaLabelledby:I(p,y),ariaDescribedby:o.content?u:void 0}),Se=qe({announceSelected:Oe,highlightedOption:g,getParent:e=>{var f;return(f=ce.get(e))===null||f===void 0?void 0:f.option},selectedAriaLabel:oe,renderHighlightedAriaLive:G}),Ae=Y?Ge:Je,Ee=e=>{e.target!==document.activeElement&&e.preventDefault()},De=Ye(pe,te),O=be();return t.createElement("div",Object.assign({},F,{ref:De,className:je(Ze.root,F.className),onKeyDown:Re}),t.createElement(Ne,Object.assign({},O,{ariaLabelledby:O.dropdownContentRole?I(p,y):void 0,ariaDescribedby:O.dropdownContentRole&&o.content?u:void 0,open:i,stretchTriggerHeight:!!C,stretchBeyondTriggerWidth:!0,trigger:Pe,header:Ie,onMouseDown:Ee,footer:o.isSticky?t.createElement(E,{content:i?o.content:null,id:u}):null,expandToViewport:Z}),t.createElement(Ae,{listBottom:o.isSticky?null:t.createElement(E,{content:i?o.content:null,id:u}),menuProps:Fe,getOptionProps:ve,filteredOptions:n,filteringValue:d,ref:x,hasDropdownStatus:o.content!==null,screenReaderContent:Se,highlightType:he})),t.createElement("div",{hidden:!0,id:p},q||_))}),ut=et;export{ut as I};
