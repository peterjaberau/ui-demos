import{c as de,_ as Ue,b as Je,e as Qe,d as Ze}from"./index-eb73e870.js";import{r as p,R as M}from"./index-2c36b58a.js";import{c as j,p as et,r as tt,u as nt,C as at,a as rt,b as st,S as it,d as ot,e as lt,f as ct,g as ut,h as dt,i as ht,j as mt,k as gt}from"./index-c9377798.js";import{b as Le}from"./index-491afaa4.js";import{u as Oe}from"./index-cef6af85.js";import{u as ft}from"./index-33af1cce.js";import{u as He}from"./index-84af6bb2.js";import{n as qe,a as Ne}from"./node-belongs-c9e88748.js";import{I as Ee}from"./internal-fb301464.js";import{u as Ke}from"./context-d1fbdd85.js";import{u as pt}from"./index-5c04613c.js";import{K as se}from"./keycode-5e563e63.js";import{I as bt}from"./internal-4584f44c.js";import{a as vt}from"./use-resize-observer-2cd5ced9.js";import"./ResizeObserver-6fd345a6.js";import{b as Ie}from"./index-47bb06f7.js";var Fe=Math.abs,B=Math.atan2,ue=Math.cos,yt=Math.max,Pe=Math.min,U=Math.sin,me=Math.sqrt,q=1e-12,be=Math.PI,xe=be/2,Re=2*be;function _t(e){return e>1?0:e<-1?be:Math.acos(e)}function De(e){return e>=1?xe:e<=-1?-xe:Math.asin(e)}function Rt(e){return e.innerRadius}function xt(e){return e.outerRadius}function Mt(e){return e.startAngle}function Ct(e){return e.endAngle}function At(e){return e&&e.padAngle}function Et(e,a,i,l,c,u,h,t){var s=i-e,n=l-a,f=h-c,r=t-u,o=r*s-f*n;if(!(o*o<q))return o=(f*(a-u)-r*(e-c))/o,[e+o*s,a+o*n]}function ye(e,a,i,l,c,u,h){var t=e-i,s=a-l,n=(h?u:-u)/me(t*t+s*s),f=n*s,r=-n*t,o=e+f,R=a+r,d=i+f,b=l+r,g=(o+d)/2,x=(R+b)/2,E=d-o,v=b-R,y=E*E+v*v,S=c-u,P=o*b-d*R,N=(v<0?-1:1)*me(yt(0,S*S*y-P*P)),k=(P*v-E*N)/y,A=(-P*E-v*N)/y,L=(P*v+E*N)/y,I=(-P*E+v*N)/y,m=k-g,_=A-x,F=L-g,z=I-x;return m*m+_*_>F*F+z*z&&(k=L,A=I),{cx:k,cy:A,x01:-f,y01:-r,x11:k*(c/S-1),y11:A*(c/S-1)}}function Me(){var e=Rt,a=xt,i=j(0),l=null,c=Mt,u=Ct,h=At,t=null;function s(){var n,f,r=+e.apply(this,arguments),o=+a.apply(this,arguments),R=c.apply(this,arguments)-xe,d=u.apply(this,arguments)-xe,b=Fe(d-R),g=d>R;if(t||(t=n=et()),o<r&&(f=o,o=r,r=f),!(o>q))t.moveTo(0,0);else if(b>Re-q)t.moveTo(o*ue(R),o*U(R)),t.arc(0,0,o,R,d,!g),r>q&&(t.moveTo(r*ue(d),r*U(d)),t.arc(0,0,r,d,R,g));else{var x=R,E=d,v=R,y=d,S=b,P=b,N=h.apply(this,arguments)/2,k=N>q&&(l?+l.apply(this,arguments):me(r*r+o*o)),A=Pe(Fe(o-r)/2,+i.apply(this,arguments)),L=A,I=A,m,_;if(k>q){var F=De(k/r*U(N)),z=De(k/o*U(N));(S-=F*2)>q?(F*=g?1:-1,v+=F,y-=F):(S=0,v=y=(R+d)/2),(P-=z*2)>q?(z*=g?1:-1,x+=z,E-=z):(P=0,x=E=(R+d)/2)}var $=o*ue(x),H=o*U(x),V=r*ue(y),J=r*U(y);if(A>q){var Y=o*ue(E),Q=o*U(E),X=r*ue(v),D=r*U(v),K;if(b<be&&(K=Et($,H,X,D,Y,Q,V,J))){var W=$-K[0],Z=H-K[1],ee=Y-K[0],ne=Q-K[1],ie=1/U(_t((W*ee+Z*ne)/(me(W*W+Z*Z)*me(ee*ee+ne*ne)))/2),oe=me(K[0]*K[0]+K[1]*K[1]);L=Pe(A,(r-oe)/(ie-1)),I=Pe(A,(o-oe)/(ie+1))}}P>q?I>q?(m=ye(X,D,$,H,o,I,g),_=ye(Y,Q,V,J,o,I,g),t.moveTo(m.cx+m.x01,m.cy+m.y01),I<A?t.arc(m.cx,m.cy,I,B(m.y01,m.x01),B(_.y01,_.x01),!g):(t.arc(m.cx,m.cy,I,B(m.y01,m.x01),B(m.y11,m.x11),!g),t.arc(0,0,o,B(m.cy+m.y11,m.cx+m.x11),B(_.cy+_.y11,_.cx+_.x11),!g),t.arc(_.cx,_.cy,I,B(_.y11,_.x11),B(_.y01,_.x01),!g))):(t.moveTo($,H),t.arc(0,0,o,x,E,!g)):t.moveTo($,H),!(r>q)||!(S>q)?t.lineTo(V,J):L>q?(m=ye(V,J,Y,Q,r,-L,g),_=ye($,H,X,D,r,-L,g),t.lineTo(m.cx+m.x01,m.cy+m.y01),L<A?t.arc(m.cx,m.cy,L,B(m.y01,m.x01),B(_.y01,_.x01),!g):(t.arc(m.cx,m.cy,L,B(m.y01,m.x01),B(m.y11,m.x11),!g),t.arc(0,0,r,B(m.cy+m.y11,m.cx+m.x11),B(_.cy+_.y11,_.cx+_.x11),g),t.arc(_.cx,_.cy,L,B(_.y11,_.x11),B(_.y01,_.x01),!g))):t.arc(0,0,r,y,v,g)}if(t.closePath(),n)return t=null,n+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +a.apply(this,arguments))/2,f=(+c.apply(this,arguments)+ +u.apply(this,arguments))/2-be/2;return[ue(f)*n,U(f)*n]},s.innerRadius=function(n){return arguments.length?(e=typeof n=="function"?n:j(+n),s):e},s.outerRadius=function(n){return arguments.length?(a=typeof n=="function"?n:j(+n),s):a},s.cornerRadius=function(n){return arguments.length?(i=typeof n=="function"?n:j(+n),s):i},s.padRadius=function(n){return arguments.length?(l=n==null?null:typeof n=="function"?n:j(+n),s):l},s.startAngle=function(n){return arguments.length?(c=typeof n=="function"?n:j(+n),s):c},s.endAngle=function(n){return arguments.length?(u=typeof n=="function"?n:j(+n),s):u},s.padAngle=function(n){return arguments.length?(h=typeof n=="function"?n:j(+n),s):h},s.context=function(n){return arguments.length?(t=n??null,s):t},s}function Pt(e,a){return a<e?-1:a>e?1:a>=e?0:NaN}function wt(e){return e}function Tt(){var e=wt,a=Pt,i=null,l=j(0),c=j(Re),u=j(0);function h(t){var s,n=t.length,f,r,o=0,R=new Array(n),d=new Array(n),b=+l.apply(this,arguments),g=Math.min(Re,Math.max(-Re,c.apply(this,arguments)-b)),x,E=Math.min(Math.abs(g)/n,u.apply(this,arguments)),v=E*(g<0?-1:1),y;for(s=0;s<n;++s)(y=d[R[s]=s]=+e(t[s],s,t))>0&&(o+=y);for(a!=null?R.sort(function(S,P){return a(d[S],d[P])}):i!=null&&R.sort(function(S,P){return i(t[S],t[P])}),s=0,r=o?(g-n*v)/o:0;s<n;++s,b=x)f=R[s],y=d[f],x=b+(y>0?y*r:0)+v,d[f]={data:t[f],index:s,value:y,startAngle:b,endAngle:x,padAngle:E};return d}return h.value=function(t){return arguments.length?(e=typeof t=="function"?t:j(+t),h):e},h.sortValues=function(t){return arguments.length?(a=t,i=null,h):a},h.sort=function(t){return arguments.length?(i=t,a=null,h):i},h.startAngle=function(t){return arguments.length?(l=typeof t=="function"?t:j(+t),h):l},h.endAngle=function(t){return arguments.length?(c=typeof t=="function"?t:j(+t),h):c},h.padAngle=function(t){return arguments.length?(u=typeof t=="function"?t:j(+t),h):u},h}const Be=p.memo(St);function St({x:e,y:a,rightSide:i,className:l,children:c,containerBoundaries:u}){const h=p.useRef(null),t=p.useRef(null);return i=(h.current?Ie(h.current):!1)?!i:i,p.useEffect(()=>{const n=setTimeout(()=>{const f=Ie(t.current),r=t.current.getBoundingClientRect(),o=u?kt(r,u):0;tt(h.current,c,o,f)},25);return()=>clearTimeout(n)}),M.createElement(M.Fragment,null,M.createElement("text",{ref:t,x:e,y:a,style:{textAnchor:i?"start":"end",visibility:"hidden"},"aria-hidden":"true",className:l},c),M.createElement("text",{ref:h,x:e,y:a,style:{textAnchor:i?"start":"end"},className:l},c))}function kt(e,a){return e.left<a.left?e.right-a.left:e.right>a.right?a.right-e.left:a.right-a.left}const w={segment__path:"awsui_segment__path_1edmh_1b6e4_161",segment:"awsui_segment_1edmh_1b6e4_161",segment__hover:"awsui_segment__hover_1edmh_1b6e4_188",label:"awsui_label_1edmh_1b6e4_202",root:"awsui_root_1edmh_1b6e4_216",content:"awsui_content_1edmh_1b6e4_220","content--small":"awsui_content--small_1edmh_1b6e4_220","content--fit-height":"awsui_content--fit-height_1edmh_1b6e4_223","content--without-labels":"awsui_content--without-labels_1edmh_1b6e4_226","content--medium":"awsui_content--medium_1edmh_1b6e4_232","content--large":"awsui_content--large_1edmh_1b6e4_244","status-container":"awsui_status-container_1edmh_1b6e4_261","chart-container":"awsui_chart-container_1edmh_1b6e4_265","chart-container--fit-height":"awsui_chart-container--fit-height_1edmh_1b6e4_269","chart-container-chart-plot":"awsui_chart-container-chart-plot_1edmh_1b6e4_274","chart-container-chart-plot--fit-height":"awsui_chart-container-chart-plot--fit-height_1edmh_1b6e4_277","inner-content":"awsui_inner-content_1edmh_1b6e4_283",segment__highlight:"awsui_segment__highlight_1edmh_1b6e4_294","segment--dimmed":"awsui_segment--dimmed_1edmh_1b6e4_309","segment--highlighted":"awsui_segment--highlighted_1edmh_1b6e4_312","label--dimmed":"awsui_label--dimmed_1edmh_1b6e4_329","label--align-right":"awsui_label--align-right_1edmh_1b6e4_332","label-text":"awsui_label-text_1edmh_1b6e4_340",label__description:"awsui_label__description_1edmh_1b6e4_348","label-line":"awsui_label-line_1edmh_1b6e4_355","label--highlighted":"awsui_label--highlighted_1edmh_1b6e4_359","popover-header":"awsui_popover-header_1edmh_1b6e4_363"},Lt=30,we=44,_e=12,je=8,Te=Math.PI/20,pe={small:{innerRadius:33,outerRadius:50,innerLabelPadding:je,padding:je,paddingLabels:we},medium:{innerRadius:66,outerRadius:100,innerLabelPadding:_e,padding:_e,paddingLabels:we},large:{innerRadius:93,outerRadius:140,innerLabelPadding:_e,padding:_e,paddingLabels:we}},ze={small:Object.assign(Object.assign({},pe.small),{innerRadius:38,cornerRadius:3}),medium:Object.assign(Object.assign({},pe.medium),{innerRadius:75,cornerRadius:4}),large:Object.assign(Object.assign({},pe.large),{innerRadius:105,cornerRadius:5})};function Ve({size:e,hasLabels:a,visualRefresh:i}){if(typeof e=="string"){const r=i?ze[e]:pe[e];return Object.assign(Object.assign({},r),{size:e})}const l=i?ze:pe,c=r=>r.outerRadius*2+r.padding*2+(a?r.paddingLabels:0)*2;let u="small";e>c(l.medium)&&(u="medium"),e>c(l.large)&&(u="large");const h=l[u].padding,t=a?l[u].paddingLabels:0,s=l[u].outerRadius/l[u].innerRadius,n=Math.max(Lt,(e-2*t-2*h)/2),f=n/s;return Object.assign(Object.assign({},l[u]),{outerRadius:n,innerRadius:f,size:u})}const Ot=(e,a)=>(i,l)=>[{key:e("i18nStrings.detailsValue",a.detailsValue)||"",value:i.value},{key:e("i18nStrings.detailsPercentage",a.detailsPercentage)||"",value:`${(i.value*100/l).toFixed(0)}%`}],$e=(e,a,i,l)=>{var c;let h=null,t=i?e.length-1:0;for(;i&&t>=0||!i&&t<e.length;){const s=e[t],n=parseFloat(s.getAttribute("data-x")||"0"),f=parseFloat(s.getAttribute("data-y")||"0"),r={x:n,y:f,height:s.getBoundingClientRect().height},o=a[t];if(i?t--:t++,!h){h=r,s.setAttribute("transform","");continue}if(!i&&r.x<0||i&&r.x>=0)break;s.setAttribute("transform","");const R=h.y+h.height+10-r.y;if(R>0){const d=Nt(r,R,l)*(i?-1:1);s.setAttribute("transform",`translate(${d} ${R})`);const b=(c=s.parentNode)===null||c===void 0?void 0:c.querySelector(`.${w["label-line"]}`);if(b){const{endY:g,endX:x}=o;b.setAttribute("y2",""+(g+R)),b.setAttribute("x2",""+(x+d))}r.y+=R,r.x+=d}h=r}},Se=e=>Math.pow(e[0],2)+Math.pow(e[1],2),Nt=(e,a,i)=>{const l=[e.x,e.y+a],c=[e.x,e.y+e.height+a],u=Se(l)<Se(c)?l:c;return Se(u)<Math.pow(i,2)?Math.sqrt(Math.pow(i,2)-Math.pow(u[1],2))-Math.abs(u[0]):0},It=(e,a,i=!1)=>{if(!i||a-e<2*Te)return(a+e)/2;const l=e+Te,c=a-Te;if(l<0&&c>0)return 0;if(l<Math.PI&&c>Math.PI)return Math.PI;const u=Math.min(c,Math.abs(Math.PI-c),2*Math.PI-c),h=Math.min(l,Math.abs(Math.PI-l),2*Math.PI-l);return u<h?c:l};function Ft({x:e,y:a,hideTitles:i,hideDescriptions:l,rightSide:c,title:u,description:h,containerBoundaries:t}){return M.createElement("g",{className:w["label-text"],transform:"","data-x":e,"data-y":a},!i&&M.createElement(Be,{x:e,y:a,rightSide:c,containerBoundaries:t},u),!l&&h&&M.createElement(Be,{x:e,y:a+(i?0:18),rightSide:c,className:w.label__description,containerBoundaries:t},h))}const Dt=({pieData:e,dimensions:a,highlightedSegment:i,segmentDescription:l,visibleDataSum:c,hideTitles:u,hideDescriptions:h,containerRef:t})=>{const s=Bt(t),n=s.right-s.left-(a.outerRadius+a.innerLabelPadding)*2<300,f=p.useMemo(()=>{const{outerRadius:o,innerLabelPadding:R}=a,d=Me().innerRadius(o-1).outerRadius(o-1),b=Me().innerRadius(o+R).outerRadius(o+R);return e.map((g,x)=>{const E=e[x],v=It(E.startAngle,E.endAngle,n),y=.5*Math.cos(2*v)+.5;b.outerRadius(o+20*y),b.innerRadius(o+20*y);const[S,P]=d.centroid(Object.assign(Object.assign({},g),{startAngle:v,endAngle:v})),[N,k]=b.centroid(Object.assign(Object.assign({},g),{startAngle:v,endAngle:v})),A=v<Math.PI,L=n?N+20*(A?1:-1):(o+20)*(A?1:-1),I=L+5*(A?1:-1);return{startX:S,startY:P,breakX:N,breakY:k,endX:L,endY:k,textX:I,textY:k,rightSide:A,datum:g}})},[e,a,n]),r=p.useRef(null);return p.useLayoutEffect(()=>{if(!r.current)return;const o=r.current.querySelectorAll(`.${w["label-text"]}`);$e(o,f,!1,a.outerRadius+a.innerLabelPadding),$e(o,f,!0,a.outerRadius+a.innerLabelPadding)},[f,e,a]),M.createElement("g",{className:w.markers,"aria-hidden":"true",ref:r},f.map(({startX:o,startY:R,breakX:d,breakY:b,endX:g,endY:x,textX:E,textY:v,rightSide:y,datum:S})=>{const P=S.data.datum,N=l==null?void 0:l(P,c);return u&&!N||h&&!P.title?null:M.createElement("g",{key:S.data.index,className:de(w.label,{[w["label--highlighted"]]:i===P,[w["label--dimmed"]]:i!==null&&i!==P,[w["label--align-right"]]:!y})},M.createElement("line",{x1:o,y1:R,x2:d,y2:b}),M.createElement("line",{x1:d,y1:b,x2:g,y2:x,className:w["label-line"]}),M.createElement(Ft,{x:E,y:v,rightSide:y,title:P.title,description:N,hideTitles:u,hideDescriptions:h,containerBoundaries:s}))}))};function Bt(e){const[a,i]=p.useState({left:0,right:0});return vt(e,l=>{const c=l.target.getBoundingClientRect();i({left:c.left,right:c.right})}),a}function jt({pieData:e,highlightedSegment:a,dimensions:i,variant:l,focusedSegmentRef:c,popoverTrackRef:u,segmentAriaRoleDescription:h,onMouseDown:t,onMouseOver:s,onTouchStart:n}){const f=Ke("pie-chart"),{arcFactory:r,highlightedArcFactory:o}=p.useMemo(()=>{const d=i.outerRadius,b=l==="pie"?0:i.innerRadius,g=i.cornerRadius||0,x=Me().innerRadius(b).outerRadius(d).cornerRadius(g),E=Me().innerRadius(d+4).outerRadius(d+6);return{arcFactory:x,highlightedArcFactory:E}},[i,l]),R=p.useMemo(()=>{for(const d of e)if(d.data.datum===a){const[b,g]=r.centroid(d);return{cx:b,cy:g}}return null},[a,e,r]);return M.createElement("g",null,e.map(d=>{const b=a===d.data.datum,g=a!==null&&!b,x=r(d)||void 0,E=o(d)||void 0;return M.createElement("g",{key:d.data.index,onTouchStart:()=>n(),onMouseDown:v=>{t(d.data),v.preventDefault()},onMouseOver:()=>s(d.data),className:de(w.segment,{[w["segment--highlighted"]]:b,[w["segment--dimmed"]]:g}),ref:b?c:void 0,"aria-label":`${d.data.datum.title} (${d.data.datum.value})`,role:"button","aria-roledescription":f("i18nStrings.segmentAriaRoleDescription",h)},M.createElement("path",{d:x,fill:d.data.color,className:w.segment__path,"aria-hidden":"true"}),M.createElement("path",{d:E,fill:d.data.color,className:de(w.segment__path,w.segment__highlight),"aria-hidden":"true"}))}),M.createElement("circle",Object.assign({},R,{ref:u,r:"1",opacity:"0","aria-hidden":"true"})))}const zt=({fitHeight:e,height:a,variant:i,size:l,width:c,i18nStrings:u,ariaLabel:h,ariaLabelledby:t,ariaDescription:s,innerMetricValue:n,innerMetricDescription:f,hideTitles:r,hideDescriptions:o,detailPopoverContent:R,detailPopoverSize:d,detailPopoverFooter:b,segmentDescription:g,highlightedSegment:x,onHighlightChange:E,legendSegment:v,pieData:y,dataSum:S})=>{var P,N;const[k,A]=p.useState(null),L=p.useRef(null),I=p.useRef(null),m=p.useRef(null),_=p.useRef(null),F=p.useRef(null),z=!(r&&o),$=He(),H=(P=nt(()=>{var C,O;return(O=(C=L.current)===null||C===void 0?void 0:C.svg)!==null&&O!==void 0?O:null},!e))!==null&&P!==void 0?P:a,V=p.useMemo(()=>Ve({size:e?Math.min(H,c):l,hasLabels:z,visualRefresh:$}),[e,H,c,l,z,$]),J=i==="donut"&&(n||f&&V.size!=="small"),Y=pt("awsui-pie-chart__inner"),[Q,X]=p.useState(!1),[D,K]=p.useState(),W=p.useMemo(()=>{for(let C=0;C<y.length;C++)if(y[C].data.datum===x)return C;return null},[y,x]),Z=p.useMemo(()=>b&&x?b(x):null,[b,x]),ee=Ke("pie-chart"),ne=R||Ot(ee,u),ie=D?ne(D.datum,S):[],oe=p.useRef(null),Ce=D&&M.createElement(at,{details:ie,compactList:!0,ref:oe}),le=p.useRef(!1),ge=p.useRef(!1),ae=p.useRef(!1),te=p.useCallback(C=>{const O=C.datum;O!==x&&E(O),_.current&&(K({datum:C.datum,series:{color:C.color,index:C.index,label:C.datum.title,markerType:"rectangle"},trackRef:_}),X(!0))},[x,X,E]),ce=p.useCallback(()=>{X(!1),E(null)},[E,X]),T=C=>{k===null&&(Ne(F.current,C.relatedTarget)||Ne(m.current,C.relatedTarget)||ce())};p.useEffect(()=>{const C=O=>{O.key==="Escape"&&(ce(),ge.current=!0)};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[ce]);const he=p.useCallback(C=>{k===C.datum?(A(null),ce()):(A(C.datum),te(C))},[k,ce,A,te]),fe=p.useCallback(C=>{if(ge.current){ge.current=!1;return}if(ae.current){ae.current=!1;return}k===null&&te(C)},[k,te]),re=p.useCallback(()=>{ae.current=!0},[]),Ae=p.useCallback(C=>{const O=C.keyCode;if(O!==se.right&&O!==se.left&&O!==se.enter&&O!==se.space)return;C.preventDefault();let G=W||0;const ve=y.length-1;O===se.right?(G++,G>ve&&(G=0)):O===se.left&&(G--,G<0&&(G=ve)),(O===se.enter||O===se.space)&&A(y[G].data.datum),te(y[G].data)},[A,te,y,W]),We=p.useCallback((C,O)=>{if(k!==null||le.current||O==="mouse")return;const G=x||v||y[0].data.datum,ve=y.filter(Ge=>Ge.data.datum===G);te(ve[0].data)},[k,y,te,x,v]),ke=p.useCallback(C=>{const O=C.relatedTarget||C.target;(O===null||!(O instanceof Element)||!qe(I.current,O))&&(X(!1),A(null))},[A]),Ye=C=>{X(!1),A(null),C?E(null):setTimeout(()=>{le.current=!0,L.current.focusApplication(),le.current=!1},0)};return M.createElement("div",{className:de(w["chart-container"],e&&w["chart-container--fit-height"]),ref:I},M.createElement("div",{className:de(w["chart-container-chart-plot"],e&&w["chart-container-chart-plot--fit-height"])},M.createElement(rt,{ref:L,width:"100%",height:e?"100%":H,transform:`translate(${c/2} ${H/2})`,isPrecise:!0,isClickable:!Q,ariaLabel:h,ariaLabelledby:t,ariaDescription:s,ariaDescribedby:J?Y:void 0,ariaRoleDescription:u==null?void 0:u.chartAriaRoleDescription,activeElementRef:m,activeElementKey:W==null?void 0:W.toString(),onApplicationFocus:We,onApplicationBlur:ke,onKeyDown:Ae,onMouseOut:T},M.createElement(jt,{pieData:y,dimensions:V,variant:i,focusedSegmentRef:m,popoverTrackRef:_,highlightedSegment:x,segmentAriaRoleDescription:u==null?void 0:u.segmentAriaRoleDescription,onMouseDown:he,onMouseOver:fe,onTouchStart:re}),z&&M.createElement(Dt,{pieData:y,dimensions:V,segmentDescription:g,visibleDataSum:S,hideTitles:r,hideDescriptions:o,highlightedSegment:x,containerRef:I}))),J&&M.createElement("div",{className:w["inner-content"],id:Y},n&&M.createElement(Ee,{variant:V.size==="small"?"h3":"h1",tagOverride:"div",color:"inherit",padding:"n"},n),f&&V.size!=="small"&&M.createElement(Ee,{variant:"h3",color:"text-body-secondary",tagOverride:"div",padding:"n"},f)),Q&&D&&M.createElement(st,{ref:F,title:D.series&&M.createElement(Ee,{className:w["popover-header"],variant:"strong"},M.createElement(it,{color:D.series.color,type:D.series.markerType})," ",D.series.label),trackRef:D.trackRef,trackKey:D.series.index,dismissButton:k!==null,dismissAriaLabel:u.detailPopoverDismissAriaLabel,onDismiss:Ye,container:((N=L.current)===null||N===void 0?void 0:N.svg)||null,size:d,onMouseLeave:T,onBlur:ke},Ce,Z&&M.createElement(ot,null,Z)),M.createElement(bt,{sources:[oe]}))},Xe=function(a){var{fitHeight:i,variant:l="pie",size:c="medium",hideTitles:u=!1,hideDescriptions:h=!1,hideLegend:t=!1,hideFilter:s=!1,statusType:n="finished",data:f=[],i18nStrings:r={},highlightedSegment:o,visibleSegments:R,onHighlightChange:d,onFilterChange:b,additionalFilters:g,legendTitle:x,detailPopoverSize:E="medium"}=a,v=Ue(a,["fitHeight","variant","size","hideTitles","hideDescriptions","hideLegend","hideFilter","statusType","data","i18nStrings","highlightedSegment","visibleSegments","onHighlightChange","onFilterChange","additionalFilters","legendTitle","detailPopoverSize"]);const{__internalRootRef:y=null}=Je("PieChart",{props:{fitHeight:i,variant:l,size:c,hideTitles:u,hideDescriptions:h,hideLegend:t,hideFilter:s,detailPopoverSize:E}}),S=Qe(v),P=p.useRef(null),[N,k]=lt(),A=p.useMemo(()=>{const T=ct(f,void 0,he=>he.color||null);return f.map((he,fe)=>({index:fe,color:T[fe],datum:he}))},[f]),[L=null,I]=Oe(o,d,null,{componentName:"PieChart",controlledProp:"highlightedSegment",changeHandler:"onHighlightChange"}),[m,_]=p.useState(L);p.useEffect(()=>{_(o||null)},[o]);const[F,z]=Oe(R,b,f,{componentName:"PieChart",controlledProp:"visibleSegments",changeHandler:"onFilterChange"}),$=p.useMemo(()=>A.filter(T=>(F==null?void 0:F.indexOf(T.datum))!==-1),[A,F]),H=A==null?void 0:A.map(T=>({label:T.datum.title,color:T.color,type:"rectangle",datum:T.datum})),V=H.filter(T=>(F==null?void 0:F.indexOf(T.datum))!==-1),J=p.useCallback(T=>{z(T),Le(b,{visibleSegments:T})},[z,b]),Y=p.useCallback(T=>{_(T),I(T),Le(d,{highlightedSegment:T})},[d,I]),Q=T=>{T.relatedTarget&&!qe(P.current,T.relatedTarget)&&(L&&Y(null),_(null))},X=ft(P,k,y),{pieData:D,dataSum:K}=p.useMemo(()=>{const T=$.reduce((re,Ae)=>re+Ae.datum.value,0);return{pieData:Tt().value(re=>re.datum.value<T/100?T/100:re.datum.value).sort(null)($.filter(re=>re.datum.value>0)),dataSum:T}},[$]),W=!f||f.length===0,{isEmpty:Z,showChart:ee}=ut({externalData:A,visibleData:D,statusType:n}),ne=Z&&$.length!==A.length,ie=n==="finished"&&!W&&(g||!s),oe=!ee&&!t,Ce=n!=="finished"&&!ne&&(!s||g),le=!(u&&h),ge=He(),ae=Ve({size:c,hasLabels:le,visualRefresh:ge}),ce=2*(ae.outerRadius+ae.padding+(le?ae.paddingLabels:0));return M.createElement(dt,Object.assign({ref:X,fitHeight:!!i},S,{className:de(S.className,w.root),contentClassName:de(w.content,w[`content--${ae.size}`],{[w["content--without-labels"]]:!le,[w["content--fit-height"]]:i}),defaultFilter:ie&&!s?M.createElement(ht,{series:H,onChange:J,selectedSeries:F,i18nStrings:r}):null,additionalFilters:ie?g:null,reserveFilterSpace:!!Ce,reserveLegendSpace:!!oe,chartStatus:M.createElement(mt,{isEmpty:Z,isNoMatch:ne,showChart:ee,statusType:n,empty:v.empty,noMatch:v.noMatch,loadingText:v.loadingText,errorText:v.errorText,recoveryText:v.recoveryText,onRecoveryClick:v.onRecoveryClick}),chart:ee?M.createElement(zt,Object.assign({},v,{variant:l,size:c,height:ce,fitHeight:i,data:f,width:N,hideTitles:u,hideDescriptions:h,i18nStrings:r,onHighlightChange:Y,highlightedSegment:L,legendSegment:m,detailPopoverSize:E,pieData:D,dataSum:K})):null,legend:!t&&!W&&n==="finished"&&M.createElement(gt,{series:V,highlightedSeries:m,legendTitle:x,ariaLabel:r==null?void 0:r.legendAriaLabel,onHighlightChange:Y,plotContainerRef:P}),onBlur:Q}))};Ze(Xe,"PieChart");const an=Xe;export{an as P};
