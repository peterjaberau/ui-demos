import{g as K,c as y,a as ve,P as _e,_ as X,e as fe,b as be,d as ge}from"./index-eb73e870.js";import{r as x,R as t}from"./index-2c36b58a.js";import{b as ye,a as xe}from"./analytics-funnel-6bd8970e.js";import{u as V,a as ke}from"./use-funnel-f65631cb.js";import{g as Ee}from"./external-props-f3440ca2.js";import{F as Se}from"./index-b7e4292a.js";import"./ResizeObserver-6fd345a6.js";import{w as he}from"./logging-3d6eeea4.js";import{g as Z}from"./attributes-9cbf7bc1.js";import{u as Ne}from"./context-d1fbdd85.js";import{j as z,r as H,o as we,a as Ce}from"./selectors-2871d9bb.js";import{b as D}from"./index-491afaa4.js";import{u as Te}from"./index-cef6af85.js";import{u as Ae}from"./index-33af1cce.js";import{I as Ie}from"./internal-ab6fe424.js";import{I as Le}from"./internal-971f8eb5.js";import{I as F,f as Be}from"./internal-1d1af924.js";import{I as Re}from"./internal-90218b53.js";import{u as Oe}from"./use-container-breakpoints-ef827eb4.js";function Fe(n,o,i){const a=x.useRef(!1);x.useEffect(()=>{const s=setTimeout(()=>a.current=!0,0);return()=>{clearTimeout(s),a.current=!1}},[n]);const e=i.map(s=>s.title).join();x.useEffect(()=>{!n||!a.current||Se.funnelChange({funnelInteractionId:n,funnelIdentifier:o,stepConfiguration:ee(i)})},[n,e])}function ee(n){return n.map((o,i)=>{var a;const e=K(o);return{name:o.title,number:i+1,isOptional:(a=o.isOptional)!==null&&a!==void 0?a:!1,stepIdentifier:e==null?void 0:e.instanceIdentifier}})}const P=(n,o,i=!1,a)=>{const e={detail:{targetStepIndex:`${n}`,reason:o}};return i&&(e.action="navigate"),a&&(e.detail.label=a),Z(e)};class J extends t.Component{componentWillUnmount(){this.props.onUnmount()}render(){return this.props.children}}const r={root:"awsui_root_1xupv_1ommy_145",wizard:"awsui_wizard_1xupv_1ommy_177",refresh:"awsui_refresh_1xupv_1ommy_177","small-container":"awsui_small-container_1xupv_1ommy_184",navigation:"awsui_navigation_1xupv_1ommy_193",number:"awsui_number_1xupv_1ommy_226",circle:"awsui_circle_1xupv_1ommy_242",title:"awsui_title_1xupv_1ommy_253",active:"awsui_active_1xupv_1ommy_284",disabled:"awsui_disabled_1xupv_1ommy_295",enabled:"awsui_enabled_1xupv_1ommy_305",form:"awsui_form_1xupv_1ommy_349","form-header":"awsui_form-header_1xupv_1ommy_354","form-header-content":"awsui_form-header-content_1xupv_1ommy_370","form-component":"awsui_form-component_1xupv_1ommy_374",hidden:"awsui_hidden_1xupv_1ommy_388","collapsed-steps":"awsui_collapsed-steps_1xupv_1ommy_392","collapsed-steps-hidden":"awsui_collapsed-steps-hidden_1xupv_1ommy_397","form-header-component-wrapper":"awsui_form-header-component-wrapper_1xupv_1ommy_401","form-header-component":"awsui_form-header-component_1xupv_1ommy_401","navigation-link":"awsui_navigation-link_1xupv_1ommy_417","navigation-link-item":"awsui_navigation-link-item_1xupv_1ommy_418","navigation-link-label":"awsui_navigation-link-label_1xupv_1ommy_419","navigation-link-active":"awsui_navigation-link-active_1xupv_1ommy_423","navigation-link-disabled":"awsui_navigation-link-disabled_1xupv_1ommy_428","cancel-button":"awsui_cancel-button_1xupv_1ommy_432","previous-button":"awsui_previous-button_1xupv_1ommy_433","primary-button":"awsui_primary-button_1xupv_1ommy_434","skip-to-button":"awsui_skip-to-button_1xupv_1ommy_435","action-buttons":"awsui_action-buttons_1xupv_1ommy_439"};function Pe({cancelButtonText:n,onCancelClick:o,isPrimaryLoading:i,primaryButtonText:a,primaryButtonLoadingText:e,onPrimaryClick:s,showPrevious:u,previousButtonText:d,onPreviousClick:m,showSkipTo:l,skipToButtonText:k,onSkipToClick:v,isLastStep:_,activeStepIndex:g,skipToStepIndex:N}){const w=x.useRef(null),C=x.useRef(null),L=()=>{var f,c;((f=w.current)===null||f===void 0?void 0:f.querySelector(`.${r["previous-button"]}`))===document.activeElement&&((c=C.current)===null||c===void 0||c.focus())},R=()=>{var f,c;((f=w.current)===null||f===void 0?void 0:f.querySelector(`.${r["skip-to-button"]}`))===document.activeElement&&((c=C.current)===null||c===void 0||c.focus())};return t.createElement("div",{ref:w},t.createElement(Re,{direction:"horizontal",size:"xs",className:r["action-buttons"]},t.createElement(F,{className:r["cancel-button"],variant:"link",formAction:"none",onClick:o,analyticsAction:"cancel"},n),l&&k&&t.createElement(J,{onUnmount:R},t.createElement("span",Object.assign({},P(N,"skip")),t.createElement(F,{className:r["skip-to-button"],onClick:v,formAction:"none",disabled:i,analyticsAction:"navigate"},k))),u&&t.createElement(J,{onUnmount:L},t.createElement("span",Object.assign({},P(g-1,"previous")),t.createElement(F,{className:r["previous-button"],onClick:m,formAction:"none",disabled:i,analyticsAction:"navigate"},d))),t.createElement("span",Object.assign({},_?{}:P(g+1,"next")),t.createElement(F,{ref:C,className:r["primary-button"],variant:"primary",formAction:"none",onClick:s,loading:i,loadingText:e,analyticsAction:_?"submit":"navigate"},a))))}function ze({children:n}){return t.createElement("div",{className:y(r["form-header"],r["form-header-refresh"])},t.createElement("div",{className:r["form-header-content"]},n))}const te=`[${z}=${H}]`;function je(n){const o=K(n.steps[n.activeStepIndex]),i=ve("WizardForm",_e,Object.assign({},o)),a=x.useRef(null);return Be(()=>{var e;a&&a.current&&((e=a.current)===null||e===void 0||e.focus())},[n.activeStepIndex]),t.createElement(ye,{stepIdentifier:o==null?void 0:o.instanceIdentifier,stepErrorContext:o==null?void 0:o.errorContext,stepNameSelector:te,stepNumber:n.activeStepIndex+1},t.createElement(Ue,Object.assign({stepHeaderRef:a,__internalRootRef:i},n)))}function Ue({__internalRootRef:n,stepHeaderRef:o,steps:i,activeStepIndex:a,showCollapsedSteps:e,i18nStrings:s,submitButtonText:u,isPrimaryLoading:d,allowSkipTo:m,secondaryActions:l,onCancelClick:k,onPreviousClick:v,onPrimaryClick:_,onSkipToClick:g}){var N;const{title:w,info:C,description:L,content:R,errorText:f,isOptional:c}=i[a]||{},T=a>=i.length-1,E=$e(i,a),{funnelInteractionId:j,funnelIdentifier:U}=V(),{funnelStepProps:B,stepErrorContext:S}=ke(),$=m&&E!==-1,M=E!==-1&&s.skipToButtonLabel?s.skipToButtonLabel(i[E],E+1):void 0;return x.useEffect(()=>{},[j,U,T,f,S]),t.createElement(t.Fragment,null,t.createElement(ze,null,t.createElement("div",{className:y(r["collapsed-steps"],!e&&r["collapsed-steps-hidden"])},(N=s.collapsedStepsLabel)===null||N===void 0?void 0:N.call(s,a+1,i.length)),t.createElement(Le,{className:r["form-header-component"],variant:"h1",description:L,info:C},t.createElement("span",{className:r["form-header-component-wrapper"],tabIndex:-1,ref:o},t.createElement("span",Object.assign({},{[z]:H}),w),c&&t.createElement("i",null,` - ${s.optional}`)))),t.createElement(Ie,Object.assign({__internalRootRef:n,className:r["form-component"],actions:t.createElement(Pe,{cancelButtonText:s.cancelButton,primaryButtonText:T?u??s.submitButton:s.nextButton,primaryButtonLoadingText:T?s.submitButtonLoadingAnnouncement:s.nextButtonLoadingAnnouncement,previousButtonText:s.previousButton,onCancelClick:k,onPreviousClick:v,onPrimaryClick:_,onSkipToClick:()=>g(E),showPrevious:a!==0,isPrimaryLoading:d,showSkipTo:$,skipToButtonText:M,isLastStep:T,activeStepIndex:a,skipToStepIndex:E}),secondaryActions:l,errorText:f,errorIconAriaLabel:s.errorIconAriaLabel},B),R))}function $e(n,o){let i=o;do i++;while(i<n.length-1&&n[i].isOptional);return i>o+1?i:-1}const Q={"step-title":"awsui_step-title_zr0a1_2uwax_5"};var p;(function(n){n.Active="active",n.Unvisited="unvisited",n.Visited="visited",n.Next="next"})(p||(p={}));function Me({activeStepIndex:n,farthestStepIndex:o,allowSkipTo:i,hidden:a,i18nStrings:e,isLoadingNextStep:s,onStepClick:u,onSkipToClick:d,steps:m}){return t.createElement("nav",{className:y(r.navigation,a&&r.hidden,r.refresh),"aria-label":e.navigationAriaLabel},t.createElement("ul",{className:y(r.refresh)},m.map((v,_)=>t.createElement(We,{i18nStrings:e,index:_,key:_,onStepClick:u,onSkipToClick:d,status:l(_),step:v}))));function l(v){return n===v?p.Active:s?p.Unvisited:o>=v?p.Visited:i&&k(n+1,v)?p.Next:p.Unvisited}function k(v,_){let g=v;do{if(!m[g].isOptional)return!1;g++}while(g<_);return!0}}function We({i18nStrings:n,index:o,onStepClick:i,onSkipToClick:a,status:e,step:s}){function u(){e===p.Visited&&i(o),e===p.Next&&a(o)}const d={active:"active",unvisited:"disabled",visited:"enabled",next:"enabled"}[e],m=y(r["navigation-link"],{[r["navigation-link-active"]]:e===p.Active,[r["navigation-link-disabled"]]:e===p.Unvisited});return t.createElement("li",{className:y(r[`${d}`],r["navigation-link-item"])},t.createElement("hr",null),t.createElement("span",{className:y(r.number,r["navigation-link-label"])},n.stepNumberLabel&&n.stepNumberLabel(o+1),s.isOptional&&t.createElement("i",null,` - ${n.optional}`)),t.createElement("a",Object.assign({className:m,"aria-current":e===p.Active?"step":void 0,"aria-disabled":e===p.Unvisited?"true":void 0,onClick:l=>{l.preventDefault(),u()},onKeyDown:l=>{(l.key===" "||l.key==="Enter")&&l.preventDefault(),l.key==="Enter"&&u()},onKeyUp:l=>{l.key===" "&&u()},role:"button",tabIndex:e===p.Visited||e===p.Next?0:void 0},e===p.Unvisited?{}:P(o,"step",!0,`.${Q["step-title"]}`)),t.createElement("div",{className:r.circle}),t.createElement("span",{className:y(r.title,Q["step-title"])},s.title)))}function De(n){var o,i,a,e,s,u,d,m,{steps:l,activeStepIndex:k,submitButtonText:v,isLoadingNextStep:_=!1,allowSkipTo:g=!1,secondaryActions:N,onCancel:w,onSubmit:C,onNavigate:L,__internalRootRef:R,__injectAnalyticsComponentMetadata:f=!1}=n,c=X(n,["steps","activeStepIndex","submitButtonText","isLoadingNextStep","allowSkipTo","secondaryActions","onCancel","onSubmit","onNavigate","__internalRootRef","__injectAnalyticsComponentMetadata"]);const T=fe(c),[E,j]=Oe(["xs"]),U=Ae(j,R),B=E==="default",[S,$]=Te(k,L,0,{componentName:"Wizard",controlledProp:"activeStepIndex",changeHandler:"onNavigate"}),{funnelIdentifier:M,funnelInteractionId:Y,funnelSubmit:ne,funnelCancel:ae,funnelProps:oe,funnelNextOrSubmitAttempt:ie}=V(),A=S?Math.min(S,l.length-1):0,W=x.useRef(A);W.current=Math.max(W.current,A);const re=A>=l.length-1,O=(b,I)=>{Y&&Ce(te),$(b),D(L,{requestedStepIndex:b,reason:I})},se=b=>O(b,"step"),q=b=>O(b,"skip"),le=()=>{ae(),D(w)},ce=()=>O(A-1,"previous"),ue=()=>{ie(),re?(ne(),D(C)):O(A+1,"next")};Fe(Y,M,l);const h=Ne("wizard"),me=h("i18nStrings.skipToButtonLabel",(o=c.i18nStrings)===null||o===void 0?void 0:o.skipToButtonLabel,b=>I=>b({task__title:I.title})),G=Object.assign(Object.assign({},c.i18nStrings),{skipToButtonLabel:me,stepNumberLabel:h("i18nStrings.stepNumberLabel",(i=c.i18nStrings)===null||i===void 0?void 0:i.stepNumberLabel,b=>I=>b({stepNumber:I})),collapsedStepsLabel:h("i18nStrings.collapsedStepsLabel",(a=c.i18nStrings)===null||a===void 0?void 0:a.collapsedStepsLabel,b=>(I,de)=>b({stepNumber:I,stepsCount:de})),navigationAriaLabel:h("i18nStrings.navigationAriaLabel",(e=c.i18nStrings)===null||e===void 0?void 0:e.navigationAriaLabel),cancelButton:h("i18nStrings.cancelButton",(s=c.i18nStrings)===null||s===void 0?void 0:s.cancelButton),previousButton:h("i18nStrings.previousButton",(u=c.i18nStrings)===null||u===void 0?void 0:u.previousButton),nextButton:h("i18nStrings.nextButton",(d=c.i18nStrings)===null||d===void 0?void 0:d.nextButton),optional:h("i18nStrings.optional",(m=c.i18nStrings)===null||m===void 0?void 0:m.optional)});S&&S>=l.length&&he("Wizard",`You have set \`activeStepIndex\` to ${S} but you have provided only ${l.length} steps. Its value is ignored and the component uses ${l.length-1} instead.`);const pe={name:"awsui.Wizard",label:{root:"body",selector:`[${z}="${we}"]`},properties:Object.assign({stepsCount:`${(l||[]).length}`,activeStepIndex:`${S}`,activeStepLabel:`[${z}="${H}"]`},c.analyticsMetadata||{})};return t.createElement("div",Object.assign({},T,oe,{ref:U,className:y(r.root,T.className)},f?Z({component:pe}):{}),t.createElement("div",{className:y(r.wizard,r.refresh,B&&r["small-container"])},t.createElement(Me,{activeStepIndex:A,farthestStepIndex:W.current,allowSkipTo:g,hidden:B,i18nStrings:G,isLoadingNextStep:_,onStepClick:se,onSkipToClick:q,steps:l}),t.createElement("div",{className:y(r.form,r.refresh,B&&r["small-container"])},t.createElement(je,{steps:l,showCollapsedSteps:B,i18nStrings:G,submitButtonText:v,activeStepIndex:A,isPrimaryLoading:_,allowSkipTo:g,secondaryActions:N,onCancelClick:le,onPreviousClick:ce,onSkipToClick:q,onPrimaryClick:ue}))))}function Ke(n){var{isLoadingNextStep:o=!1,allowSkipTo:i=!1}=n,a=X(n,["isLoadingNextStep","allowSkipTo"]);const e=K(a),s=be("Wizard",{props:{allowSkipTo:i,flowType:e.flowType},metadata:{hasInstanceIdentifier:!!(e!=null&&e.instanceIdentifier),hasResourceType:!!(e!=null&&e.resourceType)}},e),{wizardCount:u}=V(),d=Ee(a);return x.useEffect(()=>(u.current++,()=>void u.current--),[u]),t.createElement(xe,{funnelIdentifier:e==null?void 0:e.instanceIdentifier,funnelFlowType:e==null?void 0:e.flowType,funnelErrorContext:e==null?void 0:e.errorContext,funnelResourceType:e==null?void 0:e.resourceType,funnelType:"multi-page",optionalStepNumbers:a.steps.map((m,l)=>m.isOptional?l+1:-1).filter(m=>m!==-1),totalFunnelSteps:a.steps.length,stepConfiguration:ee(a.steps)},t.createElement(De,Object.assign({isLoadingNextStep:o,allowSkipTo:i},d,s,{__injectAnalyticsComponentMetadata:!0})))}ge(Ke,"Wizard");export{Ke as W};
