import{c as g,_ as Nt,b as $t,e as Dt,d as Pt}from"./index-eb73e870.js";import{r as f,R as r}from"./index-2c36b58a.js";import{g as z}from"./attributes-9cbf7bc1.js";import{a as Ft}from"./internal-9b98a633.js";import{h as xt,i as Ht,b as Wt}from"./index-491afaa4.js";import{u as Kt}from"./index-cef6af85.js";import{u as Bt}from"./index-5c04613c.js";import{c as qt}from"./check-safe-url-87d46dc3.js";import{u as Ut}from"./use-container-query-60e26c9e.js";import{I as tt,u as Xt,i as zt}from"./internal-1d1af924.js";import{u as Vt}from"./context-d1fbdd85.js";import{b as Qt}from"./utils-06561385.js";import{S as Gt,u as Jt}from"./single-tab-stop-navigation-context-cd355dd7.js";import{u as rt}from"./index-33af1cce.js";import{u as Yt}from"./index-84af6bb2.js";import{K as H}from"./keycode-5e563e63.js";import{c as st}from"./circle-index-ff7c6070.js";import{h as Zt}from"./handle-key-f035cd81.js";import"./ResizeObserver-6fd345a6.js";import{i as te,b as ee,d as lt}from"./index-47bb06f7.js";function ae(){return"scrollBehavior"in document.documentElement.style}const se=e=>.0015*Math.abs(e)+.558,ne=e=>Math.round(Math.abs(e)/se(e)),ct=()=>window.performance?window.performance.now():Date.now(),ie=e=>.5*(1-Math.cos(Math.PI*e)),dt=e=>{const a=ct(),n=Math.min((a-e.startTime)/e.scrollTime,1),l=ie(n),o=e.startX+(e.endX-e.startX)*l;e.scrollable.scrollLeft=o,o!==e.endX&&requestAnimationFrame(()=>dt(e))},oe=(e,a)=>{const n=e.scrollLeft;dt({scrollable:e,startX:n,endX:a,startTime:ct(),scrollTime:ne(a-n)})},re=(e,a)=>{if(te(e)){e.scrollLeft=a;return}if(ae()&&e.scrollTo){e.scrollTo({left:a,behavior:"smooth"});return}oe(e,a)},bt=re,Y=(e,a)=>{if(!(e!=null&&e.current))return;const n=e.current,{scrollLeft:l,scrollWidth:o,offsetWidth:y}=n,R=Math.ceil(n.clientWidth*.75),_=a==="forward"?Math.min(Math.abs(l)+R,o-y):Math.max(Math.abs(l)-R,0),b=ee(n)?_*-1:_;bt(n,b)},le=(e,a)=>{const{offsetWidth:n,scrollWidth:l}=e,o=a.current&&2*a.current.offsetWidth;return o?l>n+o:l>n},nt=e=>lt(e)>0,it=e=>Math.ceil(lt(e))<e.scrollWidth-e.offsetWidth,ce=(e,a,n=!0)=>{if(!e||!a)return;const l=2;let o=a.scrollLeft;o=Math.min(o,e.offsetLeft-l),o=Math.max(o,e.offsetLeft+e.offsetWidth-a.offsetWidth+l),n?bt(a,o):a.scrollLeft=o};const j={"tabs-header-list":"awsui_tabs-header-list_1acwa_dp0cl_5","active-tab-header":"awsui_active-tab-header_1acwa_dp0cl_6","tab-label":"awsui_tab-label_1acwa_dp0cl_7","tab-dismiss-button":"awsui_tab-dismiss-button_1acwa_dp0cl_8"};const s={"tabs-header":"awsui_tabs-header_14rmt_ji2br_290","tabs-header-list":"awsui_tabs-header-list_14rmt_ji2br_298","pagination-button":"awsui_pagination-button_14rmt_ji2br_315","pagination-button-left":"awsui_pagination-button-left_14rmt_ji2br_322","pagination-button-left-scrollable":"awsui_pagination-button-left-scrollable_14rmt_ji2br_325","pagination-button-right":"awsui_pagination-button-right_14rmt_ji2br_329","pagination-button-right-scrollable":"awsui_pagination-button-right-scrollable_14rmt_ji2br_332","tabs-tab":"awsui_tabs-tab_14rmt_ji2br_337","tabs-tab-label":"awsui_tabs-tab-label_14rmt_ji2br_346","tabs-tab-header-container":"awsui_tabs-tab-header-container_14rmt_ji2br_357","tabs-tab-dismiss":"awsui_tabs-tab-dismiss_14rmt_ji2br_368","tabs-tab-action":"awsui_tabs-tab-action_14rmt_ji2br_368",refresh:"awsui_refresh_14rmt_ji2br_372","tabs-tab-disabled":"awsui_tabs-tab-disabled_14rmt_ji2br_376","tabs-tab-link":"awsui_tabs-tab-link_14rmt_ji2br_418","tabs-tab-active":"awsui_tabs-tab-active_14rmt_ji2br_494","tabs-header-with-divider":"awsui_tabs-header-with-divider_14rmt_ji2br_501","tabs-tab-focusable":"awsui_tabs-tab-focusable_14rmt_ji2br_505",root:"awsui_root_14rmt_ji2br_509",tabs:"awsui_tabs_14rmt_ji2br_290","tabs-content":"awsui_tabs-content_14rmt_ji2br_547","fit-height":"awsui_fit-height_14rmt_ji2br_551","tabs-content-active":"awsui_tabs-content-active_14rmt_ji2br_557","tabs-content-wrapper":"awsui_tabs-content-wrapper_14rmt_ji2br_571","with-paddings":"awsui_with-paddings_14rmt_ji2br_571","tabs-container-content-wrapper":"awsui_tabs-container-content-wrapper_14rmt_ji2br_582","disabled-reason-tooltip":"awsui_disabled-reason-tooltip_14rmt_ji2br_593","tabs-tab-focused":"awsui_tabs-tab-focused_14rmt_ji2br_597"};const de={"tab-dismiss-button":"awsui_tab-dismiss-button_1nq1i_1nd7r_5"},be=`.${s["tabs-tab-link"]}`,ue=`[role="tab"].${s["tabs-tab-focused"]}`,ot=`.${s["tabs-tab-focusable"]}`;function fe({dismissLabel:e,dismissDisabled:a,onDismiss:n,tabId:l}){return r.createElement(tt,{onClick:n,variant:"icon",iconName:"close",formAction:"none",ariaLabel:e,disabled:a,className:g(de["tab-dismiss-button"],j["tab-dismiss-button"]),"data-testid":`awsui-tab-dismiss-button-${l}`})}function me({onChange:e,activeTabId:a,tabs:n,variant:l,idNamespace:o,ariaLabel:y,ariaLabelledby:R,i18nStrings:_}){const b=f.useRef(null),T=f.useRef(null),M=f.useRef(null),v=Vt("tabs"),L=Yt(),w=f.useRef(null),[E,I]=Ut(t=>t.contentBoxWidth),W=rt(w,I),p=f.useRef(new Map),[C,V]=f.useState(!1),[N,m]=f.useState(!1),[K,A]=f.useState(!1),[Q,Z]=f.useState(a),[B,G]=f.useState(a),q=n.some(t=>t.action||t.dismissible),ft=q?{role:"application","aria-roledescription":v("i18nStrings.tabsWithActionsAriaRoleDescription",_==null?void 0:_.tabsWithActionsAriaRoleDescription)}:{role:"tablist"};f.useEffect(()=>{b.current&&(V(le(b.current,M)),m(nt(b.current)),A(it(b.current)))},[E,n]);const et=t=>{if(!a)return;const i=p.current.get(a);i&&b.current&&ce(i,b.current,t)};f.useEffect(()=>{requestAnimationFrame(()=>{et(!1)})},[C,E,n.length]),f.useEffect(()=>{et(!0)},[a]),f.useEffect(()=>{var t,i;!((t=b.current)===null||t===void 0)&&t.contains(document.activeElement)&&document.activeElement!==T.current&&((i=T.current)===null||i===void 0||i.focus({preventScroll:!0}))},[a]);const mt=()=>{b.current&&(m(nt(b.current)),A(it(b.current)))},_t=g({[s["tabs-header"]]:!0,[s["tabs-header-with-divider"]]:l==="default"||L}),pt=g({[s["pagination-button"]]:!0,[s["pagination-button-left"]]:!0,[s["pagination-button-left-scrollable"]]:N}),ht=g({[s["pagination-button"]]:!0,[s["pagination-button-right"]]:!0,[s["pagination-button-right-scrollable"]]:K}),$=f.useRef(null);function gt(){var t,i;if(!w.current)return null;const h=Array.from(w.current.querySelectorAll(be));return(i=(t=h.find(c=>c.matches(ue)))!==null&&t!==void 0?t:h.find(c=>!c.disabled))!==null&&i!==void 0?i:null}function vt(t){var i;if(!!t.classList.contains(s["tabs-tab-link"])){const c=(i=$.current)===null||i===void 0?void 0:i.getFocusTarget(),u=c==null?void 0:c.querySelector(`.${s["tabs-tab-link"]}`);u==null||u.focus()}}f.useEffect(()=>{var t;(t=$.current)===null||t===void 0||t.updateFocusTarget()});function wt(){var t;(t=$.current)===null||t===void 0||t.updateFocusTarget()}function Tt(){var t;(t=$.current)===null||t===void 0||t.updateFocusTarget()}function Et(t){const i=document.activeElement,h=[H.right,H.left,H.end,H.home,H.pageUp,H.pageDown],c=document.querySelector(`.${s["tabs-tab-action"]} [aria-expanded="true"]`),u=!(i!=null&&i.classList.contains(s["tabs-tab-link"]));if(c)return;if(t.key==="Tab"&&!t.shiftKey&&u){t.preventDefault();const D=`${o}-${a}-panel`,U=document.getElementById(D);U==null||U.focus()}if(xt(t)||h.indexOf(t.keyCode)===-1||!w.current||!i)return;t.preventDefault();const d=at(w.current),O=document.activeElement instanceof HTMLElement?d.indexOf(document.activeElement):-1;Zt(t,{onHome:()=>J(d[0]),onEnd:()=>J(d[d.length-1]),onInlineStart:()=>J(d[st(O-1,[0,d.length-1])]),onInlineEnd:()=>J(d[st(O+1,[0,d.length-1])]),onPageDown:()=>K&&Y(b,"forward"),onPageUp:()=>N&&Y(b,"backward")})}function J(t){var i,h;t.focus();const c=n.reduce((u,d)=>u.set(d.id,d),new Map);for(const[u,d]of p.current.entries()){const O=d==null?void 0:d.querySelector(`.${s["tabs-tab-link"]}`);if(u!==a&&O===t){G(u),Z(u),!((i=c.get(u))===null||i===void 0)&&i.disabled||e({activeTabId:u,activeTabHref:(h=c.get(u))===null||h===void 0?void 0:h.href});break}}}function at(t){function i(c){var u,d;return(d=(u=$.current)===null||u===void 0?void 0:u.isRegistered(c))!==null&&d!==void 0?d:!1}function h(c){return c instanceof HTMLButtonElement?!c.disabled||c.closest(ot):c.matches(ot)}return Qt(t).filter(c=>i(c)&&h(c))}const St=q?"div":"ul";return r.createElement("div",{className:_t,ref:W},C&&r.createElement("span",{ref:M,className:pt},r.createElement(tt,{formAction:"none",variant:"icon",iconName:"angle-left",disabled:!N,__focusable:!0,onClick:()=>Y(b,"backward"),ariaLabel:v("i18nStrings.scrollLeftAriaLabel",_==null?void 0:_.scrollLeftAriaLabel)})),r.createElement(Gt,{ref:$,navigationActive:!0,getNextFocusTarget:gt,onUnregisterActive:vt},r.createElement(St,Object.assign({},ft,{className:g(s["tabs-header-list"],j["tabs-header-list"]),"aria-label":y,"aria-labelledby":R,ref:b,onScroll:mt,onKeyDown:Et,onFocus:wt,onBlur:Tt}),n.map(jt))),C&&r.createElement("span",{className:ht},r.createElement(tt,{formAction:"none",variant:"icon",iconName:"angle-right",disabled:!K,__focusable:!0,onClick:()=>Y(b,"forward"),ariaLabel:v("i18nStrings.scrollRightAriaLabel",_==null?void 0:_.scrollRightAriaLabel)})));function jt(t,i){const{dismissible:h,dismissLabel:c,dismissDisabled:u,action:d,onDismiss:O}=t,D=a===t.id&&!t.disabled,U=S=>{if(t.disabled){S.preventDefault();return}if(!(!Ht(S)&&t.href)){if(S.preventDefault(),!t.href){const k=p.current.get(t.id);k&&k&&k!==document.activeElement&&k.focus({preventScroll:!0})}t.id!==a&&(Z(t.id),G(t.id),e({activeTabId:t.id,activeTabHref:t.href}))}},yt=g({[s["tabs-tab-link"]]:!0,[s.refresh]:L,[s["tabs-tab-active"]]:a===t.id&&!t.disabled,[s["tabs-tab-focused"]]:Q===t.id,[s["tabs-tab-active"]]:D,[j["active-tab-header"]]:D,[s["tabs-tab-disabled"]]:t.disabled,[s["tabs-tab-focusable"]]:!t.disabled||t.disabled&&!!t.disabledReason}),Rt=g({[s["tabs-tab-header-container"]]:!0,[s.refresh]:L,[s["tabs-tab-active"]]:D,[s["tabs-tab-disabled"]]:t.disabled,[s["tabs-tab-focusable"]]:!t.disabled||t.disabled&&!!t.disabledReason}),It=g({[s["tabs-tab-action"]]:!0,[s["tabs-tab-active"]]:D}),P={className:yt,"aria-controls":`${o}-${t.id}-panel`,"data-testid":t.id,id:ut({namespace:o,tabId:t.id}),onClick:U},At=q?{role:"group","aria-labelledby":P.id}:{};q?P["aria-expanded"]=a===t.id:(P["aria-selected"]=a===t.id,P.role="tab"),t.disabled&&(P["aria-disabled"]="true");const Lt=S=>{t.id===a&&(T.current=S),p.current.set(t.id,S)},Ct=S=>{if(!w.current||!O)return;const F=at(w.current).filter(X=>X.classList.contains(s["tabs-tab-link"])),k=F.findIndex(X=>X.dataset.testid===t.id);F.splice(k,1);let x;B&&B!==t.id?x=F.find(X=>X.dataset.testid===B):x=F[Math.min(F.length-1,k)],x&&x.dataset.testid&&(e({activeTabId:x.dataset.testid}),x.focus()),O(S)},Ot=q?"div":"li",kt={action:"dismiss",detail:{id:t.id,label:`.${j["tab-dismiss-button"]}`,position:`${i+1}`}},Mt={innerContext:{tabId:t.id,tabLabel:`.${j["tab-label"]}`,tabPosition:`${i+1}`}};return r.createElement(Ot,{ref:S=>p.current.set(t.id,S),className:s["tabs-tab"],role:"presentation",key:t.id},r.createElement("div",Object.assign({className:Rt},At,z({component:Mt})),r.createElement(_e,{ref:Lt,tab:t,elementProps:P,activeTabId:a,index:i}),d&&r.createElement("span",{className:It},d),h&&r.createElement("span",Object.assign({className:s["tabs-tab-dismiss"]},z(kt)),fe({dismissLabel:c,dismissDisabled:u,onDismiss:Ct,tabId:t.id}))))}}const _e=f.forwardRef(({tab:e,elementProps:a,activeTabId:n,index:l},o)=>{const y=f.useRef(null),R=f.useRef(null),_=rt(y,o),{tabIndex:b}=Jt(y),T=e.disabled&&!!e.disabledReason,[M,v]=f.useState(!1),{targetProps:L,descriptionEl:w}=Xt(e.disabledReason),E=r.createElement(r.Fragment,null,r.createElement("span",{className:g(s["tabs-tab-label"],j["tab-label"]),ref:R},r.createElement("span",null,e.label)),T&&r.createElement(r.Fragment,null,w,M&&r.createElement(zt,{className:s["disabled-reason-tooltip"],trackRef:R,value:e.disabledReason}))),I={onFocus:()=>v(!0),onBlur:()=>v(!1),onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},W={action:"select",detail:{id:e.id,label:`.${j["tab-label"]}`,position:`${l+1}`,originTabId:n||""}},p=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),T?L:{}),T?I:{}),{ref:_,tabIndex:b}),e.disabled||e.id===n?{}:z(W));return e.href?r.createElement("a",Object.assign({},p,{href:e.href}),E):r.createElement("button",Object.assign({},p,{type:"button",disabled:e.disabled&&!T}),E)});function ut({namespace:e,tabId:a}){return e+"-"+a}function pe(e){const a=e.filter(n=>!n.disabled);return a.length>0?a[0]:null}function he(e){var a,n,{tabs:l,variant:o="default",onChange:y,activeTabId:R,ariaLabel:_,ariaLabelledby:b,disableContentPaddings:T=!1,i18nStrings:M,fitHeight:v}=e,L=Nt(e,["tabs","variant","onChange","activeTabId","ariaLabel","ariaLabelledby","disableContentPaddings","i18nStrings","fitHeight"]);for(const m of l)qt("Tabs",m.href);const{__internalRootRef:w}=$t("Tabs",{props:{disableContentPaddings:T,variant:o,fitHeight:v},metadata:{hasActions:l.some(m=>!!m.action),hasDisabledReasons:l.some(m=>!!m.disabledReason)}}),E=Bt("awsui-tabs-"),[I,W]=Kt(R,y,(n=(a=pe(l))===null||a===void 0?void 0:a.id)!==null&&n!==void 0?n:"",{componentName:"Tabs",controlledProp:"activeTabId",changeHandler:"onChange"}),p=Dt(L),C={name:"awsui.Tabs",label:`.${j["tabs-header-list"]}`};I&&(C.properties={activeTabId:I,activeTabLabel:`.${j["active-tab-header"]} .${j["tab-label"]}`,activeTabPosition:`${l.findIndex(m=>m.id===I)+1}`,tabsCount:`${l.length}`});const V=()=>{const m=l.filter(A=>A.id===I)[0],K=A=>{const Q=A===m,B={className:g({[s["tabs-content"]]:!0,[s["tabs-content-active"]]:Q}),role:"tabpanel",id:`${E}-${A.id}-panel`,key:`${E}-${A.id}-panel`,tabIndex:0,"aria-labelledby":ut({namespace:E,tabId:A.id})},G=Q&&!m.disabled;return r.createElement("div",Object.assign({},B),G&&m.content)};return r.createElement("div",{className:g(o==="container"||o==="stacked"?s["tabs-container-content-wrapper"]:s["tabs-content-wrapper"],{[s["with-paddings"]]:!T})},l.map(K))},N=r.createElement(me,{activeTabId:I,variant:o,idNamespace:E,ariaLabel:_,ariaLabelledby:b,tabs:l,onChange:m=>{W(m.activeTabId),Wt(y,m)},i18nStrings:M});return o==="container"||o==="stacked"?r.createElement(Ft,Object.assign({header:N,disableHeaderPaddings:!0},p,{className:g(p.className,s.root),__internalRootRef:w,disableContentPaddings:!0,variant:o==="stacked"?"stacked":"default",fitHeight:v},z({component:C})),V()):r.createElement("div",Object.assign({},p,{className:g(p.className,s.root,s.tabs,{[s["fit-height"]]:v}),ref:w},z({component:C})),N,V())}Pt(he,"Tabs");export{he as T};
