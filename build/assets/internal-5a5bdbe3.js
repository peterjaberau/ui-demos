import{_ as A,e as ie,c as u}from"./index-eb73e870.js";import{R as t,r as a}from"./index-2c36b58a.js";import{u as re}from"./use-container-query-60e26c9e.js";import{g as I}from"./attributes-9cbf7bc1.js";import{P as de,F as le,I as ce,B as ue}from"./internal-1d1af924.js";import{I as me}from"./internal-971f8eb5.js";import{u as _e}from"./context-d1fbdd85.js";import{P as fe}from"./index-b7e4292a.js";import{d as N,f as pe,u as be,a as ge}from"./use-funnel-f65631cb.js";import{M as ye}from"./modal-context-069faf31.js";import{R as we}from"./reset-contexts-for-modal-28d84991.js";import{b as Re}from"./index-491afaa4.js";import{b as he,u as ve}from"./browser-scrollbar-size-b8d76340.js";import{u as Pe}from"./index-33af1cce.js";import{u as Ce}from"./index-5c04613c.js";import{K as Se}from"./keycode-5e563e63.js";import{u as je}from"./use-container-breakpoints-ef827eb4.js";const e={dialog:"awsui_dialog_1d2i7_miaej_169","modal-slide-up":"awsui_modal-slide-up_1d2i7_miaej_1","awsui-motion-fade-in-0":"awsui_awsui-motion-fade-in-0_1d2i7_miaej_1",refresh:"awsui_refresh_1d2i7_miaej_192","awsui-motion-scale-popup":"awsui_awsui-motion-scale-popup_1d2i7_miaej_1",root:"awsui_root_1d2i7_miaej_225","awsui-motion-fade-in":"awsui_awsui-motion-fade-in_1d2i7_miaej_1",hidden:"awsui_hidden_1d2i7_miaej_302","focus-lock":"awsui_focus-lock_1d2i7_miaej_306",small:"awsui_small_1d2i7_miaej_326",medium:"awsui_medium_1d2i7_miaej_329",large:"awsui_large_1d2i7_miaej_332",max:"awsui_max_1d2i7_miaej_335","breakpoint-xs":"awsui_breakpoint-xs_1d2i7_miaej_335",container:"awsui_container_1d2i7_miaej_341",content:"awsui_content_1d2i7_miaej_382","no-paddings":"awsui_no-paddings_1d2i7_miaej_387",header:"awsui_header_1d2i7_miaej_392","header--text":"awsui_header--text_1d2i7_miaej_404",footer:"awsui_footer_1d2i7_miaej_408","footer--stuck":"awsui_footer--stuck_1d2i7_miaej_417","dismiss-control":"awsui_dismiss-control_1d2i7_miaej_429","modal-open":"awsui_modal-open_1d2i7_miaej_433"};let f;function ke(){Ee(),document.body.classList.add(e["modal-open"])}function x(){document.body.classList.remove(e["modal-open"]),Ie()}function Ee(){if(xe()){f=document.body.style.paddingRight;const s=Me(),i=he().width,r=s+i;document.body.style.paddingRight=r+"px"}}function Me(){return parseInt(window.getComputedStyle(document.body).paddingRight,10)}function Ie(){f?document.body.style.setProperty("padding-right",f):document.body.style.removeProperty("padding-right"),f=void 0}function xe(){return document.body.clientWidth<window.innerWidth}const B={header:"awsui_header_15dxs_1ns0c_5"};function Xe(s){const{funnelProps:i,funnelSubmit:r,funnelNextOrSubmitAttempt:n}=be(),{funnelStepProps:l}=ge(),{subStepRef:p,funnelSubStepProps:m}=N(),b=({variant:g})=>{g==="primary"&&(n(),r())};return t.createElement(Be,Object.assign({__funnelProps:i,__funnelStepProps:l,__subStepRef:p,__subStepFunnelProps:m,onButtonClick:b},s))}function Be(s){var{modalRoot:i,getModalRoot:r,removeModalRoot:n}=s,l=A(s,["modalRoot","getModalRoot","removeModalRoot"]);return t.createElement(de,{container:i,getContainer:r,removeContainer:n},t.createElement(Ae,Object.assign({},l)))}function Ae(s){var i,{size:r,visible:n,header:l,children:p,footer:m,disableContentPaddings:b,onButtonClick:g=()=>{},onDismiss:F,__internalRootRef:O=null,__injectAnalyticsComponentMetadata:D,__funnelProps:L,__funnelStepProps:T,__subStepRef:H,__subStepFunnelProps:$,referrerId:K}=s,y=A(s,["size","visible","header","children","footer","disableContentPaddings","onButtonClick","onDismiss","__internalRootRef","__injectAnalyticsComponentMetadata","__funnelProps","__funnelStepProps","__subStepRef","__subStepFunnelProps","referrerId"]);const v=Ce(),P=`${y.id||v}-header`,C=a.useRef(null),[W,z]=je(["xs"]),U=_e("modal")("closeAriaLabel",y.closeAriaLabel),_=a.useRef(null),q=Pe(z,_,O),S=ie(y),Q={name:"awsui.Modal",label:`.${B.header} h2`},Y=D?I({component:Q}):{},c=a.useRef(0),G=a.useRef(0),j=a.useRef(0),w=a.useRef(!1);a.useEffect(()=>()=>{x()},[]);const J=()=>{c.current=performance.now(),G.current=0,w.current=!1},k=o=>{var d;if(j.current===0&&c.current&&c.current!==0&&!w.current){const h=o-c.current;fe.modalPerformanceData({timeToContentReadyInModal:h,instanceIdentifier:v,componentIdentifier:((d=M.current)===null||d===void 0?void 0:d.textContent)||""}),w.current=!0}},V=100;a.useEffect(()=>{n?(ke(),J(),setTimeout(()=>{k(c.current)},V)):x()},[n]),a.useEffect(()=>{n&&_.current&&(_.current.scrollTop=0)},[n]);const R=o=>Re(F,{reason:o}),X=o=>{C.current=o.target},Z=o=>{const d=_.current,h=C.current;o.target===d&&h===d&&R("overlay")},ee=()=>R("closeButton"),te=o=>{o.keyCode===Se.escape&&R("keyboard")},{ref:oe,isIntersecting:ne}=ve(),[E,ae]=re(o=>o.borderBoxHeight),M=a.useRef(null),{subStepRef:se}=N();return t.createElement(pe.Provider,{value:`.${e["header--text"]}`},t.createElement(we,null,t.createElement(ye.Provider,{value:{isInModal:!0,componentLoadingCount:j,emitTimeToContentReadyInModal:k}},t.createElement("div",Object.assign({},S,L,T,{className:u(e.root,{[e.hidden]:!n},S.className,e.refresh),role:"dialog","aria-labelledby":P,onMouseDown:X,onClick:Z,ref:q,style:E?{scrollPaddingBottom:E}:void 0,"data-awsui-referrer-id":((i=se.current)===null||i===void 0?void 0:i.id)||K}),t.createElement(le,{disabled:!n,autoFocus:!0,restoreFocus:!0,className:e["focus-lock"]},t.createElement("div",Object.assign({className:u(e.dialog,e[r],e[`breakpoint-${W}`],e.refresh),onKeyDown:te},Y),t.createElement("div",{className:e.container},t.createElement("div",{className:u(e.header,B.header)},t.createElement(me,{variant:"h2",__disableActionsWrapping:!0,actions:t.createElement("div",Object.assign({},I({action:"dismiss"})),t.createElement(ce,{ariaLabel:U,className:e["dismiss-control"],variant:"modal-dismiss",iconName:"close",formAction:"none",onClick:ee}))},t.createElement("span",{ref:M,id:P,className:e["header--text"]},l))),t.createElement("div",Object.assign({ref:H},$,{className:u(e.content,{[e["no-paddings"]]:b})}),p,t.createElement("div",{ref:oe})),m&&t.createElement(ue.Provider,{value:{onClick:g}},t.createElement("div",{ref:ae,className:u(e.footer,ne&&e["footer--stuck"])},m)))))))))}export{Be as I,Xe as a,e as s};
