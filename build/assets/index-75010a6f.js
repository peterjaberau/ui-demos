import{c as p,_ as j,e as G,b as J,d as K}from"./index-eb73e870.js";import{R as l,r as T}from"./index-2c36b58a.js";import"./ResizeObserver-6fd345a6.js";import{u as Q}from"./context-d1fbdd85.js";import{i as ee}from"./internal-1d1af924.js";import{u as te}from"./form-field-context-fcff921e.js";import{b as ae}from"./index-491afaa4.js";import{c as f}from"./index-c328e31d.js";import{u as ie}from"./index-5c04613c.js";import{u as se}from"./index-1b07c59a.js";const a={root:"awsui_root_pcgz5_3bv9o_153",slider:"awsui_slider_pcgz5_3bv9o_190","slider-track":"awsui_slider-track_pcgz5_3bv9o_194","slider-range":"awsui_slider-range_pcgz5_3bv9o_194",disabled:"awsui_disabled_pcgz5_3bv9o_209",readonly:"awsui_readonly_pcgz5_3bv9o_213",error:"awsui_error_pcgz5_3bv9o_222",warning:"awsui_warning_pcgz5_3bv9o_225",active:"awsui_active_pcgz5_3bv9o_228","error-active":"awsui_error-active_pcgz5_3bv9o_231","warning-active":"awsui_warning-active_pcgz5_3bv9o_234",labels:"awsui_labels_pcgz5_3bv9o_245","labels-noref":"awsui_labels-noref_pcgz5_3bv9o_251","labels-reference":"awsui_labels-reference_pcgz5_3bv9o_254","labels-min":"awsui_labels-min_pcgz5_3bv9o_261","labels-max":"awsui_labels-max_pcgz5_3bv9o_267","labels-aria-description":"awsui_labels-aria-description_pcgz5_3bv9o_275",ticks:"awsui_ticks_pcgz5_3bv9o_293","ticks-wrapper":"awsui_ticks-wrapper_pcgz5_3bv9o_299",tick:"awsui_tick_pcgz5_3bv9o_293",middle:"awsui_middle_pcgz5_3bv9o_314",filled:"awsui_filled_pcgz5_3bv9o_317","tooltip-thumb":"awsui_tooltip-thumb_pcgz5_3bv9o_345",thumb:"awsui_thumb_pcgz5_3bv9o_358",min:"awsui_min_pcgz5_3bv9o_394",max:"awsui_max_pcgz5_3bv9o_397"};function ne({min:i,max:t,referenceValues:e,valueFormatter:s,labelsId:o,ariaDescription:r}){const c=se()?4:10,g=(t-i)/c,h=()=>{if(!e||e.length===0)return[];const d=[];let u=i;for(let n=0;n<=e.length;n++)e[n]>i&&e[n]<t&&Math.abs(e[n]-u)>=g&&Math.abs(t-e[n])>=g&&Number.isInteger(e[n])&&(d.push(e[n]),u=e[n]);return d};function b(d){const u=Math.floor(g/2),n=d-u,k=d+u;if(t-i<=c)return{min:1,max:(t-i)*2-1,posStart:(d-i)*2,posEnd:(d-i)*2};const v=Math.round(u/2);return{min:u*2+v,max:(t-i-u)*2-v+1,posStart:(n-i)*2+1+v,posEnd:(k-i)*2-v}}return l.createElement(l.Fragment,null,l.createElement("div",{role:"list","aria-hidden":!s&&!e?"true":void 0,className:p(a.labels,{[a["labels-noref"]]:h().length===0}),style:{[f.sliderLabelCount]:h().length===0?2:(t-i)*2},id:r?void 0:o},l.createElement("span",{role:"listitem",className:p(a.label,a["labels-min"]),style:{[f.sliderMinEnd]:b(0).min}},s?s(i):i),h().map(d=>l.createElement("span",{role:"listitem",key:d,style:{[f.sliderReferenceColumn]:b(d).posStart,[f.sliderNextReferenceColumn]:b(d).posEnd},className:p(a.label,a["labels-reference"])},s?s(d):d)),l.createElement("span",{role:"listitem",className:p(a.label,a["labels-max"]),style:{[f.sliderMaxStart]:e?b(0).max:2}},s?s(t):t)),r&&l.createElement("div",{className:a["labels-aria-description"],id:o},r))}function re(i,t){return(i-t[0])/(t[1]-t[0])*100}function le(i){var t;if(Math.floor(i)===i)return 0;const e=Math.abs(i).toString();return e.indexOf("-")!==-1?parseInt(e.split("-")[1],10)||0:((t=e.split(".")[1])===null||t===void 0?void 0:t.length)||0}const H=(i,[t,e])=>{const s=[t],o=Math.pow(10,le(i));let r=t;for(;r<e;)r=(o*r+o*i)/o,r<=e&&s.push(r);return s},oe=(i,t)=>{let e=[...i];e=e.sort((m,c)=>m-c);const s=e.indexOf(t)||0,o=e[s-1]||void 0,r=e[s+1]||void 0;return{lower:o,higher:r}},ce=i=>(i==null?void 0:i.filter(e=>!Number.isInteger(e))).length===0,de=16,ue=12;function I(i){const{hideFillLine:t,value:e,isActive:s,invalid:o,warning:r,disabled:m,type:c,min:g,max:h,step:b,readOnly:d}=i,u=r&&!o,n=()=>c==="min"?g:c==="max"?h:b;return l.createElement("div",{className:p(a.tick,{[a.filled]:!t&&e>n(),[a.active]:!t&&s&&e>n(),[a.error]:o&&!t&&e>n(),[a.warning]:u&&!t&&e>n(),[a["error-active"]]:o&&s&&!t&&e>n(),[a["warning-active"]]:u&&s&&!t&&e>n(),[a.disabled]:m,[a.readonly]:d,[a.middle]:c==="step"})})}function _e(i){const{min:t,max:e,step:s}=i;return l.createElement("div",{className:a["ticks-wrapper"]},l.createElement(I,Object.assign({},i,{type:"min"})),l.createElement("div",{className:a.ticks,style:{[f.sliderTickCount]:Math.round((e-t)/s)}},H(s,[t,e]).map((o,r)=>l.createElement(I,Object.assign({},i,{type:"step",step:o,key:`step-${r}`})))),l.createElement(I,Object.assign({},i,{type:"max"})))}function be(i){var{value:t,min:e,max:s,onChange:o,step:r,disabled:m,readOnly:c,ariaLabel:g,ariaDescription:h,referenceValues:b,tickMarks:d,hideFillLine:u,valueFormatter:n,i18nStrings:k,__internalRootRef:O=null}=i,v=j(i,["value","min","max","onChange","step","disabled","readOnly","ariaLabel","ariaDescription","referenceValues","tickMarks","hideFillLine","valueFormatter","i18nStrings","__internalRootRef"]);const A=G(v),U=Q("slider"),C=T.useRef(null),[V,y]=T.useState(!1),[S,z]=T.useState(!1),N=ie("labels"),{ariaLabelledby:W,ariaDescribedby:L,controlId:Z,invalid:E,warning:D}=te(v),R=D&&!E;b&&ce(b);const _=(()=>{const x=r&&r<s-e&&r>e;return t===void 0?s<e?e:e+(s-e)/2:r&&r&&x&&(t-e)%r!==0?H(r,[e,s]).reduce(function(w,M){return Math.abs(M-t)<Math.abs(w-t)?M:w}):t})(),F=re(Math.max(Math.min(_,s),e),[e,s]),q=()=>{if(n&&n(_))return n(_);if(n&&!n(_)){const P=[e,...b||[],_,s],w=oe(P,_),M=w.lower?n(w.lower):n(e),B=w.higher?n(w.higher):n(s),$=_;return U("i18nStrings.valueTextRange",k==null?void 0:k.valueTextRange(M,$,B),Y=>Y({value:$,previousValue:M,nextValue:B}))}},X=c?ue:de;return l.createElement("div",Object.assign({},A,{ref:O,className:p(A.className,a.root)}),V&&l.createElement(ee,{value:n?n(_):_,trackRef:C}),l.createElement("div",{ref:C,className:p(a["tooltip-thumb"],{[a.readonly]:c}),style:{[f.sliderTooltipPosition]:`calc(${F}% - ${X}px)`}}),l.createElement("div",{className:a.slider},l.createElement("div",{className:p(a["slider-track"],{[a.disabled]:m,[a.readonly]:c})}),!u&&l.createElement("div",{className:p(a["slider-range"],{[a.error]:E,[a.warning]:R,[a.active]:S,[a["error-active"]]:E&&S,[a["warning-active"]]:R&&S,[a.disabled]:m,[a.readonly]:c}),style:{[f.sliderRangeInlineSize]:`${F}%`}})),!!r&&d&&l.createElement(_e,{hideFillLine:u,disabled:m,readOnly:c,invalid:E,warning:D,isActive:S,step:r,min:e,max:s,value:_}),l.createElement("input",{tabIndex:0,"aria-label":g,"aria-labelledby":g&&!v.ariaLabelledby?void 0:W,"aria-describedby":n?L?`${N} ${L}`:N:L,"aria-valuetext":q(),"aria-invalid":E?"true":void 0,"aria-disabled":c&&!m?"true":void 0,id:Z,type:"range",min:e,max:s,disabled:m,onFocus:()=>{y(!0),z(!0)},onBlur:()=>{y(!1),z(!1)},onMouseEnter:()=>{y(!0)},onMouseLeave:()=>{y(!1)},onTouchStart:()=>{y(!0),z(!0)},onTouchEnd:()=>{y(!1),z(!1)},step:r,value:_,onChange:x=>{c||o&&ae(o,{value:Number(x.target.value)})},className:p(a.thumb,{[a.error]:E,[a.warning]:R,[a.disabled]:m,[a.readonly]:c,[a.min]:_<=e||s<e,[a.max]:_>=s&&e<s})}),l.createElement(ne,{min:e,max:s,referenceValues:b,valueFormatter:n,labelsId:N,ariaDescription:h}))}function me(i){var{tickMarks:t,hideFillLine:e}=i,s=j(i,["tickMarks","hideFillLine"]);const o=J("Slider",{props:{tickMarks:t,hideFillLine:e,readOnly:s.readOnly}});return l.createElement(be,Object.assign({tickMarks:t,hideFillLine:e},s,o))}K(me,"Slider");export{me as S};
