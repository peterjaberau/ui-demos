import{_ as C,e as E,c as T}from"./index-eb73e870.js";import{R as m,r as s}from"./index-2c36b58a.js";import{u as P}from"./index-33af1cce.js";const f={root:"awsui_root_1iee7_xy9l5_145",announcer:"awsui_announcer_1iee7_xy9l5_153"};const h={root:"awsui_root_1pc7b_1k8pp_5",announcer:"awsui_announcer_1pc7b_1k8pp_9"};class a{constructor(e,n=a.defaultDelay){this.politeness=e,this.delay=n,this._addedTerminalPeriod=!1,this._nextAnnouncement="",this._element=document.createElement("div"),this._element.className=`${f.announcer} ${h.announcer}`,this._element.setAttribute("aria-live",this.politeness),this._element.setAttribute("aria-atomic","true"),document.body.appendChild(this._element)}destroy(){var e;(e=this._element)===null||e===void 0||e.remove(),this._timeoutId!==void 0&&(clearTimeout(this._timeoutId),this._timeoutId=void 0)}announce({message:e,forceReannounce:n=!1}){if(e){if(this._nextAnnouncement=e.trim(),this.delay===0||n)return this._updateElement(n);this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>this._updateElement(!1),this.delay*1e3))}}_updateElement(e){this._nextAnnouncement!==this._lastAnnouncement?(this._element.textContent=this._nextAnnouncement,this._addedTerminalPeriod=!1):e&&(this._element.textContent=this._nextAnnouncement+(this._addedTerminalPeriod?"":"."),this._addedTerminalPeriod=!this._addedTerminalPeriod),this._lastAnnouncement=this._nextAnnouncement,this._timeoutId=void 0}}a.defaultDelay=2;const j=m.forwardRef(function(e,n){var{assertive:l=!1,hidden:u=!1,tagName:v="div",delay:c,sources:d,children:y,__internalRootRef:R,className:g}=e,x=C(e,["assertive","hidden","tagName","delay","sources","children","__internalRootRef","className"]);const A=E(x),r=s.useRef(null),I=P(r,R);s.useEffect(()=>{r.current&&(r.current.inert=u)},[u]);const o=s.useRef();s.useEffect(()=>{const t=new a(l?"assertive":"polite");return o.current=t,()=>{t.destroy(),o.current=void 0}},[l]);const _=()=>{if(d)return b(d);if(r.current)return p(r.current)};return s.useEffect(()=>{var t;(t=o.current)===null||t===void 0||t.announce({message:_(),delay:c})}),s.useImperativeHandle(n,()=>({reannounce(){var t;(t=o.current)===null||t===void 0||t.announce({message:_(),delay:c,forceReannounce:!0})}})),m.createElement(v,Object.assign({ref:I},A,{className:T(f.root,h.root,g),hidden:u}),y)});function p(i){return(i.textContent||"").replace(/\s+/g," ").trim()}function b(i){return i.map(e=>{if(!e||typeof e=="string")return e;if(e.current)return p(e.current)}).filter(Boolean).join(" ")}export{j as I};
